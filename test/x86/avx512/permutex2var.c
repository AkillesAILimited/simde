/* SPDX-License-Identifier: MIT
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use, copy,
 * modify, merge, publish, distribute, sublicense, and/or sell copies
 * of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS
 * BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN
 * ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 * Copyright:
 *   2020      Evan Nemerson <evan@nemerson.com>
 *   2020      Christopher Moore <moore@free.fr>
 */

#define SIMDE_TEST_X86_AVX512_INSN permutex2var

#include <test/x86/avx512/test-avx512.h>
#include <simde/x86/avx512/set.h>
#include <simde/x86/avx512/permutex2var.h>

static int
test_simde_mm512_permutex2var_epi32(SIMDE_MUNIT_TEST_ARGS) {
  const struct {
    simde__m512i a;
    simde__m512i idx;
    simde__m512i b;
    simde__m512i r;
  } test_vec[8] = {
    { simde_mm512_set_epi32(INT32_C( 1996766677), INT32_C(  914731069), INT32_C( 1945861252), INT32_C(  879354074),
                            INT32_C( -643998219), INT32_C( -855842922), INT32_C( 1434025670), INT32_C( -672258087),
                            INT32_C( 1290251647), INT32_C(-1094826982), INT32_C(  238338636), INT32_C( -252228416),
                            INT32_C(  122123135), INT32_C(  750368606), INT32_C( -381589944), INT32_C(  924273218)),
      simde_mm512_set_epi32(INT32_C( -879327216), INT32_C( 1748554959), INT32_C(-1487719285), INT32_C( 1548675310),
                            INT32_C( -557015483), INT32_C(-2047402472), INT32_C( -322319998), INT32_C( 1785739054),
                            INT32_C(  318403170), INT32_C(-1131639819), INT32_C(-1187670028), INT32_C(  146529946),
                            INT32_C(-1037158278), INT32_C(  297634970), INT32_C( 1928669860), INT32_C( -102995392)),
      simde_mm512_set_epi32(INT32_C( 1106394199), INT32_C( 1786608232), INT32_C(  477078085), INT32_C(-1779632362),
                            INT32_C( -966979640), INT32_C( -998912797), INT32_C( 1045049163), INT32_C(-1292333722),
                            INT32_C( 1183794740), INT32_C( -731066686), INT32_C(  511551854), INT32_C( 1167565783),
                            INT32_C(  809184406), INT32_C(-1484085267), INT32_C( -106978631), INT32_C(-1748122897)),
      simde_mm512_set_epi32(INT32_C(-1748122897), INT32_C( 1996766677), INT32_C( -643998219), INT32_C(  914731069),
                            INT32_C(  238338636), INT32_C(-1292333722), INT32_C(  750368606), INT32_C(  914731069),
                            INT32_C(  750368606), INT32_C(  511551854), INT32_C( 1167565783), INT32_C( -998912797),
                            INT32_C( -998912797), INT32_C( -998912797), INT32_C( -252228416), INT32_C(  924273218)) },
    { simde_mm512_set_epi32(INT32_C( -572206162), INT32_C(-1229665005), INT32_C(-2082924696), INT32_C( -649416979),
                            INT32_C( 2112092702), INT32_C( -909261280), INT32_C(-1418185146), INT32_C(-1714733997),
                            INT32_C( 1030181563), INT32_C( -291680665), INT32_C(-1617776213), INT32_C( 2112788110),
                            INT32_C(  207483507), INT32_C( 1144876369), INT32_C( 1177485782), INT32_C( 1952824319)),
      simde_mm512_set_epi32(INT32_C( -736462739), INT32_C( 1787530508), INT32_C( 1887757958), INT32_C(-2099529631),
                            INT32_C(  262676022), INT32_C(   53886530), INT32_C( 1760597059), INT32_C( 1505905484),
                            INT32_C(  774167251), INT32_C(  967143468), INT32_C(  868941550), INT32_C(-1213290419),
                            INT32_C( 1972608228), INT32_C(   11142680), INT32_C(-1446276724), INT32_C(-1200659658)),
      simde_mm512_set_epi32(INT32_C(-1351086746), INT32_C(-1617825510), INT32_C(  -53781400), INT32_C( -324253949),
                            INT32_C(  277157108), INT32_C(-1362182408), INT32_C( -600988389), INT32_C(-1661173616),
                            INT32_C(  988661733), INT32_C(-1651241157), INT32_C(  751941929), INT32_C(  -37019801),
                            INT32_C(  498171562), INT32_C( 2017003975), INT32_C(-1441476496), INT32_C(-1365008121)),
      simde_mm512_set_epi32(INT32_C(-2082924696), INT32_C( -649416979), INT32_C( -291680665), INT32_C( 1177485782),
                            INT32_C(-1651241157), INT32_C( 1144876369), INT32_C(  207483507), INT32_C( -649416979),
                            INT32_C(  498171562), INT32_C( -649416979), INT32_C(-1229665005), INT32_C(-2082924696),
                            INT32_C( 2112788110), INT32_C(-1661173616), INT32_C( -649416979), INT32_C(-1651241157)) },
    { simde_mm512_set_epi32(INT32_C(-2111484726), INT32_C(-1666865657), INT32_C(  905297213), INT32_C(  873020550),
                            INT32_C(-1639789891), INT32_C(  587061870), INT32_C(-2122729525), INT32_C( 1912650916),
                            INT32_C(  -12276084), INT32_C(-1060302964), INT32_C(  650767651), INT32_C( -997283137),
                            INT32_C( 2144598253), INT32_C(  298450302), INT32_C( 1083198112), INT32_C( -506043419)),
      simde_mm512_set_epi32(INT32_C( -134982351), INT32_C(-1321868808), INT32_C( -899996596), INT32_C(-1289649119),
                            INT32_C( -206201920), INT32_C( 1680053368), INT32_C(-1305508907), INT32_C(-2067500681),
                            INT32_C(-1529397706), INT32_C( 1803067419), INT32_C( 1059939268), INT32_C(  399509097),
                            INT32_C( -338549599), INT32_C(  -31125095), INT32_C(-1633544688), INT32_C(-1398964227)),
      simde_mm512_set_epi32(INT32_C(-1660298113), INT32_C(   39258193), INT32_C( 1764960191), INT32_C( 1032976421),
                            INT32_C(-1057643771), INT32_C( 2071456034), INT32_C(-1085712390), INT32_C( 1506090338),
                            INT32_C(  367006319), INT32_C(-1863539807), INT32_C(-1111523249), INT32_C( 2019983201),
                            INT32_C(  566503151), INT32_C(  503973368), INT32_C(  315043487), INT32_C(  230467816)),
      simde_mm512_set_epi32(INT32_C(  315043487), INT32_C( 1506090338), INT32_C(  873020550), INT32_C( 1083198112),
                            INT32_C( -506043419), INT32_C( 1506090338), INT32_C(-1111523249), INT32_C(  367006319),
                            INT32_C(-1863539807), INT32_C(-1057643771), INT32_C( -997283137), INT32_C(-2122729525),
                            INT32_C( 1083198112), INT32_C(-1085712390), INT32_C(  230467816), INT32_C( 1764960191)) },
    { simde_mm512_set_epi32(INT32_C(  506925802), INT32_C(  939863413), INT32_C(  -95691606), INT32_C(  -63021650),
                            INT32_C( 1460121332), INT32_C(-1770546120), INT32_C(  691111167), INT32_C( 1916845809),
                            INT32_C( -722416713), INT32_C( 1952309936), INT32_C( -635326036), INT32_C(-2071561697),
                            INT32_C(-1349311592), INT32_C(-1434371918), INT32_C( -908787181), INT32_C( 1027111311)),
      simde_mm512_set_epi32(INT32_C( -476274551), INT32_C(-1268946349), INT32_C( 1871428230), INT32_C( 1084413756),
                            INT32_C( 1221272409), INT32_C( 1604619894), INT32_C(  245162423), INT32_C( -879398063),
                            INT32_C(-1252847595), INT32_C(-1083417294), INT32_C(  -85733631), INT32_C( -568206760),
                            INT32_C( -433087356), INT32_C(  591211590), INT32_C(  216351398), INT32_C(  907563034)),
      simde_mm512_set_epi32(INT32_C(  553126451), INT32_C( 1865131028), INT32_C( -563146647), INT32_C( 1055479165),
                            INT32_C(-2116199302), INT32_C(  548546839), INT32_C(-1021995369), INT32_C(-1397392070),
                            INT32_C( 1911717085), INT32_C(-1893150233), INT32_C(-1174808283), INT32_C( 1158232544),
                            INT32_C( -280806326), INT32_C(  520223268), INT32_C(  603498036), INT32_C(  115278412)),
      simde_mm512_set_epi32(INT32_C(  691111167), INT32_C( -280806326), INT32_C( 1952309936), INT32_C( 1055479165),
                            INT32_C(-1021995369), INT32_C(-1893150233), INT32_C( 1911717085), INT32_C(  603498036),
                            INT32_C(-1174808283), INT32_C(  520223268), INT32_C( -908787181), INT32_C(-1397392070),
                            INT32_C(-2071561697), INT32_C( 1952309936), INT32_C( 1952309936), INT32_C(  548546839)) },
    { simde_mm512_set_epi32(INT32_C( -195854029), INT32_C( 1958024187), INT32_C( 1003184214), INT32_C( 1306010047),
                            INT32_C(-1204461456), INT32_C(-1689382831), INT32_C(-1474151310), INT32_C( 1613100007),
                            INT32_C( 1060086708), INT32_C(-1444530803), INT32_C( 1862849170), INT32_C( -928808218),
                            INT32_C( -146523132), INT32_C(-1235988391), INT32_C( -964779679), INT32_C(   57349444)),
      simde_mm512_set_epi32(INT32_C(-2134067081), INT32_C( -882392805), INT32_C(  185789257), INT32_C(-2111603035),
                            INT32_C(  407162836), INT32_C(-1236510605), INT32_C(-1567423785), INT32_C(  780522762),
                            INT32_C(  -23120724), INT32_C(   92199108), INT32_C(   24805933), INT32_C( 1301060633),
                            INT32_C(-1139480237), INT32_C(  217822558), INT32_C(-1429367443), INT32_C(  465891853)),
      simde_mm512_set_epi32(INT32_C(  158027570), INT32_C(-1346235067), INT32_C( 1682432767), INT32_C( 1810962335),
                            INT32_C( 1067516501), INT32_C(-1082135268), INT32_C(  -56869560), INT32_C(-1195320775),
                            INT32_C( -393383799), INT32_C( -554410804), INT32_C( 1644924567), INT32_C(-1134386712),
                            INT32_C(-1030153866), INT32_C(  436830495), INT32_C(-1226346340), INT32_C( -700345341)),
      simde_mm512_set_epi32(INT32_C( -393383799), INT32_C( 1067516501), INT32_C(-1474151310), INT32_C( 1862849170),
                            INT32_C(-1134386712), INT32_C(-1030153866), INT32_C( -393383799), INT32_C(-1689382831),
                            INT32_C( 1306010047), INT32_C( -928808218), INT32_C( 1003184214), INT32_C(  -56869560),
                            INT32_C(-1030153866), INT32_C(-1346235067), INT32_C( 1003184214), INT32_C( 1003184214)) },
    { simde_mm512_set_epi32(INT32_C( -756862268), INT32_C( 1500443430), INT32_C(  463718589), INT32_C(  262081082),
                            INT32_C(  990406393), INT32_C(  114071142), INT32_C(-1625480036), INT32_C( -478582396),
                            INT32_C( -548991920), INT32_C( 1883825214), INT32_C(  -16488776), INT32_C( -956015081),
                            INT32_C(-1165588144), INT32_C( -540410051), INT32_C(  285110286), INT32_C( 1179668936)),
      simde_mm512_set_epi32(INT32_C(  947326740), INT32_C( 1951776493), INT32_C( 1846700305), INT32_C(-1461724216),
                            INT32_C(  885687075), INT32_C(-2137900171), INT32_C( -224346810), INT32_C( -527126852),
                            INT32_C( 1999299634), INT32_C( -946177834), INT32_C(  996138255), INT32_C(  230639176),
                            INT32_C(  644992332), INT32_C(  587140266), INT32_C(-1686393253), INT32_C(  834603009)),
      simde_mm512_set_epi32(INT32_C( -565016612), INT32_C(-1511643506), INT32_C(-1182806527), INT32_C( 2039339451),
                            INT32_C( 1136224105), INT32_C(-1359466004), INT32_C( -867898302), INT32_C( 1835028244),
                            INT32_C(  225198660), INT32_C(-1493291743), INT32_C( 1406350672), INT32_C(  420428866),
                            INT32_C( -890727392), INT32_C(  555626838), INT32_C(  641882471), INT32_C(-1439329545)),
      simde_mm512_set_epi32(INT32_C(  420428866), INT32_C(  463718589), INT32_C(  641882471), INT32_C( -478582396),
                            INT32_C(-1165588144), INT32_C( 1406350672), INT32_C( 1883825214), INT32_C( 2039339451),
                            INT32_C(  555626838), INT32_C(-1493291743), INT32_C( -756862268), INT32_C( -478582396),
                            INT32_C(  262081082), INT32_C(  114071142), INT32_C( 1136224105), INT32_C(  285110286)) },
    { simde_mm512_set_epi32(INT32_C(-1531947751), INT32_C( -721959716), INT32_C(  537876613), INT32_C( 2069004024),
                            INT32_C(-1968092173), INT32_C(  857387582), INT32_C(-1694386201), INT32_C(   75306944),
                            INT32_C(-1259042358), INT32_C(  909781307), INT32_C( 1903022709), INT32_C( 1362794737),
                            INT32_C(-1814837932), INT32_C( -304499521), INT32_C(-1173731613), INT32_C(-1043888074)),
      simde_mm512_set_epi32(INT32_C( 1190479058), INT32_C(  648305778), INT32_C(-2081630262), INT32_C(  656381823),
                            INT32_C(-1582102069), INT32_C( 1943788808), INT32_C(  -48840894), INT32_C( 1268696790),
                            INT32_C(  678074994), INT32_C(-1453607052), INT32_C( 1809911494), INT32_C( -679308165),
                            INT32_C( 1323625235), INT32_C( -182774520), INT32_C(-1281289570), INT32_C(-1278212722)),
      simde_mm512_set_epi32(INT32_C( -829128497), INT32_C(  553616479), INT32_C( 2081281560), INT32_C( 1621929085),
                            INT32_C(  502983658), INT32_C( -152394738), INT32_C(-1678301674), INT32_C( 1357386696),
                            INT32_C(-1943547354), INT32_C(  -79733129), INT32_C(-2108182551), INT32_C( -331487526),
                            INT32_C( -808116279), INT32_C( -531514769), INT32_C(  375648558), INT32_C(-1499104175)),
      simde_mm512_set_epi32(INT32_C( -531514769), INT32_C( -531514769), INT32_C(  857387582), INT32_C( -829128497),
                            INT32_C(-1968092173), INT32_C(   75306944), INT32_C( -304499521), INT32_C(  -79733129),
                            INT32_C( -531514769), INT32_C( -331487526), INT32_C(  909781307), INT32_C(  502983658),
                            INT32_C( -808116279), INT32_C(   75306944), INT32_C(  553616479), INT32_C( -721959716)) },
    { simde_mm512_set_epi32(INT32_C( -868402874), INT32_C( 1365551587), INT32_C( -286078647), INT32_C(  535680374),
                            INT32_C( -347356302), INT32_C(  423616503), INT32_C( 2101835176), INT32_C(  135041412),
                            INT32_C(-1857111698), INT32_C( 1860240848), INT32_C(  582285428), INT32_C(-1871232648),
                            INT32_C(-1985705707), INT32_C(  949080599), INT32_C( 1320997888), INT32_C( 1175065355)),
      simde_mm512_set_epi32(INT32_C( 1519347951), INT32_C( 1690235053), INT32_C(  992814047), INT32_C(-2023351849),
                            INT32_C( -939539212), INT32_C(  -83602250), INT32_C( 1391682826), INT32_C( 2110848055),
                            INT32_C( 1264988325), INT32_C(   82278637), INT32_C(-2138890389), INT32_C(-1738286108),
                            INT32_C(  841364839), INT32_C(-1629840866), INT32_C( -232831502), INT32_C( 1761703668)),
      simde_mm512_set_epi32(INT32_C(  511852650), INT32_C( 1504302381), INT32_C( -226523906), INT32_C(-1237330962),
                            INT32_C( 1280120077), INT32_C(  865002127), INT32_C( -203493997), INT32_C(  956618200),
                            INT32_C(   33546873), INT32_C( -965377912), INT32_C( 1970918143), INT32_C(  528719680),
                            INT32_C(   12592404), INT32_C( 1306075002), INT32_C(-2040787420), INT32_C(-1677403893)),
      simde_mm512_set_epi32(INT32_C( -868402874), INT32_C( -286078647), INT32_C(  511852650), INT32_C(   33546873),
                            INT32_C(  528719680), INT32_C( -965377912), INT32_C(  423616503), INT32_C(   33546873),
                            INT32_C(  582285428), INT32_C( -286078647), INT32_C( -347356302), INT32_C(-1871232648),
                            INT32_C(-1857111698), INT32_C( 1504302381), INT32_C( 1306075002), INT32_C(  528719680)) },
  };

  for (size_t i = 0 ; i < (sizeof(test_vec) / sizeof(test_vec[0])); i++) {
    simde__m512i r = simde_mm512_permutex2var_epi32(test_vec[i].a, test_vec[i].idx, test_vec[i].b);
    simde_assert_m512i_i32(r, ==, test_vec[i].r);
  }

  return 0;
}

static int
test_simde_mm512_mask_permutex2var_epi32(SIMDE_MUNIT_TEST_ARGS) {
  const struct {
    simde__m512i a;
    simde__mmask16 k;
    simde__m512i idx;
    simde__m512i b;
    simde__m512i r;
  } test_vec[8] = {
    { simde_mm512_set_epi32(INT32_C(-1026363374), INT32_C(-1801776439), INT32_C(  145438126), INT32_C(-1306064352),
                            INT32_C( -858736392), INT32_C(  923442479), INT32_C( 1092805562), INT32_C( 1443901717),
                            INT32_C( 1848749100), INT32_C( 1777333881), INT32_C( 1570116932), INT32_C(-1302383354),
                            INT32_C( 1993455974), INT32_C(-2068684593), INT32_C(-1936012201), INT32_C( 1856459607)),
      UINT16_C(27455),
      simde_mm512_set_epi32(INT32_C(-1110068455), INT32_C( -207240031), INT32_C(-1649179267), INT32_C( 2054398444),
                            INT32_C( -483586503), INT32_C(-1481960002), INT32_C(  861125508), INT32_C( -330381203),
                            INT32_C(-1999224530), INT32_C( 1042470181), INT32_C( 1827473477), INT32_C(  298546792),
                            INT32_C(-1630396605), INT32_C( 1545554432), INT32_C(  344023940), INT32_C(-1871515754)),
      simde_mm512_set_epi32(INT32_C( 1711460779), INT32_C( -919570191), INT32_C( 1974152373), INT32_C( -695949043),
                            INT32_C( -790242624), INT32_C(-1094331335), INT32_C(-1166320093), INT32_C(-2045280751),
                            INT32_C(-2037261521), INT32_C(  223952317), INT32_C(  282198336), INT32_C(  564965997),
                            INT32_C(  169645898), INT32_C(-1539616610), INT32_C( 1134735685), INT32_C( 1430356381)),
      simde_mm512_set_epi32(INT32_C(-1026363374), INT32_C(-1936012201), INT32_C( 1974152373), INT32_C(-1306064352),
                            INT32_C(-1166320093), INT32_C(  923442479), INT32_C(-1302383354), INT32_C(  145438126),
                            INT32_C( 1848749100), INT32_C( 1777333881), INT32_C( 1570116932), INT32_C( 1443901717),
                            INT32_C( 1993455974), INT32_C( 1856459607), INT32_C(-1302383354), INT32_C(  223952317)) },
    { simde_mm512_set_epi32(INT32_C(-1423023772), INT32_C(-1185448755), INT32_C( 1549802795), INT32_C(  159583350),
                            INT32_C(  548883180), INT32_C( -605945909), INT32_C(-2063050181), INT32_C( 1095467003),
                            INT32_C(-2083755741), INT32_C( 2066979701), INT32_C( 1094609712), INT32_C( 1345059025),
                            INT32_C( -340318359), INT32_C( 1519671047), INT32_C(-1017461983), INT32_C(  353198331)),
      UINT16_C( 8253),
      simde_mm512_set_epi32(INT32_C( -888441293), INT32_C( -707551350), INT32_C(  513515868), INT32_C(-1825967755),
                            INT32_C(  822222164), INT32_C(-1689559027), INT32_C(  533478787), INT32_C(  907615417),
                            INT32_C( -199229058), INT32_C(  -91537812), INT32_C( 1375258232), INT32_C(  139748399),
                            INT32_C( 1688468565), INT32_C(  736544549), INT32_C(-1282057552), INT32_C(  795925067)),
      simde_mm512_set_epi32(INT32_C( 1701079465), INT32_C( -195770682), INT32_C(  503748315), INT32_C( 1469355417),
                            INT32_C(-1849349632), INT32_C( 1962664621), INT32_C( -646247370), INT32_C( 1258747662),
                            INT32_C( 1838830023), INT32_C( -532007659), INT32_C( -622852205), INT32_C( -839037220),
                            INT32_C(  499633910), INT32_C( -260167255), INT32_C(  884163960), INT32_C( -329275629)),
      simde_mm512_set_epi32(INT32_C(-1423023772), INT32_C(-1185448755), INT32_C( 1469355417), INT32_C(  159583350),
                            INT32_C(  548883180), INT32_C( -605945909), INT32_C(-2063050181), INT32_C( 1095467003),
                            INT32_C(-2083755741), INT32_C( 2066979701), INT32_C( 1258747662), INT32_C(-1423023772),
                            INT32_C( -622852205), INT32_C( 1094609712), INT32_C(-1017461983), INT32_C(  548883180)) },
    { simde_mm512_set_epi32(INT32_C( -174985661), INT32_C(-1762469023), INT32_C( 1239606494), INT32_C(  -22119232),
                            INT32_C( 1216907749), INT32_C(  654527510), INT32_C(-2043358500), INT32_C(  459072440),
                            INT32_C( -430427651), INT32_C( -272088075), INT32_C(  386072301), INT32_C(-1628984154),
                            INT32_C(   87817524), INT32_C( 1219490517), INT32_C(-1569831145), INT32_C(  338985942)),
      UINT16_C(47186),
      simde_mm512_set_epi32(INT32_C(  730787370), INT32_C(-2034110695), INT32_C(-1088138491), INT32_C( -353174912),
                            INT32_C( -362301616), INT32_C(  617951303), INT32_C(  817116152), INT32_C(-1034835761),
                            INT32_C( -102069057), INT32_C( 1774242298), INT32_C( 1089620040), INT32_C(-1101477862),
                            INT32_C( 2001101785), INT32_C(-1759250988), INT32_C( -606254738), INT32_C( 1526367108)),
      simde_mm512_set_epi32(INT32_C(  204417556), INT32_C(-1329665093), INT32_C(-2039025377), INT32_C( 1639231015),
                            INT32_C( 1541217841), INT32_C( 1692413538), INT32_C(  738521275), INT32_C(  159429100),
                            INT32_C(  451955897), INT32_C(  181201098), INT32_C(  450627934), INT32_C( 2082954477),
                            INT32_C( 1254960767), INT32_C( 1995459397), INT32_C(  -11572946), INT32_C(-1087388220)),
      simde_mm512_set_epi32(INT32_C(  654527510), INT32_C(-1762469023), INT32_C(  386072301), INT32_C(  338985942),
                            INT32_C(-1087388220), INT32_C(  654527510), INT32_C(-2043358500), INT32_C(  459072440),
                            INT32_C( -430427651), INT32_C( 1692413538), INT32_C(  386072301), INT32_C( 1692413538),
                            INT32_C(   87817524), INT32_C( 1219490517), INT32_C(-1762469023), INT32_C(  338985942)) },
    { simde_mm512_set_epi32(INT32_C( 1928049651), INT32_C(  765730488), INT32_C(  -85899231), INT32_C( 1435935141),
                            INT32_C(-2098236580), INT32_C(-1991433794), INT32_C( 1298943776), INT32_C(  277470244),
                            INT32_C(-1834748849), INT32_C(  596054477), INT32_C( 1827419510), INT32_C(-1010527612),
                            INT32_C(-1687118128), INT32_C(  107945377), INT32_C( 1174128677), INT32_C(-1544325740)),
      UINT16_C(47807),
      simde_mm512_set_epi32(INT32_C( 1463729035), INT32_C( 2031968571), INT32_C(  333434400), INT32_C( -637142874),
                            INT32_C( -520435756), INT32_C( -148623413), INT32_C( -692754616), INT32_C(-1908406411),
                            INT32_C( 1391053429), INT32_C( 1767908668), INT32_C( 1117151413), INT32_C( 1466854108),
                            INT32_C( -852914371), INT32_C( -773785464), INT32_C(-2142007253), INT32_C(  466013192)),
      simde_mm512_set_epi32(INT32_C( -811849174), INT32_C(-1510825074), INT32_C( 1897985966), INT32_C( 1445172644),
                            INT32_C( -193622280), INT32_C( 2097959091), INT32_C( -652080500), INT32_C( 1943026961),
                            INT32_C(  763848022), INT32_C(-2124387583), INT32_C(-1102663841), INT32_C(  712044568),
                            INT32_C( 1641785760), INT32_C( 1696516135), INT32_C(-1123374630), INT32_C( -181070601)),
      simde_mm512_set_epi32(INT32_C(-2098236580), INT32_C(  765730488), INT32_C(-1544325740), INT32_C(  596054477),
                            INT32_C(  712044568), INT32_C(-1991433794), INT32_C(  277470244), INT32_C(  277470244),
                            INT32_C(-1102663841), INT32_C(  596054477), INT32_C(-1102663841), INT32_C( 1445172644),
                            INT32_C( 1897985966), INT32_C(  277470244), INT32_C(-2098236580), INT32_C(  277470244)) },
    { simde_mm512_set_epi32(INT32_C(  729621709), INT32_C(-1241407128), INT32_C(  696721321), INT32_C( -603523965),
                            INT32_C( 1730687689), INT32_C(  290786615), INT32_C(-1827031380), INT32_C( 1429317129),
                            INT32_C(-1800615955), INT32_C( -728999228), INT32_C( -788606428), INT32_C( -539592973),
                            INT32_C(-1402526875), INT32_C(   -8263463), INT32_C(  478788156), INT32_C(  842200487)),
      UINT16_C(43569),
      simde_mm512_set_epi32(INT32_C(-1668086905), INT32_C( -770469750), INT32_C( 1013231130), INT32_C(  543156562),
                            INT32_C( -399740514), INT32_C(  509655415), INT32_C( -160537509), INT32_C( -549528402),
                            INT32_C( -323547130), INT32_C(-1395624565), INT32_C(-1905505546), INT32_C(-1268587914),
                            INT32_C( 1939823644), INT32_C(-1112752789), INT32_C( 2052878307), INT32_C( -856056848)),
      simde_mm512_set_epi32(INT32_C( 1969107101), INT32_C(-2063427243), INT32_C( -670405092), INT32_C(-1879729053),
                            INT32_C( 1035482990), INT32_C( 1183910939), INT32_C( 1515345934), INT32_C(-1884003639),
                            INT32_C( -638430290), INT32_C(-2007622482), INT32_C(  171336877), INT32_C(   59553613),
                            INT32_C(  165266600), INT32_C( -798384264), INT32_C( 1607584815), INT32_C(-1324336584)),
      simde_mm512_set_epi32(INT32_C(-1800615955), INT32_C(-1241407128), INT32_C( 1183910939), INT32_C( -603523965),
                            INT32_C(-2063427243), INT32_C(  290786615), INT32_C( 1035482990), INT32_C( 1429317129),
                            INT32_C(-1800615955), INT32_C( -728999228), INT32_C(-2007622482), INT32_C(-2007622482),
                            INT32_C(-1402526875), INT32_C(   -8263463), INT32_C(  478788156), INT32_C(-1324336584)) },
    { simde_mm512_set_epi32(INT32_C(-1349190316), INT32_C(-1403674818), INT32_C( -521443925), INT32_C(-1464291783),
                            INT32_C(-1686112999), INT32_C(-1290233716), INT32_C( -364563113), INT32_C( 1520783126),
                            INT32_C( -207159885), INT32_C( -104006691), INT32_C(  362759403), INT32_C(-1562242573),
                            INT32_C( -397133039), INT32_C(  568974515), INT32_C(-1726442446), INT32_C(-2134949944)),
      UINT16_C(54613),
      simde_mm512_set_epi32(INT32_C(-1929379353), INT32_C( -560036292), INT32_C(-1693642327), INT32_C(-1383827159),
                            INT32_C( 1804875719), INT32_C( 1179452315), INT32_C(-1509656190), INT32_C(-1409992701),
                            INT32_C(-1830359468), INT32_C(  635753031), INT32_C(  310246197), INT32_C(-1783943034),
                            INT32_C(-1307643183), INT32_C( -144888334), INT32_C(  621611179), INT32_C(  743650285)),
      simde_mm512_set_epi32(INT32_C(-2094713086), INT32_C(  197529411), INT32_C( 1055036471), INT32_C(  351897115),
                            INT32_C( 1594003471), INT32_C(-1709813294), INT32_C( -133653364), INT32_C(  -51462036),
                            INT32_C(   46796230), INT32_C(  989301899), INT32_C( -691937914), INT32_C( 1667629581),
                            INT32_C( -496700661), INT32_C(-1318801755), INT32_C( 1076515270), INT32_C(-1757573505)),
      simde_mm512_set_epi32(INT32_C( -207159885), INT32_C(  351897115), INT32_C( -521443925), INT32_C( -364563113),
                            INT32_C(-1686112999), INT32_C( 1594003471), INT32_C( -364563113), INT32_C( -397133039),
                            INT32_C( -207159885), INT32_C( -207159885), INT32_C(  362759403), INT32_C( -104006691),
                            INT32_C( -397133039), INT32_C(-1318801755), INT32_C(-1726442446), INT32_C( -521443925)) },
    { simde_mm512_set_epi32(INT32_C( -662725541), INT32_C(  790228415), INT32_C(  -26753919), INT32_C( -495897274),
                            INT32_C( 1526994051), INT32_C( 1569343894), INT32_C(-1059990980), INT32_C( -490626870),
                            INT32_C( 1463745126), INT32_C( -957352131), INT32_C( 1122208393), INT32_C(-1814919780),
                            INT32_C(-1891682702), INT32_C( -176064246), INT32_C(-1293286075), INT32_C(-1398303881)),
      UINT16_C(12582),
      simde_mm512_set_epi32(INT32_C(-1664789378), INT32_C( -204514420), INT32_C( 1112369408), INT32_C( 2113109396),
                            INT32_C(-1679339682), INT32_C( 2128430529), INT32_C(-1262713143), INT32_C( 1026756660),
                            INT32_C(-1268083621), INT32_C(  337660693), INT32_C( 1524090799), INT32_C( -275653210),
                            INT32_C(-1422519849), INT32_C( -495051500), INT32_C( 1851182812), INT32_C(    5027269)),
      simde_mm512_set_epi32(INT32_C( -501257427), INT32_C(-1329431510), INT32_C( 1005777948), INT32_C(  616430734),
                            INT32_C( 1581162255), INT32_C( 1497456456), INT32_C(-1170808415), INT32_C(-1014503666),
                            INT32_C(-1157750165), INT32_C( 1691363299), INT32_C( 1100655145), INT32_C(  673265711),
                            INT32_C( 1544659928), INT32_C(-1956803094), INT32_C( 1970109422), INT32_C(-1197844366)),
      simde_mm512_set_epi32(INT32_C( -662725541), INT32_C(  790228415), INT32_C(-1398303881), INT32_C(  673265711),
                            INT32_C( 1526994051), INT32_C( 1569343894), INT32_C(-1059990980), INT32_C(  673265711),
                            INT32_C( 1463745126), INT32_C( -957352131), INT32_C( -662725541), INT32_C(-1814919780),
                            INT32_C(-1891682702), INT32_C(  673265711), INT32_C(  616430734), INT32_C(-1398303881)) },
    { simde_mm512_set_epi32(INT32_C(-1875196295), INT32_C( -129416454), INT32_C(  246939492), INT32_C(-1135915662),
                            INT32_C( -539014135), INT32_C( 1554320066), INT32_C( 1611314079), INT32_C(-1013292897),
                            INT32_C( 1135188428), INT32_C(-1903831246), INT32_C( 1207366326), INT32_C( -366505666),
                            INT32_C( 1379479886), INT32_C( 1577255779), INT32_C( -488475560), INT32_C(  143370041)),
      UINT16_C(29031),
      simde_mm512_set_epi32(INT32_C(   -7690721), INT32_C( -632623581), INT32_C(  612963145), INT32_C( 1824881051),
                            INT32_C(  582494706), INT32_C(-1899955415), INT32_C(  618457733), INT32_C( 1216635147),
                            INT32_C( 1404062051), INT32_C( 1905825928), INT32_C(-1635796069), INT32_C(  528096299),
                            INT32_C(  259240399), INT32_C(  271372102), INT32_C( 1305969598), INT32_C(  974818283)),
      simde_mm512_set_epi32(INT32_C( -675362282), INT32_C(-1218762696), INT32_C(-1400182216), INT32_C(-2088680370),
                            INT32_C(-1895497877), INT32_C( 1563893931), INT32_C( 1105770515), INT32_C(-1745770541),
                            INT32_C(-1255255240), INT32_C( 1238532704), INT32_C(  995946229), INT32_C(  119517601),
                            INT32_C( 1389614040), INT32_C(-2032996348), INT32_C( 1996749952), INT32_C(  450477794)),
      simde_mm512_set_epi32(INT32_C(-1875196295), INT32_C( 1379479886), INT32_C( 1611314079), INT32_C(-1895497877),
                            INT32_C( -539014135), INT32_C( 1554320066), INT32_C( 1611314079), INT32_C( -539014135),
                            INT32_C( 1135188428), INT32_C(-1013292897), INT32_C(-1895497877), INT32_C( -366505666),
                            INT32_C( 1379479886), INT32_C(-1903831246), INT32_C(-1218762696), INT32_C( -539014135)) },
  };

  for (size_t i = 0 ; i < (sizeof(test_vec) / sizeof(test_vec[0])); i++) {
    simde__m512i r = simde_mm512_mask_permutex2var_epi32(test_vec[i].a, test_vec[i].k, test_vec[i].idx, test_vec[i].b);
    simde_assert_m512i_i32(r, ==, test_vec[i].r);
  }

  return 0;
}

static int
test_simde_mm512_mask2_permutex2var_epi32(SIMDE_MUNIT_TEST_ARGS) {
  const struct {
    simde__m512i a;
    simde__m512i idx;
    simde__mmask16 k;
    simde__m512i b;
    simde__m512i r;
  } test_vec[8] = {
    { simde_mm512_set_epi32(INT32_C(-1026363374), INT32_C(-1801776439), INT32_C(  145438126), INT32_C(-1306064352),
                            INT32_C( -858736392), INT32_C(  923442479), INT32_C( 1092805562), INT32_C( 1443901717),
                            INT32_C( 1848749100), INT32_C( 1777333881), INT32_C( 1570116932), INT32_C(-1302383354),
                            INT32_C( 1993455974), INT32_C(-2068684593), INT32_C(-1936012201), INT32_C( 1856459607)),
      simde_mm512_set_epi32(INT32_C( -207240031), INT32_C(-1649179267), INT32_C( 2054398444), INT32_C( -483586503),
                            INT32_C(-1481960002), INT32_C(  861125508), INT32_C( -330381203), INT32_C(-1999224530),
                            INT32_C( 1042470181), INT32_C( 1827473477), INT32_C(  298546792), INT32_C(-1630396605),
                            INT32_C( 1545554432), INT32_C(  344023940), INT32_C(-1871515754), INT32_C(  951544639)),
      UINT16_C(45849),
      simde_mm512_set_epi32(INT32_C( 1711460779), INT32_C( -919570191), INT32_C( 1974152373), INT32_C( -695949043),
                            INT32_C( -790242624), INT32_C(-1094331335), INT32_C(-1166320093), INT32_C(-2045280751),
                            INT32_C(-2037261521), INT32_C(  223952317), INT32_C(  282198336), INT32_C(  564965997),
                            INT32_C(  169645898), INT32_C(-1539616610), INT32_C( 1134735685), INT32_C( 1430356381)),
      simde_mm512_set_epi32(INT32_C(-1936012201), INT32_C(-1649179267), INT32_C(-1306064352), INT32_C(-1166320093),
                            INT32_C(-1481960002), INT32_C(  861125508), INT32_C(  145438126), INT32_C(-1801776439),
                            INT32_C( 1042470181), INT32_C( 1827473477), INT32_C(  298546792), INT32_C( 1993455974),
                            INT32_C( 1856459607), INT32_C(  344023940), INT32_C(-1871515754), INT32_C( 1711460779)) },
    { simde_mm512_set_epi32(INT32_C(-1423023772), INT32_C(-1185448755), INT32_C( 1549802795), INT32_C(  159583350),
                            INT32_C(  548883180), INT32_C( -605945909), INT32_C(-2063050181), INT32_C( 1095467003),
                            INT32_C(-2083755741), INT32_C( 2066979701), INT32_C( 1094609712), INT32_C( 1345059025),
                            INT32_C( -340318359), INT32_C( 1519671047), INT32_C(-1017461983), INT32_C(  353198331)),
      simde_mm512_set_epi32(INT32_C( -707551350), INT32_C(  513515868), INT32_C(-1825967755), INT32_C(  822222164),
                            INT32_C(-1689559027), INT32_C(  533478787), INT32_C(  907615417), INT32_C( -199229058),
                            INT32_C(  -91537812), INT32_C( 1375258232), INT32_C(  139748399), INT32_C( 1688468565),
                            INT32_C(  736544549), INT32_C(-1282057552), INT32_C(  795925067), INT32_C( 1720852541)),
      UINT16_C(30259),
      simde_mm512_set_epi32(INT32_C( 1701079465), INT32_C( -195770682), INT32_C(  503748315), INT32_C( 1469355417),
                            INT32_C(-1849349632), INT32_C( 1962664621), INT32_C( -646247370), INT32_C( 1258747662),
                            INT32_C( 1838830023), INT32_C( -532007659), INT32_C( -622852205), INT32_C( -839037220),
                            INT32_C(  499633910), INT32_C( -260167255), INT32_C(  884163960), INT32_C( -329275629)),
      simde_mm512_set_epi32(INT32_C( -707551350), INT32_C( 1469355417), INT32_C( -622852205), INT32_C( -839037220),
                            INT32_C(-1689559027), INT32_C( -340318359), INT32_C( -646247370), INT32_C( -199229058),
                            INT32_C(  -91537812), INT32_C( 1375258232), INT32_C(-1423023772), INT32_C( -622852205),
                            INT32_C(  736544549), INT32_C(-1282057552), INT32_C(  548883180), INT32_C(  503748315)) },
    { simde_mm512_set_epi32(INT32_C( -174985661), INT32_C(-1762469023), INT32_C( 1239606494), INT32_C(  -22119232),
                            INT32_C( 1216907749), INT32_C(  654527510), INT32_C(-2043358500), INT32_C(  459072440),
                            INT32_C( -430427651), INT32_C( -272088075), INT32_C(  386072301), INT32_C(-1628984154),
                            INT32_C(   87817524), INT32_C( 1219490517), INT32_C(-1569831145), INT32_C(  338985942)),
      simde_mm512_set_epi32(INT32_C(-2034110695), INT32_C(-1088138491), INT32_C( -353174912), INT32_C( -362301616),
                            INT32_C(  617951303), INT32_C(  817116152), INT32_C(-1034835761), INT32_C( -102069057),
                            INT32_C( 1774242298), INT32_C( 1089620040), INT32_C(-1101477862), INT32_C( 2001101785),
                            INT32_C(-1759250988), INT32_C( -606254738), INT32_C( 1526367108), INT32_C(  722122834)),
      UINT16_C(60970),
      simde_mm512_set_epi32(INT32_C(  204417556), INT32_C(-1329665093), INT32_C(-2039025377), INT32_C( 1639231015),
                            INT32_C( 1541217841), INT32_C( 1692413538), INT32_C(  738521275), INT32_C(  159429100),
                            INT32_C(  451955897), INT32_C(  181201098), INT32_C(  450627934), INT32_C( 2082954477),
                            INT32_C( 1254960767), INT32_C( 1995459397), INT32_C(  -11572946), INT32_C(-1087388220)),
      simde_mm512_set_epi32(INT32_C(  738521275), INT32_C(  386072301), INT32_C(  338985942), INT32_C( -362301616),
                            INT32_C( -430427651), INT32_C(  159429100), INT32_C( -174985661), INT32_C( -102069057),
                            INT32_C( 1774242298), INT32_C( 1089620040), INT32_C( 1692413538), INT32_C( 2001101785),
                            INT32_C( 2082954477), INT32_C( -606254738), INT32_C(-1628984154), INT32_C(  722122834)) },
    { simde_mm512_set_epi32(INT32_C( 1928049651), INT32_C(  765730488), INT32_C(  -85899231), INT32_C( 1435935141),
                            INT32_C(-2098236580), INT32_C(-1991433794), INT32_C( 1298943776), INT32_C(  277470244),
                            INT32_C(-1834748849), INT32_C(  596054477), INT32_C( 1827419510), INT32_C(-1010527612),
                            INT32_C(-1687118128), INT32_C(  107945377), INT32_C( 1174128677), INT32_C(-1544325740)),
      simde_mm512_set_epi32(INT32_C( 2031968571), INT32_C(  333434400), INT32_C( -637142874), INT32_C( -520435756),
                            INT32_C( -148623413), INT32_C( -692754616), INT32_C(-1908406411), INT32_C( 1391053429),
                            INT32_C( 1767908668), INT32_C( 1117151413), INT32_C( 1466854108), INT32_C( -852914371),
                            INT32_C( -773785464), INT32_C(-2142007253), INT32_C(  466013192), INT32_C( 1313258175)),
      UINT16_C(48011),
      simde_mm512_set_epi32(INT32_C( -811849174), INT32_C(-1510825074), INT32_C( 1897985966), INT32_C( 1445172644),
                            INT32_C( -193622280), INT32_C( 2097959091), INT32_C( -652080500), INT32_C( 1943026961),
                            INT32_C(  763848022), INT32_C(-2124387583), INT32_C(-1102663841), INT32_C(  712044568),
                            INT32_C( 1641785760), INT32_C( 1696516135), INT32_C(-1123374630), INT32_C( -181070601)),
      simde_mm512_set_epi32(INT32_C( -193622280), INT32_C(  333434400), INT32_C(  596054477), INT32_C(  712044568),
                            INT32_C(-2098236580), INT32_C( -692754616), INT32_C(-1102663841), INT32_C(-1102663841),
                            INT32_C( 1445172644), INT32_C( 1117151413), INT32_C( 1466854108), INT32_C( -852914371),
                            INT32_C(  277470244), INT32_C(-2142007253), INT32_C(  277470244), INT32_C( -811849174)) },
    { simde_mm512_set_epi32(INT32_C(  729621709), INT32_C(-1241407128), INT32_C(  696721321), INT32_C( -603523965),
                            INT32_C( 1730687689), INT32_C(  290786615), INT32_C(-1827031380), INT32_C( 1429317129),
                            INT32_C(-1800615955), INT32_C( -728999228), INT32_C( -788606428), INT32_C( -539592973),
                            INT32_C(-1402526875), INT32_C(   -8263463), INT32_C(  478788156), INT32_C(  842200487)),
      simde_mm512_set_epi32(INT32_C( -770469750), INT32_C( 1013231130), INT32_C(  543156562), INT32_C( -399740514),
                            INT32_C(  509655415), INT32_C( -160537509), INT32_C( -549528402), INT32_C( -323547130),
                            INT32_C(-1395624565), INT32_C(-1905505546), INT32_C(-1268587914), INT32_C( 1939823644),
                            INT32_C(-1112752789), INT32_C( 2052878307), INT32_C( -856056848), INT32_C(-1218860495)),
      UINT16_C(  903),
      simde_mm512_set_epi32(INT32_C( 1969107101), INT32_C(-2063427243), INT32_C( -670405092), INT32_C(-1879729053),
                            INT32_C( 1035482990), INT32_C( 1183910939), INT32_C( 1515345934), INT32_C(-1884003639),
                            INT32_C( -638430290), INT32_C(-2007622482), INT32_C(  171336877), INT32_C(   59553613),
                            INT32_C(  165266600), INT32_C( -798384264), INT32_C( 1607584815), INT32_C(-1324336584)),
      simde_mm512_set_epi32(INT32_C( -770469750), INT32_C( 1013231130), INT32_C(  543156562), INT32_C( -399740514),
                            INT32_C(  509655415), INT32_C( -160537509), INT32_C(-1241407128), INT32_C( -728999228),
                            INT32_C( 1730687689), INT32_C(-1905505546), INT32_C(-1268587914), INT32_C( 1939823644),
                            INT32_C(-1112752789), INT32_C(-1402526875), INT32_C(-1324336584), INT32_C( 1607584815)) },
    { simde_mm512_set_epi32(INT32_C(-1349190316), INT32_C(-1403674818), INT32_C( -521443925), INT32_C(-1464291783),
                            INT32_C(-1686112999), INT32_C(-1290233716), INT32_C( -364563113), INT32_C( 1520783126),
                            INT32_C( -207159885), INT32_C( -104006691), INT32_C(  362759403), INT32_C(-1562242573),
                            INT32_C( -397133039), INT32_C(  568974515), INT32_C(-1726442446), INT32_C(-2134949944)),
      simde_mm512_set_epi32(INT32_C( -560036292), INT32_C(-1693642327), INT32_C(-1383827159), INT32_C( 1804875719),
                            INT32_C( 1179452315), INT32_C(-1509656190), INT32_C(-1409992701), INT32_C(-1830359468),
                            INT32_C(  635753031), INT32_C(  310246197), INT32_C(-1783943034), INT32_C(-1307643183),
                            INT32_C( -144888334), INT32_C(  621611179), INT32_C(  743650285), INT32_C( 1845744981)),
      UINT16_C(  487),
      simde_mm512_set_epi32(INT32_C(-2094713086), INT32_C(  197529411), INT32_C( 1055036471), INT32_C(  351897115),
                            INT32_C( 1594003471), INT32_C(-1709813294), INT32_C( -133653364), INT32_C(  -51462036),
                            INT32_C(   46796230), INT32_C(  989301899), INT32_C( -691937914), INT32_C( 1667629581),
                            INT32_C( -496700661), INT32_C(-1318801755), INT32_C( 1076515270), INT32_C(-1757573505)),
      simde_mm512_set_epi32(INT32_C( -560036292), INT32_C(-1693642327), INT32_C(-1383827159), INT32_C( 1804875719),
                            INT32_C( 1179452315), INT32_C(-1509656190), INT32_C(-1409992701), INT32_C( 1667629581),
                            INT32_C( -207159885), INT32_C( -691937914), INT32_C( -104006691), INT32_C(-1307643183),
                            INT32_C( -144888334), INT32_C(-1686112999), INT32_C( -521443925), INT32_C( -691937914)) },
    { simde_mm512_set_epi32(INT32_C( -662725541), INT32_C(  790228415), INT32_C(  -26753919), INT32_C( -495897274),
                            INT32_C( 1526994051), INT32_C( 1569343894), INT32_C(-1059990980), INT32_C( -490626870),
                            INT32_C( 1463745126), INT32_C( -957352131), INT32_C( 1122208393), INT32_C(-1814919780),
                            INT32_C(-1891682702), INT32_C( -176064246), INT32_C(-1293286075), INT32_C(-1398303881)),
      simde_mm512_set_epi32(INT32_C( -204514420), INT32_C( 1112369408), INT32_C( 2113109396), INT32_C(-1679339682),
                            INT32_C( 2128430529), INT32_C(-1262713143), INT32_C( 1026756660), INT32_C(-1268083621),
                            INT32_C(  337660693), INT32_C( 1524090799), INT32_C( -275653210), INT32_C(-1422519849),
                            INT32_C( -495051500), INT32_C( 1851182812), INT32_C(    5027269), INT32_C( -594726618)),
      UINT16_C(21630),
      simde_mm512_set_epi32(INT32_C( -501257427), INT32_C(-1329431510), INT32_C( 1005777948), INT32_C(  616430734),
                            INT32_C( 1581162255), INT32_C( 1497456456), INT32_C(-1170808415), INT32_C(-1014503666),
                            INT32_C(-1157750165), INT32_C( 1691363299), INT32_C( 1100655145), INT32_C(  673265711),
                            INT32_C( 1544659928), INT32_C(-1956803094), INT32_C( 1970109422), INT32_C(-1197844366)),
      simde_mm512_set_epi32(INT32_C( -204514420), INT32_C(-1398303881), INT32_C( 2113109396), INT32_C(-1329431510),
                            INT32_C( 2128430529), INT32_C(-1059990980), INT32_C( 1026756660), INT32_C(-1268083621),
                            INT32_C(  337660693), INT32_C( -662725541), INT32_C( -957352131), INT32_C(-1157750165),
                            INT32_C(  673265711), INT32_C(  616430734), INT32_C( 1122208393), INT32_C( -594726618)) },
    { simde_mm512_set_epi32(INT32_C(-1875196295), INT32_C( -129416454), INT32_C(  246939492), INT32_C(-1135915662),
                            INT32_C( -539014135), INT32_C( 1554320066), INT32_C( 1611314079), INT32_C(-1013292897),
                            INT32_C( 1135188428), INT32_C(-1903831246), INT32_C( 1207366326), INT32_C( -366505666),
                            INT32_C( 1379479886), INT32_C( 1577255779), INT32_C( -488475560), INT32_C(  143370041)),
      simde_mm512_set_epi32(INT32_C( -632623581), INT32_C(  612963145), INT32_C( 1824881051), INT32_C(  582494706),
                            INT32_C(-1899955415), INT32_C(  618457733), INT32_C( 1216635147), INT32_C( 1404062051),
                            INT32_C( 1905825928), INT32_C(-1635796069), INT32_C(  528096299), INT32_C(  259240399),
                            INT32_C(  271372102), INT32_C( 1305969598), INT32_C(  974818283), INT32_C(  377057639)),
      UINT16_C(42527),
      simde_mm512_set_epi32(INT32_C( -675362282), INT32_C(-1218762696), INT32_C(-1400182216), INT32_C(-2088680370),
                            INT32_C(-1895497877), INT32_C( 1563893931), INT32_C( 1105770515), INT32_C(-1745770541),
                            INT32_C(-1255255240), INT32_C( 1238532704), INT32_C(  995946229), INT32_C(  119517601),
                            INT32_C( 1389614040), INT32_C(-2032996348), INT32_C( 1996749952), INT32_C(  450477794)),
      simde_mm512_set_epi32(INT32_C( 1379479886), INT32_C(  612963145), INT32_C(-1895497877), INT32_C(  582494706),
                            INT32_C(-1899955415), INT32_C( 1207366326), INT32_C( -539014135), INT32_C( 1404062051),
                            INT32_C( 1905825928), INT32_C(-1635796069), INT32_C(  528096299), INT32_C(-1875196295),
                            INT32_C(-1903831246), INT32_C(-1218762696), INT32_C( -539014135), INT32_C( 1135188428)) },
  };

  for (size_t i = 0 ; i < (sizeof(test_vec) / sizeof(test_vec[0])); i++) {
    simde__m512i r = simde_mm512_mask2_permutex2var_epi32(test_vec[i].a, test_vec[i].idx, test_vec[i].k, test_vec[i].b);
    simde_assert_m512i_i32(r, ==, test_vec[i].r);
  }

  return 0;
}

static int
test_simde_mm512_maskz_permutex2var_epi32(SIMDE_MUNIT_TEST_ARGS) {
  const struct {
    simde__mmask16 k;
    simde__m512i a;
    simde__m512i idx;
    simde__m512i b;
    simde__m512i r;
  } test_vec[8] = {
    { UINT16_C(21335),
      simde_mm512_set_epi32(INT32_C(  951544639), INT32_C(-1026363374), INT32_C(-1801776439), INT32_C(  145438126),
                            INT32_C(-1306064352), INT32_C( -858736392), INT32_C(  923442479), INT32_C( 1092805562),
                            INT32_C( 1443901717), INT32_C( 1848749100), INT32_C( 1777333881), INT32_C( 1570116932),
                            INT32_C(-1302383354), INT32_C( 1993455974), INT32_C(-2068684593), INT32_C(-1936012201)),
      simde_mm512_set_epi32(INT32_C(-1110068455), INT32_C( -207240031), INT32_C(-1649179267), INT32_C( 2054398444),
                            INT32_C( -483586503), INT32_C(-1481960002), INT32_C(  861125508), INT32_C( -330381203),
                            INT32_C(-1999224530), INT32_C( 1042470181), INT32_C( 1827473477), INT32_C(  298546792),
                            INT32_C(-1630396605), INT32_C( 1545554432), INT32_C(  344023940), INT32_C(-1871515754)),
      simde_mm512_set_epi32(INT32_C( 1711460779), INT32_C( -919570191), INT32_C( 1974152373), INT32_C( -695949043),
                            INT32_C( -790242624), INT32_C(-1094331335), INT32_C(-1166320093), INT32_C(-2045280751),
                            INT32_C(-2037261521), INT32_C(  223952317), INT32_C(  282198336), INT32_C(  564965997),
                            INT32_C(  169645898), INT32_C(-1539616610), INT32_C( 1134735685), INT32_C( 1430356381)),
      simde_mm512_set_epi32(INT32_C(          0), INT32_C(-2068684593), INT32_C(          0), INT32_C(  145438126),
                            INT32_C(          0), INT32_C(          0), INT32_C( 1570116932), INT32_C(-1801776439),
                            INT32_C(          0), INT32_C( 1777333881), INT32_C(          0), INT32_C( 1092805562),
                            INT32_C(          0), INT32_C(-1936012201), INT32_C( 1570116932), INT32_C(  223952317)) },
    { UINT16_C(24827),
      simde_mm512_set_epi32(INT32_C( 1720852541), INT32_C(-1423023772), INT32_C(-1185448755), INT32_C( 1549802795),
                            INT32_C(  159583350), INT32_C(  548883180), INT32_C( -605945909), INT32_C(-2063050181),
                            INT32_C( 1095467003), INT32_C(-2083755741), INT32_C( 2066979701), INT32_C( 1094609712),
                            INT32_C( 1345059025), INT32_C( -340318359), INT32_C( 1519671047), INT32_C(-1017461983)),
      simde_mm512_set_epi32(INT32_C( -888441293), INT32_C( -707551350), INT32_C(  513515868), INT32_C(-1825967755),
                            INT32_C(  822222164), INT32_C(-1689559027), INT32_C(  533478787), INT32_C(  907615417),
                            INT32_C( -199229058), INT32_C(  -91537812), INT32_C( 1375258232), INT32_C(  139748399),
                            INT32_C( 1688468565), INT32_C(  736544549), INT32_C(-1282057552), INT32_C(  795925067)),
      simde_mm512_set_epi32(INT32_C( 1701079465), INT32_C( -195770682), INT32_C(  503748315), INT32_C( 1469355417),
                            INT32_C(-1849349632), INT32_C( 1962664621), INT32_C( -646247370), INT32_C( 1258747662),
                            INT32_C( 1838830023), INT32_C( -532007659), INT32_C( -622852205), INT32_C( -839037220),
                            INT32_C(  499633910), INT32_C( -260167255), INT32_C(  884163960), INT32_C( -329275629)),
      simde_mm512_set_epi32(INT32_C(          0), INT32_C(  548883180), INT32_C( 1469355417), INT32_C(          0),
                            INT32_C(          0), INT32_C(          0), INT32_C(          0), INT32_C(          0),
                            INT32_C( -195770682), INT32_C( 1549802795), INT32_C( 1258747662), INT32_C( 1720852541),
                            INT32_C( -622852205), INT32_C(          0), INT32_C( -329275629), INT32_C(  159583350)) },
    { UINT16_C(33750),
      simde_mm512_set_epi32(INT32_C(  722122834), INT32_C( -174985661), INT32_C(-1762469023), INT32_C( 1239606494),
                            INT32_C(  -22119232), INT32_C( 1216907749), INT32_C(  654527510), INT32_C(-2043358500),
                            INT32_C(  459072440), INT32_C( -430427651), INT32_C( -272088075), INT32_C(  386072301),
                            INT32_C(-1628984154), INT32_C(   87817524), INT32_C( 1219490517), INT32_C(-1569831145)),
      simde_mm512_set_epi32(INT32_C(  730787370), INT32_C(-2034110695), INT32_C(-1088138491), INT32_C( -353174912),
                            INT32_C( -362301616), INT32_C(  617951303), INT32_C(  817116152), INT32_C(-1034835761),
                            INT32_C( -102069057), INT32_C( 1774242298), INT32_C( 1089620040), INT32_C(-1101477862),
                            INT32_C( 2001101785), INT32_C(-1759250988), INT32_C( -606254738), INT32_C( 1526367108)),
      simde_mm512_set_epi32(INT32_C(  204417556), INT32_C(-1329665093), INT32_C(-2039025377), INT32_C( 1639231015),
                            INT32_C( 1541217841), INT32_C( 1692413538), INT32_C(  738521275), INT32_C(  159429100),
                            INT32_C(  451955897), INT32_C(  181201098), INT32_C(  450627934), INT32_C( 2082954477),
                            INT32_C( 1254960767), INT32_C( 1995459397), INT32_C(  -11572946), INT32_C(-1087388220)),
      simde_mm512_set_epi32(INT32_C( 1216907749), INT32_C(          0), INT32_C(          0), INT32_C(          0),
                            INT32_C(          0), INT32_C(          0), INT32_C(  159429100), INT32_C(  722122834),
                            INT32_C(  204417556), INT32_C( 1692413538), INT32_C(          0), INT32_C( 1692413538),
                            INT32_C(          0), INT32_C( 2082954477), INT32_C( -174985661), INT32_C(          0)) },
    { UINT16_C(30100),
      simde_mm512_set_epi32(INT32_C( 1313258175), INT32_C( 1928049651), INT32_C(  765730488), INT32_C(  -85899231),
                            INT32_C( 1435935141), INT32_C(-2098236580), INT32_C(-1991433794), INT32_C( 1298943776),
                            INT32_C(  277470244), INT32_C(-1834748849), INT32_C(  596054477), INT32_C( 1827419510),
                            INT32_C(-1010527612), INT32_C(-1687118128), INT32_C(  107945377), INT32_C( 1174128677)),
      simde_mm512_set_epi32(INT32_C( 1463729035), INT32_C( 2031968571), INT32_C(  333434400), INT32_C( -637142874),
                            INT32_C( -520435756), INT32_C( -148623413), INT32_C( -692754616), INT32_C(-1908406411),
                            INT32_C( 1391053429), INT32_C( 1767908668), INT32_C( 1117151413), INT32_C( 1466854108),
                            INT32_C( -852914371), INT32_C( -773785464), INT32_C(-2142007253), INT32_C(  466013192)),
      simde_mm512_set_epi32(INT32_C( -811849174), INT32_C(-1510825074), INT32_C( 1897985966), INT32_C( 1445172644),
                            INT32_C( -193622280), INT32_C( 2097959091), INT32_C( -652080500), INT32_C( 1943026961),
                            INT32_C(  763848022), INT32_C(-2124387583), INT32_C(-1102663841), INT32_C(  712044568),
                            INT32_C( 1641785760), INT32_C( 1696516135), INT32_C(-1123374630), INT32_C( -181070601)),
      simde_mm512_set_epi32(INT32_C(          0), INT32_C( -193622280), INT32_C( 1174128677), INT32_C(-1834748849),
                            INT32_C(          0), INT32_C( 1435935141), INT32_C(          0), INT32_C(-1102663841),
                            INT32_C(-1102663841), INT32_C(          0), INT32_C(          0), INT32_C( 1445172644),
                            INT32_C(          0), INT32_C( 1298943776), INT32_C(          0), INT32_C(          0)) },
    { UINT16_C(62887),
      simde_mm512_set_epi32(INT32_C(-1218860495), INT32_C(  729621709), INT32_C(-1241407128), INT32_C(  696721321),
                            INT32_C( -603523965), INT32_C( 1730687689), INT32_C(  290786615), INT32_C(-1827031380),
                            INT32_C( 1429317129), INT32_C(-1800615955), INT32_C( -728999228), INT32_C( -788606428),
                            INT32_C( -539592973), INT32_C(-1402526875), INT32_C(   -8263463), INT32_C(  478788156)),
      simde_mm512_set_epi32(INT32_C(-1668086905), INT32_C( -770469750), INT32_C( 1013231130), INT32_C(  543156562),
                            INT32_C( -399740514), INT32_C(  509655415), INT32_C( -160537509), INT32_C( -549528402),
                            INT32_C( -323547130), INT32_C(-1395624565), INT32_C(-1905505546), INT32_C(-1268587914),
                            INT32_C( 1939823644), INT32_C(-1112752789), INT32_C( 2052878307), INT32_C( -856056848)),
      simde_mm512_set_epi32(INT32_C( 1969107101), INT32_C(-2063427243), INT32_C( -670405092), INT32_C(-1879729053),
                            INT32_C( 1035482990), INT32_C( 1183910939), INT32_C( 1515345934), INT32_C(-1884003639),
                            INT32_C( -638430290), INT32_C(-2007622482), INT32_C(  171336877), INT32_C(   59553613),
                            INT32_C(  165266600), INT32_C( -798384264), INT32_C( 1607584815), INT32_C(-1324336584)),
      simde_mm512_set_epi32(INT32_C( 1429317129), INT32_C( 1730687689), INT32_C( 1183910939), INT32_C( -798384264),
                            INT32_C(          0), INT32_C( -638430290), INT32_C(          0), INT32_C(  729621709),
                            INT32_C(-1800615955), INT32_C(          0), INT32_C(-2007622482), INT32_C(          0),
                            INT32_C(          0), INT32_C( -603523965), INT32_C( -539592973), INT32_C(-1324336584)) },
    { UINT16_C(16328),
      simde_mm512_set_epi32(INT32_C( 1845744981), INT32_C(-1349190316), INT32_C(-1403674818), INT32_C( -521443925),
                            INT32_C(-1464291783), INT32_C(-1686112999), INT32_C(-1290233716), INT32_C( -364563113),
                            INT32_C( 1520783126), INT32_C( -207159885), INT32_C( -104006691), INT32_C(  362759403),
                            INT32_C(-1562242573), INT32_C( -397133039), INT32_C(  568974515), INT32_C(-1726442446)),
      simde_mm512_set_epi32(INT32_C(-1929379353), INT32_C( -560036292), INT32_C(-1693642327), INT32_C(-1383827159),
                            INT32_C( 1804875719), INT32_C( 1179452315), INT32_C(-1509656190), INT32_C(-1409992701),
                            INT32_C(-1830359468), INT32_C(  635753031), INT32_C(  310246197), INT32_C(-1783943034),
                            INT32_C(-1307643183), INT32_C( -144888334), INT32_C(  621611179), INT32_C(  743650285)),
      simde_mm512_set_epi32(INT32_C(-2094713086), INT32_C(  197529411), INT32_C( 1055036471), INT32_C(  351897115),
                            INT32_C( 1594003471), INT32_C(-1709813294), INT32_C( -133653364), INT32_C(  -51462036),
                            INT32_C(   46796230), INT32_C(  989301899), INT32_C( -691937914), INT32_C( 1667629581),
                            INT32_C( -496700661), INT32_C(-1318801755), INT32_C( 1076515270), INT32_C(-1757573505)),
      simde_mm512_set_epi32(INT32_C(          0), INT32_C(          0), INT32_C(-1290233716), INT32_C(-1290233716),
                            INT32_C( 1520783126), INT32_C( 1594003471), INT32_C( -397133039), INT32_C(-1562242573),
                            INT32_C( 1667629581), INT32_C( 1520783126), INT32_C(          0), INT32_C(          0),
                            INT32_C( 1076515270), INT32_C(          0), INT32_C(          0), INT32_C(          0)) },
    { UINT16_C(37751),
      simde_mm512_set_epi32(INT32_C( -594726618), INT32_C( -662725541), INT32_C(  790228415), INT32_C(  -26753919),
                            INT32_C( -495897274), INT32_C( 1526994051), INT32_C( 1569343894), INT32_C(-1059990980),
                            INT32_C( -490626870), INT32_C( 1463745126), INT32_C( -957352131), INT32_C( 1122208393),
                            INT32_C(-1814919780), INT32_C(-1891682702), INT32_C( -176064246), INT32_C(-1293286075)),
      simde_mm512_set_epi32(INT32_C(-1664789378), INT32_C( -204514420), INT32_C( 1112369408), INT32_C( 2113109396),
                            INT32_C(-1679339682), INT32_C( 2128430529), INT32_C(-1262713143), INT32_C( 1026756660),
                            INT32_C(-1268083621), INT32_C(  337660693), INT32_C( 1524090799), INT32_C( -275653210),
                            INT32_C(-1422519849), INT32_C( -495051500), INT32_C( 1851182812), INT32_C(    5027269)),
      simde_mm512_set_epi32(INT32_C( -501257427), INT32_C(-1329431510), INT32_C( 1005777948), INT32_C(  616430734),
                            INT32_C( 1581162255), INT32_C( 1497456456), INT32_C(-1170808415), INT32_C(-1014503666),
                            INT32_C(-1157750165), INT32_C( 1691363299), INT32_C( 1100655145), INT32_C(  673265711),
                            INT32_C( 1544659928), INT32_C(-1956803094), INT32_C( 1970109422), INT32_C(-1197844366)),
      simde_mm512_set_epi32(INT32_C(-1329431510), INT32_C(          0), INT32_C(          0), INT32_C(  673265711),
                            INT32_C(          0), INT32_C(          0), INT32_C( 1569343894), INT32_C(  673265711),
                            INT32_C(          0), INT32_C( 1100655145), INT32_C( -594726618), INT32_C( 1463745126),
                            INT32_C(          0), INT32_C(  673265711), INT32_C(  616430734), INT32_C( -957352131)) },
    { UINT16_C(42809),
      simde_mm512_set_epi32(INT32_C(  377057639), INT32_C(-1875196295), INT32_C( -129416454), INT32_C(  246939492),
                            INT32_C(-1135915662), INT32_C( -539014135), INT32_C( 1554320066), INT32_C( 1611314079),
                            INT32_C(-1013292897), INT32_C( 1135188428), INT32_C(-1903831246), INT32_C( 1207366326),
                            INT32_C( -366505666), INT32_C( 1379479886), INT32_C( 1577255779), INT32_C( -488475560)),
      simde_mm512_set_epi32(INT32_C(   -7690721), INT32_C( -632623581), INT32_C(  612963145), INT32_C( 1824881051),
                            INT32_C(  582494706), INT32_C(-1899955415), INT32_C(  618457733), INT32_C( 1216635147),
                            INT32_C( 1404062051), INT32_C( 1905825928), INT32_C(-1635796069), INT32_C(  528096299),
                            INT32_C(  259240399), INT32_C(  271372102), INT32_C( 1305969598), INT32_C(  974818283)),
      simde_mm512_set_epi32(INT32_C( -675362282), INT32_C(-1218762696), INT32_C(-1400182216), INT32_C(-2088680370),
                            INT32_C(-1895497877), INT32_C( 1563893931), INT32_C( 1105770515), INT32_C(-1745770541),
                            INT32_C(-1255255240), INT32_C( 1238532704), INT32_C(  995946229), INT32_C(  119517601),
                            INT32_C( 1389614040), INT32_C(-2032996348), INT32_C( 1996749952), INT32_C(  450477794)),
      simde_mm512_set_epi32(INT32_C( -675362282), INT32_C(          0), INT32_C( 1554320066), INT32_C(          0),
                            INT32_C(          0), INT32_C( 1554320066), INT32_C(-1903831246), INT32_C(-1135915662),
                            INT32_C(          0), INT32_C(          0), INT32_C(-1895497877), INT32_C(-1135915662),
                            INT32_C(  377057639), INT32_C(          0), INT32_C(          0), INT32_C(-1135915662)) },
  };

  for (size_t i = 0 ; i < (sizeof(test_vec) / sizeof(test_vec[0])); i++) {
    simde__m512i r = simde_mm512_maskz_permutex2var_epi32(test_vec[i].k, test_vec[i].a, test_vec[i].idx, test_vec[i].b);
    simde_assert_m512i_i32(r, ==, test_vec[i].r);
  }

  return 0;
}

static int
test_simde_mm512_permutex2var_epi64(SIMDE_MUNIT_TEST_ARGS) {
  const struct {
    simde__m512i a;
    simde__m512i idx;
    simde__m512i b;
    simde__m512i r;
  } test_vec[8] = {
    { simde_mm512_set_epi64(INT64_C( 4022993628330696330), INT64_C( -564047204985781920),
                            INT64_C( 4934063986128071877), INT64_C( 8258886799903261224),
                            INT64_C( 5245738308211416456), INT64_C( 8690736315259258337),
                            INT64_C(-5183161890921602420), INT64_C(-2495336383094170141)),
      simde_mm512_set_epi64(INT64_C(-8115609027568940125), INT64_C( 3504612124823893047),
                            INT64_C(-7514888466798804666), INT64_C( 9113506312589344178),
                            INT64_C(-5948029684411535130), INT64_C(-4862378680423071053),
                            INT64_C( 7355766231574189317), INT64_C( -310150959079746096)),
      simde_mm512_set_epi64(INT64_C(-7443148953768886026), INT64_C( 8448077846545567514),
                            INT64_C(-7304267332935478206), INT64_C(-1528489088828046422),
                            INT64_C( 1295774678670654457), INT64_C(-8851107363323835123),
                            INT64_C( 2369486750103851747), INT64_C(-5139586436110975467)),
      simde_mm512_set_epi64(INT64_C( 5245738308211416456), INT64_C( 4022993628330696330),
                            INT64_C( -564047204985781920), INT64_C( 8690736315259258337),
                            INT64_C( -564047204985781920), INT64_C( 5245738308211416456),
                            INT64_C( 4934063986128071877), INT64_C(-2495336383094170141)) },
    { simde_mm512_set_epi64(INT64_C(-3094219001013742557), INT64_C(-3379016320921474793),
                            INT64_C( 7772273849745001049), INT64_C(-4229480058937372017),
                            INT64_C( 8318730560275653847), INT64_C(-2664412856586094061),
                            INT64_C( 2083707536546841162), INT64_C( 5404230241318444880)),
      simde_mm512_set_epi64(INT64_C(-7922172549839933132), INT64_C(   90826243433254935),
                            INT64_C( 1037923706586637130), INT64_C( 5568688997300093349),
                            INT64_C( 9199350188047982974), INT64_C(-7693432910203882071),
                            INT64_C(-5762072963977532348), INT64_C( 4491924425059371454)),
      simde_mm512_set_epi64(INT64_C( 7563354526679147255), INT64_C(-6952412028107066884),
                            INT64_C(-3077616107881632928), INT64_C(-2220298267656761827),
                            INT64_C( 2522518958303333112), INT64_C(-1668307566098600867),
                            INT64_C( 8306832211054389426), INT64_C(-4135341282024622606)),
      simde_mm512_set_epi64(INT64_C(-4229480058937372017), INT64_C(-3094219001013742557),
                            INT64_C(-1668307566098600867), INT64_C( 7772273849745001049),
                            INT64_C(-6952412028107066884), INT64_C( 8306832211054389426),
                            INT64_C(-4229480058937372017), INT64_C(-6952412028107066884)) },
    { simde_mm512_set_epi64(INT64_C(-6876215301736363293), INT64_C(-2253243373865166954),
                            INT64_C( 5866706473820467911), INT64_C(-1945184283153250111),
                            INT64_C(-6043663531296462836), INT64_C(-3201199251206898425),
                            INT64_C(-7517867743898200758), INT64_C( 5023666877462679332)),
      simde_mm512_set_epi64(INT64_C(  135432210503006619), INT64_C(-7059566968128636366),
                            INT64_C(-1295026765047609725), INT64_C( 5447800525707046939),
                            INT64_C( 1419500527032411112), INT64_C( 5424087511148175828),
                            INT64_C(-4780701435803039630), INT64_C( 6069825193561024149)),
      simde_mm512_set_epi64(INT64_C(-7404082530836275478), INT64_C(-6011864495242619751),
                            INT64_C(-2639903919112693390), INT64_C( 3391502071027493622),
                            INT64_C( 5698026186558744964), INT64_C( 6269499859520580584),
                            INT64_C( 7385991043015762011), INT64_C( 2173549174497415259)),
      simde_mm512_set_epi64(INT64_C( 5698026186558744964), INT64_C(-3201199251206898425),
                            INT64_C(-6043663531296462836), INT64_C( 5698026186558744964),
                            INT64_C( 2173549174497415259), INT64_C(-1945184283153250111),
                            INT64_C(-3201199251206898425), INT64_C( 5866706473820467911)) },
    { simde_mm512_set_epi64(INT64_C(-7778482448656032654), INT64_C(-7388935565641111344),
                            INT64_C( 2154583157079273400), INT64_C( 4649728279138736034),
                            INT64_C( 1896125478609903946), INT64_C( 6795120210135498653),
                            INT64_C(-8532964392806396349), INT64_C(-8044512602622188161)),
      simde_mm512_set_epi64(INT64_C( 8618855955534148826), INT64_C(-1358620153905394442),
                            INT64_C(-6300735262609682931), INT64_C(-6423460006708841158),
                            INT64_C(-7828848640852632692), INT64_C(-9058711782958006347),
                            INT64_C(-6631984369075385878), INT64_C(  312385656423386943)),
      simde_mm512_set_epi64(INT64_C( 2330675318709913935), INT64_C( 8512876982035459145),
                            INT64_C( -754385814369639096), INT64_C(-5873166547629617678),
                            INT64_C(-8313572030703954107), INT64_C( 8197482817575228316),
                            INT64_C( 7734796813438689885), INT64_C(-7308014241195865956)),
      simde_mm512_set_epi64(INT64_C( 8197482817575228316), INT64_C(-7388935565641111344),
                            INT64_C( -754385814369639096), INT64_C( 8197482817575228316),
                            INT64_C(-5873166547629617678), INT64_C( 2154583157079273400),
                            INT64_C( 8197482817575228316), INT64_C( 2330675318709913935)) },
    { simde_mm512_set_epi64(INT64_C(-8488192066941669485), INT64_C( 2196446486128224002),
                            INT64_C(-2769327913695750796), INT64_C( 8356403410464371881),
                            INT64_C(-1359912063489860660), INT64_C( 3839494741156011818),
                            INT64_C(-8628380254870238699), INT64_C(-3703720426743693096)),
      simde_mm512_set_epi64(INT64_C(-5841170484671274964), INT64_C(-3543508984518726324),
                            INT64_C( 3010243785522476560), INT64_C(-1544427551515059156),
                            INT64_C(-6824560769606762223), INT64_C( 5419183893290153987),
                            INT64_C(-6963147146169039734), INT64_C(  796151810828840161)),
      simde_mm512_set_epi64(INT64_C( 7773392645197032708), INT64_C(-2378134723719136690),
                            INT64_C( 3098859216623929918), INT64_C( 2705178435890570578),
                            INT64_C( 8034863847415814381), INT64_C( 2143618657886453602),
                            INT64_C( 1932054708809515818), INT64_C( -431037512959796468)),
      simde_mm512_set_epi64(INT64_C( 2705178435890570578), INT64_C( 2705178435890570578),
                            INT64_C(-3703720426743693096), INT64_C( 2705178435890570578),
                            INT64_C(-8628380254870238699), INT64_C(-1359912063489860660),
                            INT64_C( 2143618657886453602), INT64_C(-8628380254870238699)) },
    { simde_mm512_set_epi64(INT64_C( 7017505342718424326), INT64_C( 7336144214089986511),
                            INT64_C(-7372811814600044225), INT64_C( 3369678464815021090),
                            INT64_C(-3624005186939786961), INT64_C( 3053727983599056138),
                            INT64_C( 1044677486690381786), INT64_C( 7246985488966277586)),
      simde_mm512_set_epi64(INT64_C(-7724828277596580344), INT64_C(-6390405785894387099),
                            INT64_C( 1370770444668698151), INT64_C(  397783669977726534),
                            INT64_C(  618616089164357310), INT64_C(-2236191700094566243),
                            INT64_C(  606989345560642948), INT64_C(-5888219196601577993)),
      simde_mm512_set_epi64(INT64_C( 6890380242518530506), INT64_C( 7812910065385095491),
                            INT64_C( 6573936547803745655), INT64_C( 5624455476374850044),
                            INT64_C(-8202159596651692767), INT64_C(-5134690790763765861),
                            INT64_C( 6771966217713905101), INT64_C( 5500799798135763834)),
      simde_mm512_set_epi64(INT64_C( 5500799798135763834), INT64_C(-7372811814600044225),
                            INT64_C( 7017505342718424326), INT64_C( 7336144214089986511),
                            INT64_C( 7812910065385095491), INT64_C( 6573936547803745655),
                            INT64_C( 3369678464815021090), INT64_C( 7017505342718424326)) },
    { simde_mm512_set_epi64(INT64_C( 9087942297620858697), INT64_C(-5062502778264465278),
                            INT64_C( 4940486863427147430), INT64_C(-8466656670106113805),
                            INT64_C( 8779594976999061301), INT64_C(-6871795698650725249),
                            INT64_C( 7737606421984431976), INT64_C( 4256585739398952106)),
      simde_mm512_set_epi64(INT64_C( 3159639098800136017), INT64_C( 7547309067228210654),
                            INT64_C(  986058858743442499), INT64_C( -131493493066513451),
                            INT64_C( 4714195534976331711), INT64_C(-2919200212626154268),
                            INT64_C(-6480751279152247349), INT64_C(-8406130515310490191)),
      simde_mm512_set_epi64(INT64_C(-3303730405560337432), INT64_C( 1832719708746018971),
                            INT64_C( 7156376354960526422), INT64_C( 2595303813823857983),
                            INT64_C(   86688370885605369), INT64_C( 4396380977508135743),
                            INT64_C( 7341255277548419375), INT64_C( 7383808788818698409)),
      simde_mm512_set_epi64(INT64_C( 7737606421984431976), INT64_C( 1832719708746018971),
                            INT64_C( 8779594976999061301), INT64_C( 4940486863427147430),
                            INT64_C(-3303730405560337432), INT64_C(-8466656670106113805),
                            INT64_C(   86688370885605369), INT64_C( 7737606421984431976)) },
    { simde_mm512_set_epi64(INT64_C( 5459696121657899945), INT64_C( 2994903846606128408),
                            INT64_C( 5904359179218034313), INT64_C(-2066889829135543468),
                            INT64_C( 6803831723224696242), INT64_C(-1121730792444760624),
                            INT64_C(-7265999827078260931), INT64_C( 1814191055697415083)),
      simde_mm512_set_epi64(INT64_C(  199279425141616266), INT64_C( 3221796949435356069),
                            INT64_C(-1875768603448185105), INT64_C(  830129211732438864),
                            INT64_C( 3257319649738390908), INT64_C( 4257114197692508298),
                            INT64_C( 8024289238579469643), INT64_C( 2840131019362087365)),
      simde_mm512_set_epi64(INT64_C( 2502509311262690711), INT64_C( 5723836460071094920),
                            INT64_C( 7759612686570582771), INT64_C( 8703685710852381059),
                            INT64_C( 6587534258249310175), INT64_C( 2710240672169765174),
                            INT64_C( 8721065329514012238), INT64_C( 5835087168664292514)),
      simde_mm512_set_epi64(INT64_C( 2710240672169765174), INT64_C( 5904359179218034313),
                            INT64_C( 2502509311262690711), INT64_C( 1814191055697415083),
                            INT64_C( 8703685710852381059), INT64_C( 2710240672169765174),
                            INT64_C( 6587534258249310175), INT64_C( 5904359179218034313)) },
  };

  for (size_t i = 0 ; i < (sizeof(test_vec) / sizeof(test_vec[0])); i++) {
    simde__m512i r = simde_mm512_permutex2var_epi64(test_vec[i].a, test_vec[i].idx, test_vec[i].b);
    simde_assert_m512i_i64(r, ==, test_vec[i].r);
  }

  return 0;
}

static int
test_simde_mm512_mask_permutex2var_epi64(SIMDE_MUNIT_TEST_ARGS) {
  const struct {
    simde__m512i a;
    simde__mmask8 k;
    simde__m512i idx;
    simde__m512i b;
    simde__m512i r;
  } test_vec[8] = {
    { simde_mm512_set_epi64(INT64_C(-4408197122649025847), INT64_C(  624651997750430240),
                            INT64_C(-3688244718601593553), INT64_C( 4693564151120802069),
                            INT64_C( 7940316924786767481), INT64_C( 6743600876828439814),
                            INT64_C( 8561828216572109007), INT64_C(-8315109086095518889)),
      UINT8_C( 63),
      simde_mm512_set_epi64(INT64_C(-4767707706458520415), INT64_C(-7083171014951853588),
                            INT64_C(-2076988212358998594), INT64_C( 3698505898575972461),
                            INT64_C(-8586603972668500699), INT64_C( 7848938818320954984),
                            INT64_C(-7002500096438875648), INT64_C( 1477571573764517782)),
      simde_mm512_set_epi64(INT64_C( 7350668077567080689), INT64_C( 8478919882954811661),
                            INT64_C(-3394066222784588743), INT64_C(-5009306653852991983),
                            INT64_C(-8749971605870264899), INT64_C( 1212032624670585453),
                            INT64_C(  728623586565902494), INT64_C( 4873652658109514141)),
      simde_mm512_set_epi64(INT64_C(-4408197122649025847), INT64_C(  624651997750430240),
                            INT64_C( 8478919882954811661), INT64_C(-3394066222784588743),
                            INT64_C(-3688244718601593553), INT64_C( 4873652658109514141),
                            INT64_C(-8315109086095518889), INT64_C(  624651997750430240)) },
    { simde_mm512_set_epi64(INT64_C(-6111840559061041971), INT64_C( 6656352319933975670),
                            INT64_C( 2357435311113502667), INT64_C(-8860733056306413573),
                            INT64_C(-8949662758380266635), INT64_C( 4701312916269037777),
                            INT64_C(-1461656220613716217), INT64_C(-4369965941555109637)),
      UINT8_C( 61),
      simde_mm512_set_epi64(INT64_C(-3815826294263537782), INT64_C( 2205533861506052469),
                            INT64_C( 3531417307031756813), INT64_C( 2291273944182365369),
                            INT64_C( -855682284319457684), INT64_C( 5906689130134529071),
                            INT64_C( 7251917267735594789), INT64_C(-5506395256633894325)),
      simde_mm512_set_epi64(INT64_C( 7306080674171373254), INT64_C( 2163582539809461657),
                            INT64_C(-7942896186346970451), INT64_C(-2775611318017263858),
                            INT64_C( 7897714815450887445), INT64_C(-2675129847260557604),
                            INT64_C( 2145911307457407401), INT64_C( 3797455296467543827)),
      simde_mm512_set_epi64(INT64_C(-6111840559061041971), INT64_C( 6656352319933975670),
                            INT64_C(-7942896186346970451), INT64_C( 2145911307457407401),
                            INT64_C(-2775611318017263858), INT64_C( 7306080674171373254),
                            INT64_C(-1461656220613716217), INT64_C( 7897714815450887445)) },
    { simde_mm512_set_epi64(INT64_C( -751557688731444383), INT64_C( 5324069355912068288),
                            INT64_C( 5226578984858504214), INT64_C(-8776157931044543560),
                            INT64_C(-1848672680316222475), INT64_C( 1658167909352451238),
                            INT64_C(  377173394815185621), INT64_C(-6742373427678247978)),
      UINT8_C( 82),
      simde_mm512_set_epi64(INT64_C( 3138707856740708121), INT64_C(-4673519228421997952),
                            INT64_C(-1556073591389999033), INT64_C( 3509487153133496527),
                            INT64_C( -438383259974317574), INT64_C( 4679882440059701274),
                            INT64_C( 8594666725077939668), INT64_C(-2603844271228681340)),
      simde_mm512_set_epi64(INT64_C(  877966720713550779), INT64_C(-8757547308289839577),
                            INT64_C( 6619480224799141474), INT64_C( 3171924723684651500),
                            INT64_C( 1941135797030545610), INT64_C( 1935432241277000941),
                            INT64_C( 5390015454023535429), INT64_C(  -49705421380794940)),
      simde_mm512_set_epi64(INT64_C( -751557688731444383), INT64_C(-6742373427678247978),
                            INT64_C( 5226578984858504214), INT64_C(  877966720713550779),
                            INT64_C(-1848672680316222475), INT64_C( 1658167909352451238),
                            INT64_C(-8776157931044543560), INT64_C(-6742373427678247978)) },
    { simde_mm512_set_epi64(INT64_C( 8280910196874944184), INT64_C( -368934386460614235),
                            INT64_C(-9011857488067354178), INT64_C( 5578921037540219940),
                            INT64_C(-7880186302232587827), INT64_C( 7848707034806784644),
                            INT64_C(-7246117184140796511), INT64_C( 5042844271761388948)),
      UINT8_C(191),
      simde_mm512_set_epi64(INT64_C( 6286668337562607931), INT64_C( 1432089847019206822),
                            INT64_C(-2235254547542691893), INT64_C(-2975358417486477451),
                            INT64_C( 5974528986311566652), INT64_C( 4798128784982043356),
                            INT64_C(-3663239326212228984), INT64_C(-9199851098963784696)),
      simde_mm512_set_epi64(INT64_C(-3486865648830471282), INT64_C( 8151787653682140580),
                            INT64_C( -831601358278995789), INT64_C(-2800664419916301039),
                            INT64_C( 3280702275774868225), INT64_C(-4735905134864699368),
                            INT64_C( 7051416147935021095), INT64_C(-4824857292892203785)),
      simde_mm512_set_epi64(INT64_C( 3280702275774868225), INT64_C( -368934386460614235),
                            INT64_C( 3280702275774868225), INT64_C(-9011857488067354178),
                            INT64_C(-2800664419916301039), INT64_C(-2800664419916301039),
                            INT64_C(-4824857292892203785), INT64_C(-4824857292892203785)) },
    { simde_mm512_set_epi64(INT64_C( 3133701381660189032), INT64_C( 2992395291812361347),
                            INT64_C( 7433247024135605559), INT64_C(-7847040024436431351),
                            INT64_C(-7733586635814839612), INT64_C(-3387038813920004365),
                            INT64_C(-6023807055599376167), INT64_C( 2056379472574346663)),
      UINT8_C( 49),
      simde_mm512_set_epi64(INT64_C(-7164378700336361334), INT64_C( 4351794567182281042),
                            INT64_C(-1716872434006574729), INT64_C( -689503347190866770),
                            INT64_C(-1389624339165317749), INT64_C(-8184083999390244234),
                            INT64_C( 8331479114169761131), INT64_C( 8817045194671758320)),
      simde_mm512_set_epi64(INT64_C( 8457250603347908949), INT64_C(-2879367942796632989),
                            INT64_C( 4447365578798205979), INT64_C( 6508361231067538121),
                            INT64_C(-2742037214038451026), INT64_C(  735886283373328205),
                            INT64_C(  709814645617696632), INT64_C( 6904524208941840952)),
      simde_mm512_set_epi64(INT64_C( 3133701381660189032), INT64_C( 2992395291812361347),
                            INT64_C( 3133701381660189032), INT64_C(-2879367942796632989),
                            INT64_C(-7733586635814839612), INT64_C(-3387038813920004365),
                            INT64_C(-6023807055599376167), INT64_C( 2056379472574346663)) },
    { simde_mm512_set_epi64(INT64_C(-5794728280408613058), INT64_C(-2239584601742201287),
                            INT64_C(-7241800185060747124), INT64_C(-1565786646142169322),
                            INT64_C( -889744926927160355), INT64_C( 1558039774934209011),
                            INT64_C(-1705673414097118029), INT64_C(-7415013841836228664)),
      UINT8_C( 85),
      simde_mm512_set_epi64(INT64_C(-8286621218977708484), INT64_C(-7274138402675197655),
                            INT64_C( 7751882187628938139), INT64_C(-6483923961368987645),
                            INT64_C(-7861334054348205497), INT64_C( 1332497272334397574),
                            INT64_C(-5616284701672264206), INT64_C( 2669799685376652269)),
      simde_mm512_set_epi64(INT64_C(-8996724198675706045), INT64_C( 4531347139384149531),
                            INT64_C( 6846192780240638418), INT64_C( -574036823136878484),
                            INT64_C(  200988278415395979), INT64_C(-2971850709824830963),
                            INT64_C(-2133313091920417115), INT64_C( 4623597880832003711)),
      simde_mm512_set_epi64(INT64_C(-5794728280408613058), INT64_C(-2133313091920417115),
                            INT64_C(-7241800185060747124), INT64_C( -889744926927160355),
                            INT64_C( -889744926927160355), INT64_C(-2239584601742201287),
                            INT64_C(-1705673414097118029), INT64_C( 6846192780240638418)) },
    { simde_mm512_set_epi64(INT64_C(-2846384524028678721), INT64_C( -114907203345763002),
                            INT64_C( 6558389511800899990), INT64_C(-4552626589350649654),
                            INT64_C( 6286737449187014461), INT64_C( 4819848349711762844),
                            INT64_C(-8124715335380010742), INT64_C(-5554621393600539785)),
      UINT8_C( 38),
      simde_mm512_set_epi64(INT64_C(-7150215929147729012), INT64_C( 4777590230543990164),
                            INT64_C(-7212709010936609343), INT64_C(-5423311652387614668),
                            INT64_C(-5446377680450598123), INT64_C( 6545920141858823590),
                            INT64_C(-6109676225565942508), INT64_C( 7950769636462343621)),
      simde_mm512_set_epi64(INT64_C(-2152884252876571606), INT64_C( 4319783394314419342),
                            INT64_C( 6791040176392068936), INT64_C(-5028583849026132210),
                            INT64_C(-4972499093922240541), INT64_C( 4727277852622403631),
                            INT64_C( 6634263876539878890), INT64_C( 8461555540128585842)),
      simde_mm512_set_epi64(INT64_C(-2846384524028678721), INT64_C( -114907203345763002),
                            INT64_C(-8124715335380010742), INT64_C(-4552626589350649654),
                            INT64_C( 6286737449187014461), INT64_C( -114907203345763002),
                            INT64_C(-4552626589350649654), INT64_C(-5554621393600539785)) },
    { simde_mm512_set_epi64(INT64_C(-8053906756439817478), INT64_C( 1060597045389905266),
                            INT64_C(-2315048080352408894), INT64_C( 6920541276171034783),
                            INT64_C( 4875597175448786738), INT64_C( 5185598888390136126),
                            INT64_C( 5924820997437064035), INT64_C(-2097986554951915719)),
      UINT8_C(103),
      simde_mm512_set_epi64(INT64_C(  -33031391515316701), INT64_C( 2632656663253186971),
                            INT64_C( 2501795714758146857), INT64_C( 2656255738409935115),
                            INT64_C( 6030400592505510024), INT64_C(-7025690618752263125),
                            INT64_C( 1113429035778363206), INT64_C( 5609096713955085291)),
      simde_mm512_set_epi64(INT64_C(-2900658911065724872), INT64_C(-6013736823954521010),
                            INT64_C(-8141101389788536661), INT64_C( 4749248201355274195),
                            INT64_C(-5391280202694098336), INT64_C( 4277556482249044385),
                            INT64_C( 5968346858124406788), INT64_C( 8575975742580047586)),
      simde_mm512_set_epi64(INT64_C(-8053906756439817478), INT64_C(-5391280202694098336),
                            INT64_C( 5968346858124406788), INT64_C( 6920541276171034783),
                            INT64_C( 4875597175448786738), INT64_C(-5391280202694098336),
                            INT64_C( 1060597045389905266), INT64_C(-5391280202694098336)) },
  };

  for (size_t i = 0 ; i < (sizeof(test_vec) / sizeof(test_vec[0])); i++) {
    simde__m512i r = simde_mm512_mask_permutex2var_epi64(test_vec[i].a, test_vec[i].k, test_vec[i].idx, test_vec[i].b);
    simde_assert_m512i_i64(r, ==, test_vec[i].r);
  }

  return 0;
}

static int
test_simde_mm512_mask2_permutex2var_epi64(SIMDE_MUNIT_TEST_ARGS) {
  const struct {
    simde__m512i a;
    simde__m512i idx;
    simde__mmask8 k;
    simde__m512i b;
    simde__m512i r;
  } test_vec[8] = {
    { simde_mm512_set_epi64(INT64_C(-4408197122649025847), INT64_C(  624651997750430240),
                            INT64_C(-3688244718601593553), INT64_C( 4693564151120802069),
                            INT64_C( 7940316924786767481), INT64_C( 6743600876828439814),
                            INT64_C( 8561828216572109007), INT64_C(-8315109086095518889)),
      simde_mm512_set_epi64(INT64_C( -890089152921238147), INT64_C( 8823574133744668217),
                            INT64_C(-6364969741708969084), INT64_C(-1418976459802394322),
                            INT64_C( 4477375336277674053), INT64_C( 1282248710630285123),
                            INT64_C( 6638105739971879812), INT64_C(-8038098956427236545)),
      UINT8_C( 25),
      simde_mm512_set_epi64(INT64_C( 7350668077567080689), INT64_C( 8478919882954811661),
                            INT64_C(-3394066222784588743), INT64_C(-5009306653852991983),
                            INT64_C(-8749971605870264899), INT64_C( 1212032624670585453),
                            INT64_C(  728623586565902494), INT64_C( 4873652658109514141)),
      simde_mm512_set_epi64(INT64_C( -890089152921238147), INT64_C( 8823574133744668217),
                            INT64_C(-6364969741708969084), INT64_C( 8478919882954811661),
                            INT64_C(-3688244718601593553), INT64_C( 1282248710630285123),
                            INT64_C( 6638105739971879812), INT64_C( 7350668077567080689)) },
    { simde_mm512_set_epi64(INT64_C(-6111840559061041971), INT64_C( 6656352319933975670),
                            INT64_C( 2357435311113502667), INT64_C(-8860733056306413573),
                            INT64_C(-8949662758380266635), INT64_C( 4701312916269037777),
                            INT64_C(-1461656220613716217), INT64_C(-4369965941555109637)),
      simde_mm512_set_epi64(INT64_C(-3038909907977133732), INT64_C(-7842471790453318316),
                            INT64_C(-7256600765093102205), INT64_C( 3898178537456140670),
                            INT64_C( -393151907512138120), INT64_C(  600214805061827669),
                            INT64_C( 3163434753014979248), INT64_C( 3418472134552461373)),
      UINT8_C( 51),
      simde_mm512_set_epi64(INT64_C( 7306080674171373254), INT64_C( 2163582539809461657),
                            INT64_C(-7942896186346970451), INT64_C(-2775611318017263858),
                            INT64_C( 7897714815450887445), INT64_C(-2675129847260557604),
                            INT64_C( 2145911307457407401), INT64_C( 3797455296467543827)),
      simde_mm512_set_epi64(INT64_C(-3038909907977133732), INT64_C(-7842471790453318316),
                            INT64_C(-8949662758380266635), INT64_C( 2163582539809461657),
                            INT64_C( -393151907512138120), INT64_C(  600214805061827669),
                            INT64_C(-4369965941555109637), INT64_C(-7942896186346970451)) },
    { simde_mm512_set_epi64(INT64_C( -751557688731444383), INT64_C( 5324069355912068288),
                            INT64_C( 5226578984858504214), INT64_C(-8776157931044543560),
                            INT64_C(-1848672680316222475), INT64_C( 1658167909352451238),
                            INT64_C(  377173394815185621), INT64_C(-6742373427678247978)),
      simde_mm512_set_epi64(INT64_C(-8736438908262001915), INT64_C(-1516874692875012272),
                            INT64_C( 2654080637722702840), INT64_C(-4444585746033374017),
                            INT64_C( 7620312646179506248), INT64_C(-4730811392556899367),
                            INT64_C(-7555925455226975890), INT64_C( 6555696811272222802)),
      UINT8_C( 42),
      simde_mm512_set_epi64(INT64_C(  877966720713550779), INT64_C(-8757547308289839577),
                            INT64_C( 6619480224799141474), INT64_C( 3171924723684651500),
                            INT64_C( 1941135797030545610), INT64_C( 1935432241277000941),
                            INT64_C( 5390015454023535429), INT64_C(  -49705421380794940)),
      simde_mm512_set_epi64(INT64_C(-8736438908262001915), INT64_C(-1516874692875012272),
                            INT64_C(  -49705421380794940), INT64_C(-4444585746033374017),
                            INT64_C(  -49705421380794940), INT64_C(-4730811392556899367),
                            INT64_C(-8757547308289839577), INT64_C( 6555696811272222802)) },
    { simde_mm512_set_epi64(INT64_C( 8280910196874944184), INT64_C( -368934386460614235),
                            INT64_C(-9011857488067354178), INT64_C( 5578921037540219940),
                            INT64_C(-7880186302232587827), INT64_C( 7848707034806784644),
                            INT64_C(-7246117184140796511), INT64_C( 5042844271761388948)),
      simde_mm512_set_epi64(INT64_C( 8727238559278288416), INT64_C(-2736507802934917164),
                            INT64_C( -638332694652688568), INT64_C(-8196543121330681227),
                            INT64_C( 7593109912492073141), INT64_C( 6300090425305304893),
                            INT64_C(-3323383259847225301), INT64_C( 2001511420457827007)),
      UINT8_C(139),
      simde_mm512_set_epi64(INT64_C(-3486865648830471282), INT64_C( 8151787653682140580),
                            INT64_C( -831601358278995789), INT64_C(-2800664419916301039),
                            INT64_C( 3280702275774868225), INT64_C(-4735905134864699368),
                            INT64_C( 7051416147935021095), INT64_C(-4824857292892203785)),
      simde_mm512_set_epi64(INT64_C( 5042844271761388948), INT64_C(-2736507802934917164),
                            INT64_C( -638332694652688568), INT64_C(-8196543121330681227),
                            INT64_C(-9011857488067354178), INT64_C( 6300090425305304893),
                            INT64_C( 3280702275774868225), INT64_C(-3486865648830471282)) },
    { simde_mm512_set_epi64(INT64_C( 3133701381660189032), INT64_C( 2992395291812361347),
                            INT64_C( 7433247024135605559), INT64_C(-7847040024436431351),
                            INT64_C(-7733586635814839612), INT64_C(-3387038813920004365),
                            INT64_C(-6023807055599376167), INT64_C( 2056379472574346663)),
      simde_mm512_set_epi64(INT64_C(-3309142377794064870), INT64_C( 2332839674293023134),
                            INT64_C( 2188953343788737627), INT64_C(-2360206510841720826),
                            INT64_C(-5994161861779764490), INT64_C(-5448543600791036900),
                            INT64_C(-4779236835234910237), INT64_C(-3676736162600736207)),
      UINT8_C(135),
      simde_mm512_set_epi64(INT64_C( 8457250603347908949), INT64_C(-2879367942796632989),
                            INT64_C( 4447365578798205979), INT64_C( 6508361231067538121),
                            INT64_C(-2742037214038451026), INT64_C(  735886283373328205),
                            INT64_C(  709814645617696632), INT64_C( 6904524208941840952)),
      simde_mm512_set_epi64(INT64_C(  735886283373328205), INT64_C( 2332839674293023134),
                            INT64_C( 2188953343788737627), INT64_C(-2360206510841720826),
                            INT64_C(-5994161861779764490), INT64_C( 6508361231067538121),
                            INT64_C(-7733586635814839612), INT64_C(-6023807055599376167)) },
    { simde_mm512_set_epi64(INT64_C(-5794728280408613058), INT64_C(-2239584601742201287),
                            INT64_C(-7241800185060747124), INT64_C(-1565786646142169322),
                            INT64_C( -889744926927160355), INT64_C( 1558039774934209011),
                            INT64_C(-1705673414097118029), INT64_C(-7415013841836228664)),
      simde_mm512_set_epi64(INT64_C(-2405337556111781463), INT64_C(-5943492389416716345),
                            INT64_C( 5065709122901801346), INT64_C(-6055872535929098668),
                            INT64_C( 2730538476788120373), INT64_C(-7661976985969691951),
                            INT64_C( -622290655480313685), INT64_C( 3193953655581824341)),
      UINT8_C(231),
      simde_mm512_set_epi64(INT64_C(-8996724198675706045), INT64_C( 4531347139384149531),
                            INT64_C( 6846192780240638418), INT64_C( -574036823136878484),
                            INT64_C(  200988278415395979), INT64_C(-2971850709824830963),
                            INT64_C(-2133313091920417115), INT64_C( 4623597880832003711)),
      simde_mm512_set_epi64(INT64_C(-2133313091920417115), INT64_C(-5794728280408613058),
                            INT64_C( 1558039774934209011), INT64_C(-6055872535929098668),
                            INT64_C( 2730538476788120373), INT64_C(-1705673414097118029),
                            INT64_C(  200988278415395979), INT64_C(-7241800185060747124)) },
    { simde_mm512_set_epi64(INT64_C(-2846384524028678721), INT64_C( -114907203345763002),
                            INT64_C( 6558389511800899990), INT64_C(-4552626589350649654),
                            INT64_C( 6286737449187014461), INT64_C( 4819848349711762844),
                            INT64_C(-8124715335380010742), INT64_C(-5554621393600539785)),
      simde_mm512_set_epi64(INT64_C( -878382744348038912), INT64_C( 9075735751305940830),
                            INT64_C( 9141539516895233737), INT64_C( 4409886278677075035),
                            INT64_C( 1450241635103786927), INT64_C(-1183921519114972713),
                            INT64_C(-2126230000484561188), INT64_C(   21591959643435302)),
      UINT8_C(126),
      simde_mm512_set_epi64(INT64_C(-2152884252876571606), INT64_C( 4319783394314419342),
                            INT64_C( 6791040176392068936), INT64_C(-5028583849026132210),
                            INT64_C(-4972499093922240541), INT64_C( 4727277852622403631),
                            INT64_C( 6634263876539878890), INT64_C( 8461555540128585842)),
      simde_mm512_set_epi64(INT64_C( -878382744348038912), INT64_C( 4319783394314419342),
                            INT64_C( 6634263876539878890), INT64_C(-4972499093922240541),
                            INT64_C(-2152884252876571606), INT64_C(-2846384524028678721),
                            INT64_C(-5028583849026132210), INT64_C(   21591959643435302)) },
    { simde_mm512_set_epi64(INT64_C(-8053906756439817478), INT64_C( 1060597045389905266),
                            INT64_C(-2315048080352408894), INT64_C( 6920541276171034783),
                            INT64_C( 4875597175448786738), INT64_C( 5185598888390136126),
                            INT64_C( 5924820997437064035), INT64_C(-2097986554951915719)),
      simde_mm512_set_epi64(INT64_C(-2717097590460443831), INT64_C( 7837804433717602802),
                            INT64_C(-8160246370664650107), INT64_C( 5225408168933214563),
                            INT64_C( 8185460035288021915), INT64_C( 2268156333602877903),
                            INT64_C( 1165534304442745790), INT64_C( 4186812645404930407)),
      UINT8_C( 31),
      simde_mm512_set_epi64(INT64_C(-2900658911065724872), INT64_C(-6013736823954521010),
                            INT64_C(-8141101389788536661), INT64_C( 4749248201355274195),
                            INT64_C(-5391280202694098336), INT64_C( 4277556482249044385),
                            INT64_C( 5968346858124406788), INT64_C( 8575975742580047586)),
      simde_mm512_set_epi64(INT64_C(-2717097590460443831), INT64_C( 7837804433717602802),
                            INT64_C(-8160246370664650107), INT64_C( 4875597175448786738),
                            INT64_C(-5391280202694098336), INT64_C(-2900658911065724872),
                            INT64_C(-6013736823954521010), INT64_C(-8053906756439817478)) },
  };

  for (size_t i = 0 ; i < (sizeof(test_vec) / sizeof(test_vec[0])); i++) {
    simde__m512i r = simde_mm512_mask2_permutex2var_epi64(test_vec[i].a, test_vec[i].idx, test_vec[i].k, test_vec[i].b);
    simde_assert_m512i_i64(r, ==, test_vec[i].r);
  }

  return 0;
}

static int
test_simde_mm512_maskz_permutex2var_epi64(SIMDE_MUNIT_TEST_ARGS) {
  const struct {
    simde__mmask8 k;
    simde__m512i a;
    simde__m512i idx;
    simde__m512i b;
    simde__m512i r;
  } test_vec[8] = {
    { UINT8_C( 87),
      simde_mm512_set_epi64(INT64_C( 4086853108457730066), INT64_C(-7738570880062900818),
                            INT64_C(-5609503674875201288), INT64_C( 3966155248134972346),
                            INT64_C( 6201510655001996332), INT64_C( 7633590894537872708),
                            INT64_C(-5593693910291334810), INT64_C(-8884932670315115433)),
      simde_mm512_set_epi64(INT64_C(-4767707706458520415), INT64_C(-7083171014951853588),
                            INT64_C(-2076988212358998594), INT64_C( 3698505898575972461),
                            INT64_C(-8586603972668500699), INT64_C( 7848938818320954984),
                            INT64_C(-7002500096438875648), INT64_C( 1477571573764517782)),
      simde_mm512_set_epi64(INT64_C( 7350668077567080689), INT64_C( 8478919882954811661),
                            INT64_C(-3394066222784588743), INT64_C(-5009306653852991983),
                            INT64_C(-8749971605870264899), INT64_C( 1212032624670585453),
                            INT64_C(  728623586565902494), INT64_C( 4873652658109514141)),
      simde_mm512_set_epi64(INT64_C(                   0), INT64_C(-5009306653852991983),
                            INT64_C(                   0), INT64_C(-3394066222784588743),
                            INT64_C(                   0), INT64_C( 4873652658109514141),
                            INT64_C(-8884932670315115433), INT64_C(-7738570880062900818)) },
    { UINT8_C(251),
      simde_mm512_set_epi64(INT64_C( 7391005387705442660), INT64_C(-5091463632259113685),
                            INT64_C(  685405269785004780), INT64_C(-2602517860068074949),
                            INT64_C( 4704994953943345443), INT64_C( 8877610218385468208),
                            INT64_C( 5776984527519295337), INT64_C( 6526937450820584225)),
      simde_mm512_set_epi64(INT64_C(-3815826294263537782), INT64_C( 2205533861506052469),
                            INT64_C( 3531417307031756813), INT64_C( 2291273944182365369),
                            INT64_C( -855682284319457684), INT64_C( 5906689130134529071),
                            INT64_C( 7251917267735594789), INT64_C(-5506395256633894325)),
      simde_mm512_set_epi64(INT64_C( 7306080674171373254), INT64_C( 2163582539809461657),
                            INT64_C(-7942896186346970451), INT64_C(-2775611318017263858),
                            INT64_C( 7897714815450887445), INT64_C(-2675129847260557604),
                            INT64_C( 2145911307457407401), INT64_C( 3797455296467543827)),
      simde_mm512_set_epi64(INT64_C(-2675129847260557604), INT64_C(  685405269785004780),
                            INT64_C(-7942896186346970451), INT64_C( 2145911307457407401),
                            INT64_C(-2775611318017263858), INT64_C(                   0),
                            INT64_C(  685405269785004780), INT64_C( 7897714815450887445)) },
    { UINT8_C(214),
      simde_mm512_set_epi64(INT64_C( 3101493959844818499), INT64_C(-7569746812758465314),
                            INT64_C(  -95001376835728923), INT64_C( 2811174252033921756),
                            INT64_C( 1971701120159461885), INT64_C(-1168609383370522899),
                            INT64_C(-6996433667044410060), INT64_C( 5237671891022268183)),
      simde_mm512_set_epi64(INT64_C( 3138707856740708121), INT64_C(-4673519228421997952),
                            INT64_C(-1556073591389999033), INT64_C( 3509487153133496527),
                            INT64_C( -438383259974317574), INT64_C( 4679882440059701274),
                            INT64_C( 8594666725077939668), INT64_C(-2603844271228681340)),
      simde_mm512_set_epi64(INT64_C(  877966720713550779), INT64_C(-8757547308289839577),
                            INT64_C( 6619480224799141474), INT64_C( 3171924723684651500),
                            INT64_C( 1941135797030545610), INT64_C( 1935432241277000941),
                            INT64_C( 5390015454023535429), INT64_C(  -49705421380794940)),
      simde_mm512_set_epi64(INT64_C( 5390015454023535429), INT64_C( 5237671891022268183),
                            INT64_C(                   0), INT64_C(  877966720713550779),
                            INT64_C(                   0), INT64_C( 1935432241277000941),
                            INT64_C( 2811174252033921756), INT64_C(                   0)) },
    { UINT8_C(148),
      simde_mm512_set_epi64(INT64_C( 5640400914757694451), INT64_C( 3288787407719188513),
                            INT64_C( 6167294471968879452), INT64_C(-8553143016080257248),
                            INT64_C( 1191725626053358671), INT64_C( 2560034487176803702),
                            INT64_C(-4340183042637127984), INT64_C(  463621865143519269)),
      simde_mm512_set_epi64(INT64_C( 6286668337562607931), INT64_C( 1432089847019206822),
                            INT64_C(-2235254547542691893), INT64_C(-2975358417486477451),
                            INT64_C( 5974528986311566652), INT64_C( 4798128784982043356),
                            INT64_C(-3663239326212228984), INT64_C(-9199851098963784696)),
      simde_mm512_set_epi64(INT64_C(-3486865648830471282), INT64_C( 8151787653682140580),
                            INT64_C( -831601358278995789), INT64_C(-2800664419916301039),
                            INT64_C( 3280702275774868225), INT64_C(-4735905134864699368),
                            INT64_C( 7051416147935021095), INT64_C(-4824857292892203785)),
      simde_mm512_set_epi64(INT64_C( 3280702275774868225), INT64_C(                   0),
                            INT64_C(                   0), INT64_C( 6167294471968879452),
                            INT64_C(                   0), INT64_C(-2800664419916301039),
                            INT64_C(                   0), INT64_C(                   0)) },
    { UINT8_C(167),
      simde_mm512_set_epi64(INT64_C(-5234965963681749811), INT64_C(-5331803015084564567),
                            INT64_C(-2592115690296560951), INT64_C( 1248919004007478956),
                            INT64_C( 6138870327161964525), INT64_C(-3131027839562886620),
                            INT64_C(-2317534169293970587), INT64_C(  -35491302857917892)),
      simde_mm512_set_epi64(INT64_C(-7164378700336361334), INT64_C( 4351794567182281042),
                            INT64_C(-1716872434006574729), INT64_C( -689503347190866770),
                            INT64_C(-1389624339165317749), INT64_C(-8184083999390244234),
                            INT64_C( 8331479114169761131), INT64_C( 8817045194671758320)),
      simde_mm512_set_epi64(INT64_C( 8457250603347908949), INT64_C(-2879367942796632989),
                            INT64_C( 4447365578798205979), INT64_C( 6508361231067538121),
                            INT64_C(-2742037214038451026), INT64_C(  735886283373328205),
                            INT64_C(  709814645617696632), INT64_C( 6904524208941840952)),
      simde_mm512_set_epi64(INT64_C(  735886283373328205), INT64_C(                   0),
                            INT64_C(-5234965963681749811), INT64_C(                   0),
                            INT64_C(                   0), INT64_C(-5331803015084564567),
                            INT64_C(-2742037214038451026), INT64_C(  -35491302857917892)) },
    { UINT8_C(200),
      simde_mm512_set_epi64(INT64_C( 7927414333096918356), INT64_C(-6028737433755228757),
                            INT64_C(-6289085317177674471), INT64_C(-5541511610486147753),
                            INT64_C( 6531713794566454707), INT64_C( -446705336047418133),
                            INT64_C(-6709780755556058351), INT64_C( 2443726936750986290)),
      simde_mm512_set_epi64(INT64_C(-8286621218977708484), INT64_C(-7274138402675197655),
                            INT64_C( 7751882187628938139), INT64_C(-6483923961368987645),
                            INT64_C(-7861334054348205497), INT64_C( 1332497272334397574),
                            INT64_C(-5616284701672264206), INT64_C( 2669799685376652269)),
      simde_mm512_set_epi64(INT64_C(-8996724198675706045), INT64_C( 4531347139384149531),
                            INT64_C( 6846192780240638418), INT64_C( -574036823136878484),
                            INT64_C(  200988278415395979), INT64_C(-2971850709824830963),
                            INT64_C(-2133313091920417115), INT64_C( 4623597880832003711)),
      simde_mm512_set_epi64(INT64_C( -574036823136878484), INT64_C(-2133313091920417115),
                            INT64_C(                   0), INT64_C(                   0),
                            INT64_C( 7927414333096918356), INT64_C(                   0),
                            INT64_C(                   0), INT64_C(                   0)) },
    { UINT8_C(119),
      simde_mm512_set_epi64(INT64_C(-2554331370738443173), INT64_C( 3394005203063129217),
                            INT64_C(-2129862572478557053), INT64_C( 6740280704142266940),
                            INT64_C(-2107226359725098394), INT64_C(-4111796092278699383),
                            INT64_C(-7795021097560230286), INT64_C( -756190175563217595)),
      simde_mm512_set_epi64(INT64_C(-7150215929147729012), INT64_C( 4777590230543990164),
                            INT64_C(-7212709010936609343), INT64_C(-5423311652387614668),
                            INT64_C(-5446377680450598123), INT64_C( 6545920141858823590),
                            INT64_C(-6109676225565942508), INT64_C( 7950769636462343621)),
      simde_mm512_set_epi64(INT64_C(-2152884252876571606), INT64_C( 4319783394314419342),
                            INT64_C( 6791040176392068936), INT64_C(-5028583849026132210),
                            INT64_C(-4972499093922240541), INT64_C( 4727277852622403631),
                            INT64_C( 6634263876539878890), INT64_C( 8461555540128585842)),
      simde_mm512_set_epi64(INT64_C(                   0), INT64_C( 6740280704142266940),
                            INT64_C(-7795021097560230286), INT64_C( 6740280704142266940),
                            INT64_C(                   0), INT64_C( 3394005203063129217),
                            INT64_C( 6740280704142266940), INT64_C(-2129862572478557053)) },
    { UINT8_C( 57),
      simde_mm512_set_epi64(INT64_C( 1619450230631745145), INT64_C( -555839437247348892),
                            INT64_C(-4878720615548236791), INT64_C( 6675753852597875615),
                            INT64_C(-4352059852748908084), INT64_C(-8176892937465564490),
                            INT64_C(-1574129847889219250), INT64_C( 6774261992038495320)),
      simde_mm512_set_epi64(INT64_C(  -33031391515316701), INT64_C( 2632656663253186971),
                            INT64_C( 2501795714758146857), INT64_C( 2656255738409935115),
                            INT64_C( 6030400592505510024), INT64_C(-7025690618752263125),
                            INT64_C( 1113429035778363206), INT64_C( 5609096713955085291)),
      simde_mm512_set_epi64(INT64_C(-2900658911065724872), INT64_C(-6013736823954521010),
                            INT64_C(-8141101389788536661), INT64_C( 4749248201355274195),
                            INT64_C(-5391280202694098336), INT64_C( 4277556482249044385),
                            INT64_C( 5968346858124406788), INT64_C( 8575975742580047586)),
      simde_mm512_set_epi64(INT64_C(                   0), INT64_C(                   0),
                            INT64_C( 5968346858124406788), INT64_C(-5391280202694098336),
                            INT64_C( 8575975742580047586), INT64_C(                   0),
                            INT64_C(                   0), INT64_C(-5391280202694098336)) },
  };

  for (size_t i = 0 ; i < (sizeof(test_vec) / sizeof(test_vec[0])); i++) {
    simde__m512i r = simde_mm512_maskz_permutex2var_epi64(test_vec[i].k, test_vec[i].a, test_vec[i].idx, test_vec[i].b);
    simde_assert_m512i_i64(r, ==, test_vec[i].r);
  }

  return 0;
}

static int
test_simde_mm512_permutex2var_pd(SIMDE_MUNIT_TEST_ARGS) {
  const struct {
    simde__m512d a;
    simde__m512i idx;
    simde__m512d b;
    simde__m512d r;
  } test_vec[8] = {
    { simde_mm512_set_pd(SIMDE_FLOAT64_C(  799.30), SIMDE_FLOAT64_C( -576.01),
                         SIMDE_FLOAT64_C(  439.15), SIMDE_FLOAT64_C(  -28.15),
                         SIMDE_FLOAT64_C(  481.25), SIMDE_FLOAT64_C( -784.26),
                         SIMDE_FLOAT64_C(  549.03), SIMDE_FLOAT64_C(  582.53)),
      simde_mm512_set_epi64(INT64_C(-8115609027568940125), INT64_C( 3504612124823893047),
                            INT64_C(-7514888466798804666), INT64_C( 9113506312589344178),
                            INT64_C(-5948029684411535130), INT64_C(-4862378680423071053),
                            INT64_C( 7355766231574189317), INT64_C( -310150959079746096)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C( -563.83), SIMDE_FLOAT64_C(  938.85),
                         SIMDE_FLOAT64_C( -465.05), SIMDE_FLOAT64_C( -104.57),
                         SIMDE_FLOAT64_C( -431.26), SIMDE_FLOAT64_C(  -57.75),
                         SIMDE_FLOAT64_C(  438.04), SIMDE_FLOAT64_C(  729.46)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(  481.25), SIMDE_FLOAT64_C(  799.30),
                         SIMDE_FLOAT64_C( -576.01), SIMDE_FLOAT64_C( -784.26),
                         SIMDE_FLOAT64_C( -576.01), SIMDE_FLOAT64_C(  481.25),
                         SIMDE_FLOAT64_C(  439.15), SIMDE_FLOAT64_C(  582.53)) },
    { simde_mm512_set_pd(SIMDE_FLOAT64_C( -435.27), SIMDE_FLOAT64_C(  298.40),
                         SIMDE_FLOAT64_C(  -94.60), SIMDE_FLOAT64_C(  260.50),
                         SIMDE_FLOAT64_C(  -69.45), SIMDE_FLOAT64_C(   95.61),
                         SIMDE_FLOAT64_C( -688.01), SIMDE_FLOAT64_C(  931.17)),
      simde_mm512_set_epi64(INT64_C(-3094219001013742557), INT64_C(-3379016320921474793),
                            INT64_C( 7772273849745001049), INT64_C(-4229480058937372017),
                            INT64_C( 8318730560275653847), INT64_C(-2664412856586094061),
                            INT64_C( 2083707536546841162), INT64_C( 5404230241318444880)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(  193.01), SIMDE_FLOAT64_C(  -84.06),
                         SIMDE_FLOAT64_C(  208.07), SIMDE_FLOAT64_C(  834.28),
                         SIMDE_FLOAT64_C( -859.51), SIMDE_FLOAT64_C(   40.36),
                         SIMDE_FLOAT64_C( -743.10), SIMDE_FLOAT64_C(  442.76)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(  -69.45), SIMDE_FLOAT64_C( -435.27),
                         SIMDE_FLOAT64_C( -743.10), SIMDE_FLOAT64_C(  193.01),
                         SIMDE_FLOAT64_C( -435.27), SIMDE_FLOAT64_C(  -69.45),
                         SIMDE_FLOAT64_C(   40.36), SIMDE_FLOAT64_C(  931.17)) },
    { simde_mm512_set_pd(SIMDE_FLOAT64_C( -832.50), SIMDE_FLOAT64_C(  438.46),
                         SIMDE_FLOAT64_C(  336.35), SIMDE_FLOAT64_C(   99.21),
                         SIMDE_FLOAT64_C(  -38.88), SIMDE_FLOAT64_C(  218.73),
                         SIMDE_FLOAT64_C( -966.90), SIMDE_FLOAT64_C( -737.78)),
      simde_mm512_set_epi64(INT64_C( 7563354526679147255), INT64_C(-6952412028107066884),
                            INT64_C(-3077616107881632928), INT64_C(-2220298267656761827),
                            INT64_C( 2522518958303333112), INT64_C(-1668307566098600867),
                            INT64_C( 8306832211054389426), INT64_C(-4135341282024622606)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(  141.08), SIMDE_FLOAT64_C( -990.15),
                         SIMDE_FLOAT64_C( -887.47), SIMDE_FLOAT64_C( -396.24),
                         SIMDE_FLOAT64_C(   -2.60), SIMDE_FLOAT64_C(  165.88),
                         SIMDE_FLOAT64_C(  375.27), SIMDE_FLOAT64_C( -512.98)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C( -832.50), SIMDE_FLOAT64_C( -396.24),
                         SIMDE_FLOAT64_C( -737.78), SIMDE_FLOAT64_C( -887.47),
                         SIMDE_FLOAT64_C( -512.98), SIMDE_FLOAT64_C( -887.47),
                         SIMDE_FLOAT64_C(  218.73), SIMDE_FLOAT64_C(  218.73)) },
    { simde_mm512_set_pd(SIMDE_FLOAT64_C( -211.73), SIMDE_FLOAT64_C(  908.31),
                         SIMDE_FLOAT64_C( -144.11), SIMDE_FLOAT64_C( -343.92),
                         SIMDE_FLOAT64_C(  961.65), SIMDE_FLOAT64_C(  754.42),
                         SIMDE_FLOAT64_C( -432.97), SIMDE_FLOAT64_C(  164.52)),
      simde_mm512_set_epi64(INT64_C(  135432210503006619), INT64_C(-7059566968128636366),
                            INT64_C(-1295026765047609725), INT64_C( 5447800525707046939),
                            INT64_C( 1419500527032411112), INT64_C( 5424087511148175828),
                            INT64_C(-4780701435803039630), INT64_C( 6069825193561024149)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(  254.48), SIMDE_FLOAT64_C(  755.70),
                         SIMDE_FLOAT64_C( -363.93), SIMDE_FLOAT64_C(  789.10),
                         SIMDE_FLOAT64_C(  344.74), SIMDE_FLOAT64_C(  652.93),
                         SIMDE_FLOAT64_C(  184.91), SIMDE_FLOAT64_C( -455.33)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(  344.74), SIMDE_FLOAT64_C(  754.42),
                         SIMDE_FLOAT64_C(  961.65), SIMDE_FLOAT64_C(  344.74),
                         SIMDE_FLOAT64_C( -455.33), SIMDE_FLOAT64_C( -343.92),
                         SIMDE_FLOAT64_C(  754.42), SIMDE_FLOAT64_C( -144.11)) },
    { simde_mm512_set_pd(SIMDE_FLOAT64_C(  358.04), SIMDE_FLOAT64_C( -974.37),
                         SIMDE_FLOAT64_C( -342.76), SIMDE_FLOAT64_C( -698.47),
                         SIMDE_FLOAT64_C(  146.15), SIMDE_FLOAT64_C(  360.04),
                         SIMDE_FLOAT64_C(  134.15), SIMDE_FLOAT64_C( -376.86)),
      simde_mm512_set_epi64(INT64_C(-7778482448656032654), INT64_C(-7388935565641111344),
                            INT64_C( 2154583157079273400), INT64_C( 4649728279138736034),
                            INT64_C( 1896125478609903946), INT64_C( 6795120210135498653),
                            INT64_C(-8532964392806396349), INT64_C(-8044512602622188161)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(  197.25), SIMDE_FLOAT64_C(  348.19),
                         SIMDE_FLOAT64_C(  713.78), SIMDE_FLOAT64_C( -632.29),
                         SIMDE_FLOAT64_C( -382.22), SIMDE_FLOAT64_C( -320.26),
                         SIMDE_FLOAT64_C( -199.21), SIMDE_FLOAT64_C( -764.34)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(  360.04), SIMDE_FLOAT64_C( -376.86),
                         SIMDE_FLOAT64_C( -764.34), SIMDE_FLOAT64_C(  360.04),
                         SIMDE_FLOAT64_C( -320.26), SIMDE_FLOAT64_C(  713.78),
                         SIMDE_FLOAT64_C(  146.15), SIMDE_FLOAT64_C(  197.25)) },
    { simde_mm512_set_pd(SIMDE_FLOAT64_C(  374.01), SIMDE_FLOAT64_C( -829.82),
                         SIMDE_FLOAT64_C( -372.09), SIMDE_FLOAT64_C( -693.82),
                         SIMDE_FLOAT64_C(  763.12), SIMDE_FLOAT64_C(  797.99),
                         SIMDE_FLOAT64_C(  291.55), SIMDE_FLOAT64_C(  -93.41)),
      simde_mm512_set_epi64(INT64_C( 2330675318709913935), INT64_C( 8512876982035459145),
                            INT64_C( -754385814369639096), INT64_C(-5873166547629617678),
                            INT64_C(-8313572030703954107), INT64_C( 8197482817575228316),
                            INT64_C( 7734796813438689885), INT64_C(-7308014241195865956)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(  -65.54), SIMDE_FLOAT64_C(  852.70),
                         SIMDE_FLOAT64_C(  316.87), SIMDE_FLOAT64_C(  303.57),
                         SIMDE_FLOAT64_C(  151.19), SIMDE_FLOAT64_C(   17.85),
                         SIMDE_FLOAT64_C(  280.96), SIMDE_FLOAT64_C( -966.13)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(  -65.54), SIMDE_FLOAT64_C(  280.96),
                         SIMDE_FLOAT64_C( -966.13), SIMDE_FLOAT64_C(  797.99),
                         SIMDE_FLOAT64_C( -372.09), SIMDE_FLOAT64_C(  303.57),
                         SIMDE_FLOAT64_C(  316.87), SIMDE_FLOAT64_C(  303.57)) },
    { simde_mm512_set_pd(SIMDE_FLOAT64_C(  192.60), SIMDE_FLOAT64_C( -766.97),
                         SIMDE_FLOAT64_C( -268.82), SIMDE_FLOAT64_C(  379.62),
                         SIMDE_FLOAT64_C(  889.99), SIMDE_FLOAT64_C(  778.00),
                         SIMDE_FLOAT64_C(  136.45), SIMDE_FLOAT64_C( -745.44)),
      simde_mm512_set_epi64(INT64_C(-5841170484671274964), INT64_C(-3543508984518726324),
                            INT64_C( 3010243785522476560), INT64_C(-1544427551515059156),
                            INT64_C(-6824560769606762223), INT64_C( 5419183893290153987),
                            INT64_C(-6963147146169039734), INT64_C(  796151810828840161)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(   79.71), SIMDE_FLOAT64_C( -761.86),
                         SIMDE_FLOAT64_C(  699.75), SIMDE_FLOAT64_C(  -94.00),
                         SIMDE_FLOAT64_C(  852.56), SIMDE_FLOAT64_C( -583.72),
                         SIMDE_FLOAT64_C(   64.51), SIMDE_FLOAT64_C(  598.44)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(  -94.00), SIMDE_FLOAT64_C(  -94.00),
                         SIMDE_FLOAT64_C( -745.44), SIMDE_FLOAT64_C(  -94.00),
                         SIMDE_FLOAT64_C(  136.45), SIMDE_FLOAT64_C(  889.99),
                         SIMDE_FLOAT64_C( -583.72), SIMDE_FLOAT64_C(  136.45)) },
    { simde_mm512_set_pd(SIMDE_FLOAT64_C(  910.96), SIMDE_FLOAT64_C(  161.71),
                         SIMDE_FLOAT64_C(  998.55), SIMDE_FLOAT64_C( -146.06),
                         SIMDE_FLOAT64_C( -469.94), SIMDE_FLOAT64_C(  728.29),
                         SIMDE_FLOAT64_C( -146.78), SIMDE_FLOAT64_C( -162.79)),
      simde_mm512_set_epi64(INT64_C( 7017505342718424326), INT64_C( 7336144214089986511),
                            INT64_C(-7372811814600044225), INT64_C( 3369678464815021090),
                            INT64_C(-3624005186939786961), INT64_C( 3053727983599056138),
                            INT64_C( 1044677486690381786), INT64_C( 7246985488966277586)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C( -157.21), SIMDE_FLOAT64_C(  742.16),
                         SIMDE_FLOAT64_C( -664.02), SIMDE_FLOAT64_C( -706.70),
                         SIMDE_FLOAT64_C( -128.86), SIMDE_FLOAT64_C( -767.59),
                         SIMDE_FLOAT64_C( -790.53), SIMDE_FLOAT64_C(  953.27)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(  161.71), SIMDE_FLOAT64_C( -157.21),
                         SIMDE_FLOAT64_C( -157.21), SIMDE_FLOAT64_C(  728.29),
                         SIMDE_FLOAT64_C( -157.21), SIMDE_FLOAT64_C( -767.59),
                         SIMDE_FLOAT64_C( -767.59), SIMDE_FLOAT64_C(  728.29)) },
  };

  for (size_t i = 0 ; i < (sizeof(test_vec) / sizeof(test_vec[0])); i++) {
    simde__m512d r = simde_mm512_permutex2var_pd(test_vec[i].a, test_vec[i].idx, test_vec[i].b);
    simde_assert_m512d_close(r, test_vec[i].r, 1);
  }

  return 0;
}

static int
test_simde_mm512_mask_permutex2var_pd(SIMDE_MUNIT_TEST_ARGS) {
  const struct {
    simde__m512d a;
    simde__mmask8 k;
    simde__m512i idx;
    simde__m512d b;
    simde__m512d r;
  } test_vec[8] = {
    { simde_mm512_set_pd(SIMDE_FLOAT64_C(  160.98), SIMDE_FLOAT64_C(  391.82),
                         SIMDE_FLOAT64_C( -569.99), SIMDE_FLOAT64_C( -327.63),
                         SIMDE_FLOAT64_C( -172.36), SIMDE_FLOAT64_C(  393.53),
                         SIMDE_FLOAT64_C(   36.69), SIMDE_FLOAT64_C( -135.52)),
      UINT8_C( 63),
      simde_mm512_set_epi64(INT64_C(-4767707706458520415), INT64_C(-7083171014951853588),
                            INT64_C(-2076988212358998594), INT64_C( 3698505898575972461),
                            INT64_C(-8586603972668500699), INT64_C( 7848938818320954984),
                            INT64_C(-7002500096438875648), INT64_C( 1477571573764517782)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(  522.06), SIMDE_FLOAT64_C( -932.28),
                         SIMDE_FLOAT64_C(  600.12), SIMDE_FLOAT64_C( -491.12),
                         SIMDE_FLOAT64_C( -139.11), SIMDE_FLOAT64_C( -268.86),
                         SIMDE_FLOAT64_C(  -71.72), SIMDE_FLOAT64_C(   98.47)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(  160.98), SIMDE_FLOAT64_C(  391.82),
                         SIMDE_FLOAT64_C( -932.28), SIMDE_FLOAT64_C(  600.12),
                         SIMDE_FLOAT64_C( -569.99), SIMDE_FLOAT64_C(   98.47),
                         SIMDE_FLOAT64_C( -135.52), SIMDE_FLOAT64_C(  391.82)) },
    { simde_mm512_set_pd(SIMDE_FLOAT64_C(  571.79), SIMDE_FLOAT64_C(  675.92),
                         SIMDE_FLOAT64_C(  490.41), SIMDE_FLOAT64_C(   47.59),
                         SIMDE_FLOAT64_C( -895.71), SIMDE_FLOAT64_C( -736.92),
                         SIMDE_FLOAT64_C(  283.06), SIMDE_FLOAT64_C( -333.94)),
      UINT8_C(251),
      simde_mm512_set_epi64(INT64_C( 7391005387705442660), INT64_C(-5091463632259113685),
                            INT64_C(  685405269785004780), INT64_C(-2602517860068074949),
                            INT64_C( 4704994953943345443), INT64_C( 8877610218385468208),
                            INT64_C( 5776984527519295337), INT64_C( 6526937450820584225)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C( -203.04), SIMDE_FLOAT64_C(  -80.71),
                         SIMDE_FLOAT64_C(  632.01), SIMDE_FLOAT64_C(  456.89),
                         SIMDE_FLOAT64_C(   51.33), SIMDE_FLOAT64_C( -868.59),
                         SIMDE_FLOAT64_C( -921.00), SIMDE_FLOAT64_C( -471.60)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(   47.59), SIMDE_FLOAT64_C(   51.33),
                         SIMDE_FLOAT64_C(  456.89), SIMDE_FLOAT64_C(   51.33),
                         SIMDE_FLOAT64_C( -895.71), SIMDE_FLOAT64_C( -736.92),
                         SIMDE_FLOAT64_C( -921.00), SIMDE_FLOAT64_C(  283.06)) },
    { simde_mm512_set_pd(SIMDE_FLOAT64_C(  670.52), SIMDE_FLOAT64_C(  149.72),
                         SIMDE_FLOAT64_C(  213.24), SIMDE_FLOAT64_C( -577.36),
                         SIMDE_FLOAT64_C(  957.37), SIMDE_FLOAT64_C( -934.92),
                         SIMDE_FLOAT64_C( -657.02), SIMDE_FLOAT64_C( -629.37)),
      UINT8_C( 19),
      simde_mm512_set_epi64(INT64_C( 1455933536394832297), INT64_C( -840828676201867557),
                            INT64_C( 6310833464661060096), INT64_C( 8429580363859954742),
                            INT64_C( 5406280044045291975), INT64_C(-2284955492954404973),
                            INT64_C(-3603637419527123210), INT64_C(-1117409850830928520)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(  586.29), SIMDE_FLOAT64_C( -760.88),
                         SIMDE_FLOAT64_C( -617.12), SIMDE_FLOAT64_C( -751.58),
                         SIMDE_FLOAT64_C(  907.23), SIMDE_FLOAT64_C( -359.60),
                         SIMDE_FLOAT64_C( -213.75), SIMDE_FLOAT64_C(  403.00)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(  670.52), SIMDE_FLOAT64_C(  149.72),
                         SIMDE_FLOAT64_C(  213.24), SIMDE_FLOAT64_C(  149.72),
                         SIMDE_FLOAT64_C(  957.37), SIMDE_FLOAT64_C( -934.92),
                         SIMDE_FLOAT64_C(  149.72), SIMDE_FLOAT64_C(  403.00)) },
    { simde_mm512_set_pd(SIMDE_FLOAT64_C(  918.52), SIMDE_FLOAT64_C( -422.76),
                         SIMDE_FLOAT64_C( -433.33), SIMDE_FLOAT64_C(   48.49),
                         SIMDE_FLOAT64_C(  799.57), SIMDE_FLOAT64_C( -820.22),
                         SIMDE_FLOAT64_C( -959.11), SIMDE_FLOAT64_C(  268.99)),
      UINT8_C(132),
      simde_mm512_set_epi64(INT64_C(-4670296842224865750), INT64_C(-8736438908262001915),
                            INT64_C(-1516874692875012272), INT64_C( 2654080637722702840),
                            INT64_C(-4444585746033374017), INT64_C( 7620312646179506248),
                            INT64_C(-4730811392556899367), INT64_C(-7555925455226975890)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C( -663.74), SIMDE_FLOAT64_C(  179.29),
                         SIMDE_FLOAT64_C(  989.70), SIMDE_FLOAT64_C( -695.21),
                         SIMDE_FLOAT64_C( -786.23), SIMDE_FLOAT64_C(  873.30),
                         SIMDE_FLOAT64_C(  241.45), SIMDE_FLOAT64_C( -432.13)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(  873.30), SIMDE_FLOAT64_C( -422.76),
                         SIMDE_FLOAT64_C( -433.33), SIMDE_FLOAT64_C(   48.49),
                         SIMDE_FLOAT64_C(  799.57), SIMDE_FLOAT64_C( -432.13),
                         SIMDE_FLOAT64_C( -959.11), SIMDE_FLOAT64_C(  268.99)) },
    { simde_mm512_set_pd(SIMDE_FLOAT64_C( -904.81), SIMDE_FLOAT64_C(   50.50),
                         SIMDE_FLOAT64_C( -282.31), SIMDE_FLOAT64_C( -656.10),
                         SIMDE_FLOAT64_C( -789.54), SIMDE_FLOAT64_C( -790.16),
                         SIMDE_FLOAT64_C( -415.61), SIMDE_FLOAT64_C(  994.61)),
      UINT8_C( 37),
      simde_mm512_set_epi64(INT64_C( 2001511420457827007), INT64_C( 8280910196874944184),
                            INT64_C( -368934386460614235), INT64_C(-9011857488067354178),
                            INT64_C( 5578921037540219940), INT64_C(-7880186302232587827),
                            INT64_C( 7848707034806784644), INT64_C(-7246117184140796511)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(  280.87), SIMDE_FLOAT64_C(  380.83),
                         SIMDE_FLOAT64_C( -236.67), SIMDE_FLOAT64_C( -211.91),
                         SIMDE_FLOAT64_C( -925.76), SIMDE_FLOAT64_C( -915.62),
                         SIMDE_FLOAT64_C(  -30.05), SIMDE_FLOAT64_C(  -70.79)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C( -904.81), SIMDE_FLOAT64_C(   50.50),
                         SIMDE_FLOAT64_C( -282.31), SIMDE_FLOAT64_C( -656.10),
                         SIMDE_FLOAT64_C( -789.54), SIMDE_FLOAT64_C( -236.67),
                         SIMDE_FLOAT64_C( -415.61), SIMDE_FLOAT64_C( -415.61)) },
    { simde_mm512_set_pd(SIMDE_FLOAT64_C( -318.40), SIMDE_FLOAT64_C( -844.73),
                         SIMDE_FLOAT64_C(  757.65), SIMDE_FLOAT64_C(  677.41),
                         SIMDE_FLOAT64_C( -352.24), SIMDE_FLOAT64_C( -479.79),
                         SIMDE_FLOAT64_C(  602.83), SIMDE_FLOAT64_C(    2.55)),
      UINT8_C(218),
      simde_mm512_set_epi64(INT64_C( 2056379472574346663), INT64_C(-3486865648830471282),
                            INT64_C( 8151787653682140580), INT64_C( -831601358278995789),
                            INT64_C(-2800664419916301039), INT64_C( 3280702275774868225),
                            INT64_C(-4735905134864699368), INT64_C( 7051416147935021095)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(  915.68), SIMDE_FLOAT64_C(  -53.79),
                         SIMDE_FLOAT64_C(  703.31), SIMDE_FLOAT64_C(  930.79),
                         SIMDE_FLOAT64_C(  111.33), SIMDE_FLOAT64_C( -176.75),
                         SIMDE_FLOAT64_C( -316.94), SIMDE_FLOAT64_C(  639.68)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C( -318.40), SIMDE_FLOAT64_C(  -53.79),
                         SIMDE_FLOAT64_C(  757.65), SIMDE_FLOAT64_C( -352.24),
                         SIMDE_FLOAT64_C(  602.83), SIMDE_FLOAT64_C( -479.79),
                         SIMDE_FLOAT64_C(  639.68), SIMDE_FLOAT64_C(    2.55)) },
    { simde_mm512_set_pd(SIMDE_FLOAT64_C(  432.42), SIMDE_FLOAT64_C(  421.92),
                         SIMDE_FLOAT64_C(  718.96), SIMDE_FLOAT64_C( -864.59),
                         SIMDE_FLOAT64_C( -334.42), SIMDE_FLOAT64_C(  660.53),
                         SIMDE_FLOAT64_C(  748.73), SIMDE_FLOAT64_C(  996.15)),
      UINT8_C(227),
      simde_mm512_set_epi64(INT64_C( 6904524208941840952), INT64_C(-7164378700336361334),
                            INT64_C( 4351794567182281042), INT64_C(-1716872434006574729),
                            INT64_C( -689503347190866770), INT64_C(-1389624339165317749),
                            INT64_C(-8184083999390244234), INT64_C( 8331479114169761131)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(  601.37), SIMDE_FLOAT64_C( -660.24),
                         SIMDE_FLOAT64_C( -675.56), SIMDE_FLOAT64_C( -194.09),
                         SIMDE_FLOAT64_C(  149.22), SIMDE_FLOAT64_C(  161.52),
                         SIMDE_FLOAT64_C(  632.78), SIMDE_FLOAT64_C(  346.90)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(  346.90), SIMDE_FLOAT64_C(  161.52),
                         SIMDE_FLOAT64_C(  660.53), SIMDE_FLOAT64_C( -864.59),
                         SIMDE_FLOAT64_C( -334.42), SIMDE_FLOAT64_C(  660.53),
                         SIMDE_FLOAT64_C(  421.92), SIMDE_FLOAT64_C(  149.22)) },
    { simde_mm512_set_pd(SIMDE_FLOAT64_C(    5.84), SIMDE_FLOAT64_C(   39.14),
                         SIMDE_FLOAT64_C(  124.68), SIMDE_FLOAT64_C( -448.70),
                         SIMDE_FLOAT64_C(  122.69), SIMDE_FLOAT64_C(   65.13),
                         SIMDE_FLOAT64_C( -972.27), SIMDE_FLOAT64_C(  628.22)),
      UINT8_C(179),
      simde_mm512_set_epi64(INT64_C( 2669799685376652269), INT64_C( 7927414333096918356),
                            INT64_C(-6028737433755228757), INT64_C(-6289085317177674471),
                            INT64_C(-5541511610486147753), INT64_C( 6531713794566454707),
                            INT64_C( -446705336047418133), INT64_C(-6709780755556058351)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(  196.06), SIMDE_FLOAT64_C(  -83.06),
                         SIMDE_FLOAT64_C(  687.82), SIMDE_FLOAT64_C( -517.82),
                         SIMDE_FLOAT64_C( -294.36), SIMDE_FLOAT64_C(  702.71),
                         SIMDE_FLOAT64_C( -920.22), SIMDE_FLOAT64_C( -923.04)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(  687.82), SIMDE_FLOAT64_C(   39.14),
                         SIMDE_FLOAT64_C( -294.36), SIMDE_FLOAT64_C( -920.22),
                         SIMDE_FLOAT64_C(  122.69), SIMDE_FLOAT64_C(   65.13),
                         SIMDE_FLOAT64_C( -294.36), SIMDE_FLOAT64_C( -972.27)) },
  };

  for (size_t i = 0 ; i < (sizeof(test_vec) / sizeof(test_vec[0])); i++) {
    simde__m512d r = simde_mm512_mask_permutex2var_pd(test_vec[i].a, test_vec[i].k, test_vec[i].idx, test_vec[i].b);
    simde_assert_m512d_close(r, test_vec[i].r, 1);
  }

  return 0;
}

static int
test_simde_mm512_mask2_permutex2var_pd(SIMDE_MUNIT_TEST_ARGS) {
  const struct {
    simde__m512d a;
    simde__m512i idx;
    simde__mmask8 k;
    simde__m512d b;
    simde__m512d r;
  } test_vec[8] = {
    { simde_mm512_set_pd(SIMDE_FLOAT64_C(  824.77), SIMDE_FLOAT64_C(  172.30),
                         SIMDE_FLOAT64_C( -660.39), SIMDE_FLOAT64_C( -605.88),
                         SIMDE_FLOAT64_C( -689.22), SIMDE_FLOAT64_C(  -25.12),
                         SIMDE_FLOAT64_C(  921.58), SIMDE_FLOAT64_C(  433.31)),
      simde_mm512_set_epi64(INT64_C( 4651624766755653550), INT64_C( 4649285006011746222),
                            INT64_C( 4650293302154881925), INT64_C( 4621571419609466143),
                            INT64_C(-4573265035950104248), INT64_C( 4648839571861101609),
                            INT64_C(-4574838041265265705), INT64_C(-4573884896625379246)),
      UINT8_C(198),
      simde_mm512_set_pd(SIMDE_FLOAT64_C( -867.63), SIMDE_FLOAT64_C(  -65.75),
                         SIMDE_FLOAT64_C(  137.16), SIMDE_FLOAT64_C(  -73.36),
                         SIMDE_FLOAT64_C( -396.53), SIMDE_FLOAT64_C( -409.15),
                         SIMDE_FLOAT64_C(  672.29), SIMDE_FLOAT64_C(  992.21)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(  -65.75), SIMDE_FLOAT64_C(  -65.75),
                         SIMDE_FLOAT64_C(  805.14), SIMDE_FLOAT64_C(    9.56),
                         SIMDE_FLOAT64_C( -783.96), SIMDE_FLOAT64_C(  672.29),
                         SIMDE_FLOAT64_C(  824.77), SIMDE_FLOAT64_C( -713.49)) },
    { simde_mm512_set_pd(SIMDE_FLOAT64_C(  784.21), SIMDE_FLOAT64_C(  732.58),
                         SIMDE_FLOAT64_C( -862.95), SIMDE_FLOAT64_C( -241.44),
                         SIMDE_FLOAT64_C( -318.72), SIMDE_FLOAT64_C(  630.11),
                         SIMDE_FLOAT64_C( -645.10), SIMDE_FLOAT64_C( -230.29)),
      simde_mm512_set_epi64(INT64_C( 4646939703729234903), INT64_C( 4639186123652018995),
                            INT64_C( 4627437358124116214), INT64_C(-4583138122601951396),
                            INT64_C(-4586200570348563333), INT64_C(-4573672822822613811),
                            INT64_C(-4584207727513451889), INT64_C(-4573688391907263119)),
      UINT8_C(222),
      simde_mm512_set_pd(SIMDE_FLOAT64_C( -947.87), SIMDE_FLOAT64_C(  877.96),
                         SIMDE_FLOAT64_C(  184.43), SIMDE_FLOAT64_C(  375.34),
                         SIMDE_FLOAT64_C(  389.76), SIMDE_FLOAT64_C(  437.16),
                         SIMDE_FLOAT64_C( -638.93), SIMDE_FLOAT64_C(  773.45)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(  784.21), SIMDE_FLOAT64_C( -318.72),
                         SIMDE_FLOAT64_C(   23.96), SIMDE_FLOAT64_C(  375.34),
                         SIMDE_FLOAT64_C(  389.76), SIMDE_FLOAT64_C(  184.43),
                         SIMDE_FLOAT64_C( -947.87), SIMDE_FLOAT64_C( -735.83)) },
    { simde_mm512_set_pd(SIMDE_FLOAT64_C(  853.65), SIMDE_FLOAT64_C(  495.16),
                         SIMDE_FLOAT64_C( -991.61), SIMDE_FLOAT64_C(  120.75),
                         SIMDE_FLOAT64_C( -451.25), SIMDE_FLOAT64_C( -719.73),
                         SIMDE_FLOAT64_C( -295.20), SIMDE_FLOAT64_C(  405.97)),
      simde_mm512_set_epi64(INT64_C(-4571849568660970537), INT64_C(-4573624268389131223),
                            INT64_C( 4649833882216332001), INT64_C(-4576057267719073956),
                            INT64_C( 4639950680057509315), INT64_C( 4648192795141178655),
                            INT64_C(-4582991755614061855), INT64_C(-4572918030080378143)),
      UINT8_C( 61),
      simde_mm512_set_pd(SIMDE_FLOAT64_C( -475.08), SIMDE_FLOAT64_C(  601.08),
                         SIMDE_FLOAT64_C( -590.62), SIMDE_FLOAT64_C(  446.98),
                         SIMDE_FLOAT64_C(   51.90), SIMDE_FLOAT64_C(  597.18),
                         SIMDE_FLOAT64_C(  -19.20), SIMDE_FLOAT64_C( -536.51)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C( -944.88), SIMDE_FLOAT64_C( -743.12),
                         SIMDE_FLOAT64_C( -295.20), SIMDE_FLOAT64_C(  446.98),
                         SIMDE_FLOAT64_C( -451.25), SIMDE_FLOAT64_C( -475.08),
                         SIMDE_FLOAT64_C( -175.54), SIMDE_FLOAT64_C( -295.20)) },
    { simde_mm512_set_pd(SIMDE_FLOAT64_C(  985.03), SIMDE_FLOAT64_C(  291.60),
                         SIMDE_FLOAT64_C( -732.66), SIMDE_FLOAT64_C(  106.36),
                         SIMDE_FLOAT64_C(  883.40), SIMDE_FLOAT64_C(    8.63),
                         SIMDE_FLOAT64_C(  178.77), SIMDE_FLOAT64_C( -118.91)),
      simde_mm512_set_epi64(INT64_C(-4574823439750848840), INT64_C(-4582104757593702400),
                            INT64_C(-4583336210616811520), INT64_C(-4580375093861815419),
                            INT64_C(-4577720432987713044), INT64_C( 4649427062914054881),
                            INT64_C(-4573213578805924332), INT64_C(-4581494660581682053)),
      UINT8_C(193),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(  557.43), SIMDE_FLOAT64_C(  547.40),
                         SIMDE_FLOAT64_C( -994.90), SIMDE_FLOAT64_C( -527.55),
                         SIMDE_FLOAT64_C(  290.76), SIMDE_FLOAT64_C( -839.12),
                         SIMDE_FLOAT64_C(  702.81), SIMDE_FLOAT64_C( -129.54)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C( -129.54), SIMDE_FLOAT64_C( -118.91),
                         SIMDE_FLOAT64_C( -165.75), SIMDE_FLOAT64_C( -249.91),
                         SIMDE_FLOAT64_C( -394.72), SIMDE_FLOAT64_C(  706.66),
                         SIMDE_FLOAT64_C( -789.81), SIMDE_FLOAT64_C(  290.76)) },
    { simde_mm512_set_pd(SIMDE_FLOAT64_C( -733.70), SIMDE_FLOAT64_C(  -80.62),
                         SIMDE_FLOAT64_C(  200.37), SIMDE_FLOAT64_C( -613.00),
                         SIMDE_FLOAT64_C( -530.37), SIMDE_FLOAT64_C(  940.29),
                         SIMDE_FLOAT64_C( -837.65), SIMDE_FLOAT64_C( -127.38)),
      simde_mm512_set_epi64(INT64_C( 4651252164255232819), INT64_C( 4644570915878354289),
                            INT64_C( 4649897126125161677), INT64_C( 4645692593660546253),
                            INT64_C( 4644974304704352748), INT64_C(-4606788353832622490),
                            INT64_C( 4645887339160057938), INT64_C( 4635970272043099750)),
      UINT8_C( 81),
      simde_mm512_set_pd(SIMDE_FLOAT64_C( -742.43), SIMDE_FLOAT64_C(  171.75),
                         SIMDE_FLOAT64_C(  896.83), SIMDE_FLOAT64_C(  381.31),
                         SIMDE_FLOAT64_C( -468.20), SIMDE_FLOAT64_C( -182.38),
                         SIMDE_FLOAT64_C( -642.39), SIMDE_FLOAT64_C( -912.51)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(  914.15), SIMDE_FLOAT64_C( -837.65),
                         SIMDE_FLOAT64_C(  760.10), SIMDE_FLOAT64_C(  896.83),
                         SIMDE_FLOAT64_C(  356.22), SIMDE_FLOAT64_C(   -4.35),
                         SIMDE_FLOAT64_C(  408.12), SIMDE_FLOAT64_C(  -80.62)) },
    { simde_mm512_set_pd(SIMDE_FLOAT64_C(  566.99), SIMDE_FLOAT64_C( -242.78),
                         SIMDE_FLOAT64_C(  250.83), SIMDE_FLOAT64_C( -818.85),
                         SIMDE_FLOAT64_C( -959.57), SIMDE_FLOAT64_C(  925.03),
                         SIMDE_FLOAT64_C( -644.70), SIMDE_FLOAT64_C( -800.67)),
      simde_mm512_set_epi64(INT64_C(-4573614680647737016), INT64_C(-4572547362720422298),
                            INT64_C(-4579978038222792950), INT64_C(-4573175139879417283),
                            INT64_C(-4572733488048772219), INT64_C(-4575215833460569539),
                            INT64_C(-4582412972693200568), INT64_C(-4572092340828383478)),
      UINT8_C(145),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(  519.90), SIMDE_FLOAT64_C( -645.40),
                         SIMDE_FLOAT64_C( -442.29), SIMDE_FLOAT64_C( -336.85),
                         SIMDE_FLOAT64_C( -152.85), SIMDE_FLOAT64_C( -363.79),
                         SIMDE_FLOAT64_C( -614.03), SIMDE_FLOAT64_C( -923.13)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C( -923.13), SIMDE_FLOAT64_C( -865.55),
                         SIMDE_FLOAT64_C( -266.39), SIMDE_FLOAT64_C( -442.29),
                         SIMDE_FLOAT64_C( -844.39), SIMDE_FLOAT64_C( -562.18),
                         SIMDE_FLOAT64_C( -191.99), SIMDE_FLOAT64_C( -363.79)) },
    { simde_mm512_set_pd(SIMDE_FLOAT64_C( -748.43), SIMDE_FLOAT64_C(  -53.25),
                         SIMDE_FLOAT64_C( -132.01), SIMDE_FLOAT64_C( -767.78),
                         SIMDE_FLOAT64_C(   -9.36), SIMDE_FLOAT64_C( -226.72),
                         SIMDE_FLOAT64_C( -661.68), SIMDE_FLOAT64_C( -655.84)),
      simde_mm512_set_epi64(INT64_C( 4636324226826313400), INT64_C(-4582681781295959245),
                            INT64_C(-4588763400011513856), INT64_C(-4578054508600696504),
                            INT64_C( 4643285630765949256), INT64_C(-4577793440559797371),
                            INT64_C( 4641318648444323103), INT64_C(-4573035194039433953)),
      UINT8_C( 44),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(  845.75), SIMDE_FLOAT64_C(   43.86),
                         SIMDE_FLOAT64_C( -170.77), SIMDE_FLOAT64_C(  428.74),
                         SIMDE_FLOAT64_C(  695.01), SIMDE_FLOAT64_C( -702.60),
                         SIMDE_FLOAT64_C( -231.45), SIMDE_FLOAT64_C( -416.99)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(   94.13), SIMDE_FLOAT64_C( -184.35),
                         SIMDE_FLOAT64_C( -655.84), SIMDE_FLOAT64_C( -375.73),
                         SIMDE_FLOAT64_C( -416.99), SIMDE_FLOAT64_C( -132.01),
                         SIMDE_FLOAT64_C(  202.21), SIMDE_FLOAT64_C( -810.09)) },
    { simde_mm512_set_pd(SIMDE_FLOAT64_C( -797.03), SIMDE_FLOAT64_C( -987.00),
                         SIMDE_FLOAT64_C(  679.83), SIMDE_FLOAT64_C( -872.18),
                         SIMDE_FLOAT64_C(   58.63), SIMDE_FLOAT64_C( -398.86),
                         SIMDE_FLOAT64_C( -816.03), SIMDE_FLOAT64_C(  667.01)),
      simde_mm512_set_epi64(INT64_C(-4573879706930496143), INT64_C(-4575599870881919140),
                            INT64_C( 4646298820391636828), INT64_C( 4636687329546270147),
                            INT64_C( 4651451571684046275), INT64_C(-4586695966307574088),
                            INT64_C(-4575178010260574044), INT64_C( 4649362675513132319)),
      UINT8_C( 86),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(  312.31), SIMDE_FLOAT64_C(  578.29),
                         SIMDE_FLOAT64_C(  419.61), SIMDE_FLOAT64_C( -753.42),
                         SIMDE_FLOAT64_C(  687.05), SIMDE_FLOAT64_C(  241.87),
                         SIMDE_FLOAT64_C(  -80.26), SIMDE_FLOAT64_C( -667.68)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C( -714.08), SIMDE_FLOAT64_C( -753.42),
                         SIMDE_FLOAT64_C(  431.51), SIMDE_FLOAT64_C(   58.63),
                         SIMDE_FLOAT64_C(  936.82), SIMDE_FLOAT64_C( -667.68),
                         SIMDE_FLOAT64_C( -872.18), SIMDE_FLOAT64_C(  699.34)) },
  };

  for (size_t i = 0 ; i < (sizeof(test_vec) / sizeof(test_vec[0])); i++) {
    simde__m512d r = simde_mm512_mask2_permutex2var_pd(test_vec[i].a, test_vec[i].idx, test_vec[i].k, test_vec[i].b);
    simde_assert_m512d_close(r, test_vec[i].r, 1);
  }

  return 0;
}

static int
test_simde_mm512_maskz_permutex2var_pd(SIMDE_MUNIT_TEST_ARGS) {
  const struct {
    simde__mmask8 k;
    simde__m512d a;
    simde__m512i idx;
    simde__m512d b;
    simde__m512d r;
  } test_vec[8] = {
    { UINT8_C( 63),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(  160.98), SIMDE_FLOAT64_C(  391.82),
                         SIMDE_FLOAT64_C( -569.99), SIMDE_FLOAT64_C( -327.63),
                         SIMDE_FLOAT64_C( -172.36), SIMDE_FLOAT64_C(  393.53),
                         SIMDE_FLOAT64_C(   36.69), SIMDE_FLOAT64_C( -135.52)),
      simde_mm512_set_epi64(INT64_C(-4767707706458520415), INT64_C(-7083171014951853588),
                            INT64_C(-2076988212358998594), INT64_C( 3698505898575972461),
                            INT64_C(-8586603972668500699), INT64_C( 7848938818320954984),
                            INT64_C(-7002500096438875648), INT64_C( 1477571573764517782)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(  522.06), SIMDE_FLOAT64_C( -932.28),
                         SIMDE_FLOAT64_C(  600.12), SIMDE_FLOAT64_C( -491.12),
                         SIMDE_FLOAT64_C( -139.11), SIMDE_FLOAT64_C( -268.86),
                         SIMDE_FLOAT64_C(  -71.72), SIMDE_FLOAT64_C(   98.47)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(    0.00), SIMDE_FLOAT64_C(    0.00),
                         SIMDE_FLOAT64_C( -932.28), SIMDE_FLOAT64_C(  600.12),
                         SIMDE_FLOAT64_C( -569.99), SIMDE_FLOAT64_C(   98.47),
                         SIMDE_FLOAT64_C( -135.52), SIMDE_FLOAT64_C(  391.82)) },
    { UINT8_C(251),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(  571.79), SIMDE_FLOAT64_C(  675.92),
                         SIMDE_FLOAT64_C(  490.41), SIMDE_FLOAT64_C(   47.59),
                         SIMDE_FLOAT64_C( -895.71), SIMDE_FLOAT64_C( -736.92),
                         SIMDE_FLOAT64_C(  283.06), SIMDE_FLOAT64_C( -333.94)),
      simde_mm512_set_epi64(INT64_C( 7391005387705442660), INT64_C(-5091463632259113685),
                            INT64_C(  685405269785004780), INT64_C(-2602517860068074949),
                            INT64_C( 4704994953943345443), INT64_C( 8877610218385468208),
                            INT64_C( 5776984527519295337), INT64_C( 6526937450820584225)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C( -203.04), SIMDE_FLOAT64_C(  -80.71),
                         SIMDE_FLOAT64_C(  632.01), SIMDE_FLOAT64_C(  456.89),
                         SIMDE_FLOAT64_C(   51.33), SIMDE_FLOAT64_C( -868.59),
                         SIMDE_FLOAT64_C( -921.00), SIMDE_FLOAT64_C( -471.60)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(   47.59), SIMDE_FLOAT64_C(   51.33),
                         SIMDE_FLOAT64_C(  456.89), SIMDE_FLOAT64_C(   51.33),
                         SIMDE_FLOAT64_C( -895.71), SIMDE_FLOAT64_C(    0.00),
                         SIMDE_FLOAT64_C( -921.00), SIMDE_FLOAT64_C(  283.06)) },
    { UINT8_C( 19),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(  670.52), SIMDE_FLOAT64_C(  149.72),
                         SIMDE_FLOAT64_C(  213.24), SIMDE_FLOAT64_C( -577.36),
                         SIMDE_FLOAT64_C(  957.37), SIMDE_FLOAT64_C( -934.92),
                         SIMDE_FLOAT64_C( -657.02), SIMDE_FLOAT64_C( -629.37)),
      simde_mm512_set_epi64(INT64_C( 1455933536394832297), INT64_C( -840828676201867557),
                            INT64_C( 6310833464661060096), INT64_C( 8429580363859954742),
                            INT64_C( 5406280044045291975), INT64_C(-2284955492954404973),
                            INT64_C(-3603637419527123210), INT64_C(-1117409850830928520)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(  586.29), SIMDE_FLOAT64_C( -760.88),
                         SIMDE_FLOAT64_C( -617.12), SIMDE_FLOAT64_C( -751.58),
                         SIMDE_FLOAT64_C(  907.23), SIMDE_FLOAT64_C( -359.60),
                         SIMDE_FLOAT64_C( -213.75), SIMDE_FLOAT64_C(  403.00)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(    0.00), SIMDE_FLOAT64_C(    0.00),
                         SIMDE_FLOAT64_C(    0.00), SIMDE_FLOAT64_C(  149.72),
                         SIMDE_FLOAT64_C(    0.00), SIMDE_FLOAT64_C(    0.00),
                         SIMDE_FLOAT64_C(  149.72), SIMDE_FLOAT64_C(  403.00)) },
    { UINT8_C(132),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(  918.52), SIMDE_FLOAT64_C( -422.76),
                         SIMDE_FLOAT64_C( -433.33), SIMDE_FLOAT64_C(   48.49),
                         SIMDE_FLOAT64_C(  799.57), SIMDE_FLOAT64_C( -820.22),
                         SIMDE_FLOAT64_C( -959.11), SIMDE_FLOAT64_C(  268.99)),
      simde_mm512_set_epi64(INT64_C(-4670296842224865750), INT64_C(-8736438908262001915),
                            INT64_C(-1516874692875012272), INT64_C( 2654080637722702840),
                            INT64_C(-4444585746033374017), INT64_C( 7620312646179506248),
                            INT64_C(-4730811392556899367), INT64_C(-7555925455226975890)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C( -663.74), SIMDE_FLOAT64_C(  179.29),
                         SIMDE_FLOAT64_C(  989.70), SIMDE_FLOAT64_C( -695.21),
                         SIMDE_FLOAT64_C( -786.23), SIMDE_FLOAT64_C(  873.30),
                         SIMDE_FLOAT64_C(  241.45), SIMDE_FLOAT64_C( -432.13)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(  873.30), SIMDE_FLOAT64_C(    0.00),
                         SIMDE_FLOAT64_C(    0.00), SIMDE_FLOAT64_C(    0.00),
                         SIMDE_FLOAT64_C(    0.00), SIMDE_FLOAT64_C( -432.13),
                         SIMDE_FLOAT64_C(    0.00), SIMDE_FLOAT64_C(    0.00)) },
    { UINT8_C( 37),
      simde_mm512_set_pd(SIMDE_FLOAT64_C( -904.81), SIMDE_FLOAT64_C(   50.50),
                         SIMDE_FLOAT64_C( -282.31), SIMDE_FLOAT64_C( -656.10),
                         SIMDE_FLOAT64_C( -789.54), SIMDE_FLOAT64_C( -790.16),
                         SIMDE_FLOAT64_C( -415.61), SIMDE_FLOAT64_C(  994.61)),
      simde_mm512_set_epi64(INT64_C( 2001511420457827007), INT64_C( 8280910196874944184),
                            INT64_C( -368934386460614235), INT64_C(-9011857488067354178),
                            INT64_C( 5578921037540219940), INT64_C(-7880186302232587827),
                            INT64_C( 7848707034806784644), INT64_C(-7246117184140796511)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(  280.87), SIMDE_FLOAT64_C(  380.83),
                         SIMDE_FLOAT64_C( -236.67), SIMDE_FLOAT64_C( -211.91),
                         SIMDE_FLOAT64_C( -925.76), SIMDE_FLOAT64_C( -915.62),
                         SIMDE_FLOAT64_C(  -30.05), SIMDE_FLOAT64_C(  -70.79)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(    0.00), SIMDE_FLOAT64_C(    0.00),
                         SIMDE_FLOAT64_C( -282.31), SIMDE_FLOAT64_C(    0.00),
                         SIMDE_FLOAT64_C(    0.00), SIMDE_FLOAT64_C( -236.67),
                         SIMDE_FLOAT64_C(    0.00), SIMDE_FLOAT64_C( -415.61)) },
    { UINT8_C(218),
      simde_mm512_set_pd(SIMDE_FLOAT64_C( -318.40), SIMDE_FLOAT64_C( -844.73),
                         SIMDE_FLOAT64_C(  757.65), SIMDE_FLOAT64_C(  677.41),
                         SIMDE_FLOAT64_C( -352.24), SIMDE_FLOAT64_C( -479.79),
                         SIMDE_FLOAT64_C(  602.83), SIMDE_FLOAT64_C(    2.55)),
      simde_mm512_set_epi64(INT64_C( 2056379472574346663), INT64_C(-3486865648830471282),
                            INT64_C( 8151787653682140580), INT64_C( -831601358278995789),
                            INT64_C(-2800664419916301039), INT64_C( 3280702275774868225),
                            INT64_C(-4735905134864699368), INT64_C( 7051416147935021095)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(  915.68), SIMDE_FLOAT64_C(  -53.79),
                         SIMDE_FLOAT64_C(  703.31), SIMDE_FLOAT64_C(  930.79),
                         SIMDE_FLOAT64_C(  111.33), SIMDE_FLOAT64_C( -176.75),
                         SIMDE_FLOAT64_C( -316.94), SIMDE_FLOAT64_C(  639.68)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C( -318.40), SIMDE_FLOAT64_C(  -53.79),
                         SIMDE_FLOAT64_C(    0.00), SIMDE_FLOAT64_C( -352.24),
                         SIMDE_FLOAT64_C(  602.83), SIMDE_FLOAT64_C(    0.00),
                         SIMDE_FLOAT64_C(  639.68), SIMDE_FLOAT64_C(    0.00)) },
    { UINT8_C(227),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(  432.42), SIMDE_FLOAT64_C(  421.92),
                         SIMDE_FLOAT64_C(  718.96), SIMDE_FLOAT64_C( -864.59),
                         SIMDE_FLOAT64_C( -334.42), SIMDE_FLOAT64_C(  660.53),
                         SIMDE_FLOAT64_C(  748.73), SIMDE_FLOAT64_C(  996.15)),
      simde_mm512_set_epi64(INT64_C( 6904524208941840952), INT64_C(-7164378700336361334),
                            INT64_C( 4351794567182281042), INT64_C(-1716872434006574729),
                            INT64_C( -689503347190866770), INT64_C(-1389624339165317749),
                            INT64_C(-8184083999390244234), INT64_C( 8331479114169761131)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(  601.37), SIMDE_FLOAT64_C( -660.24),
                         SIMDE_FLOAT64_C( -675.56), SIMDE_FLOAT64_C( -194.09),
                         SIMDE_FLOAT64_C(  149.22), SIMDE_FLOAT64_C(  161.52),
                         SIMDE_FLOAT64_C(  632.78), SIMDE_FLOAT64_C(  346.90)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(  346.90), SIMDE_FLOAT64_C(  161.52),
                         SIMDE_FLOAT64_C(  660.53), SIMDE_FLOAT64_C(    0.00),
                         SIMDE_FLOAT64_C(    0.00), SIMDE_FLOAT64_C(    0.00),
                         SIMDE_FLOAT64_C(  421.92), SIMDE_FLOAT64_C(  149.22)) },
    { UINT8_C(179),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(    5.84), SIMDE_FLOAT64_C(   39.14),
                         SIMDE_FLOAT64_C(  124.68), SIMDE_FLOAT64_C( -448.70),
                         SIMDE_FLOAT64_C(  122.69), SIMDE_FLOAT64_C(   65.13),
                         SIMDE_FLOAT64_C( -972.27), SIMDE_FLOAT64_C(  628.22)),
      simde_mm512_set_epi64(INT64_C( 2669799685376652269), INT64_C( 7927414333096918356),
                            INT64_C(-6028737433755228757), INT64_C(-6289085317177674471),
                            INT64_C(-5541511610486147753), INT64_C( 6531713794566454707),
                            INT64_C( -446705336047418133), INT64_C(-6709780755556058351)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(  196.06), SIMDE_FLOAT64_C(  -83.06),
                         SIMDE_FLOAT64_C(  687.82), SIMDE_FLOAT64_C( -517.82),
                         SIMDE_FLOAT64_C( -294.36), SIMDE_FLOAT64_C(  702.71),
                         SIMDE_FLOAT64_C( -920.22), SIMDE_FLOAT64_C( -923.04)),
      simde_mm512_set_pd(SIMDE_FLOAT64_C(  687.82), SIMDE_FLOAT64_C(    0.00),
                         SIMDE_FLOAT64_C( -294.36), SIMDE_FLOAT64_C( -920.22),
                         SIMDE_FLOAT64_C(    0.00), SIMDE_FLOAT64_C(    0.00),
                         SIMDE_FLOAT64_C( -294.36), SIMDE_FLOAT64_C( -972.27)) },
  };

  for (size_t i = 0 ; i < (sizeof(test_vec) / sizeof(test_vec[0])); i++) {
    simde__m512d r = simde_mm512_maskz_permutex2var_pd(test_vec[i].k, test_vec[i].a, test_vec[i].idx, test_vec[i].b);
    simde_assert_m512d_close(r, test_vec[i].r, 1);
  }

  return 0;
}

static int
test_simde_mm512_permutex2var_ps(SIMDE_MUNIT_TEST_ARGS) {
  const struct {
    simde__m512 a;
    simde__m512i idx;
    simde__m512 b;
    simde__m512 r;
  } test_vec[8] = {
    { simde_mm512_set_ps(SIMDE_FLOAT32_C(   -64.06), SIMDE_FLOAT32_C(   559.81), SIMDE_FLOAT32_C(  -423.61), SIMDE_FLOAT32_C(   407.56),
                         SIMDE_FLOAT32_C(  -787.72), SIMDE_FLOAT32_C(  -703.51), SIMDE_FLOAT32_C(  -470.36), SIMDE_FLOAT32_C(   135.20),
                         SIMDE_FLOAT32_C(   799.30), SIMDE_FLOAT32_C(  -576.01), SIMDE_FLOAT32_C(   439.15), SIMDE_FLOAT32_C(   -28.15),
                         SIMDE_FLOAT32_C(   481.25), SIMDE_FLOAT32_C(  -784.26), SIMDE_FLOAT32_C(   549.03), SIMDE_FLOAT32_C(   582.53)),
      simde_mm512_set_epi32(INT32_C(-1732993162), INT32_C( 1212743926), INT32_C( 1966971402), INT32_C(-1506668774),
                            INT32_C(-1700657265), INT32_C( 1944327234), INT32_C( -355879099), INT32_C(-1588067414),
                            INT32_C(  301696052), INT32_C( 1998339065), INT32_C(-2060809025), INT32_C(-1942156019),
                            INT32_C(  551689125), INT32_C(  669995747), INT32_C(-1196653219), INT32_C( -147816939)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(   120.10), SIMDE_FLOAT32_C(  -620.03), SIMDE_FLOAT32_C(   185.23), SIMDE_FLOAT32_C(   -11.91),
                         SIMDE_FLOAT32_C(   355.11), SIMDE_FLOAT32_C(   472.82), SIMDE_FLOAT32_C(  -202.49), SIMDE_FLOAT32_C(   966.37),
                         SIMDE_FLOAT32_C(  -563.83), SIMDE_FLOAT32_C(   938.85), SIMDE_FLOAT32_C(  -465.05), SIMDE_FLOAT32_C(  -104.57),
                         SIMDE_FLOAT32_C(  -431.26), SIMDE_FLOAT32_C(   -57.75), SIMDE_FLOAT32_C(   438.04), SIMDE_FLOAT32_C(   729.46)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(   938.85), SIMDE_FLOAT32_C(   938.85), SIMDE_FLOAT32_C(  -703.51), SIMDE_FLOAT32_C(   472.82),
                         SIMDE_FLOAT32_C(   -64.06), SIMDE_FLOAT32_C(  -784.26), SIMDE_FLOAT32_C(   439.15), SIMDE_FLOAT32_C(  -703.51),
                         SIMDE_FLOAT32_C(  -104.57), SIMDE_FLOAT32_C(  -202.49), SIMDE_FLOAT32_C(   120.10), SIMDE_FLOAT32_C(  -423.61),
                         SIMDE_FLOAT32_C(   439.15), SIMDE_FLOAT32_C(   481.25), SIMDE_FLOAT32_C(   185.23), SIMDE_FLOAT32_C(  -465.05)) },
    { simde_mm512_set_ps(SIMDE_FLOAT32_C(  -832.50), SIMDE_FLOAT32_C(   438.46), SIMDE_FLOAT32_C(   336.35), SIMDE_FLOAT32_C(    99.21),
                         SIMDE_FLOAT32_C(   -38.88), SIMDE_FLOAT32_C(   218.73), SIMDE_FLOAT32_C(  -966.90), SIMDE_FLOAT32_C(  -737.78),
                         SIMDE_FLOAT32_C(  -224.13), SIMDE_FLOAT32_C(  -834.15), SIMDE_FLOAT32_C(  -819.46), SIMDE_FLOAT32_C(   112.81),
                         SIMDE_FLOAT32_C(   464.19), SIMDE_FLOAT32_C(   282.83), SIMDE_FLOAT32_C(   841.24), SIMDE_FLOAT32_C(    79.76)),
      simde_mm512_set_epi32(INT32_C( 1760980702), INT32_C(-1592941833), INT32_C(-1618734568), INT32_C(-1937346052),
                            INT32_C( -716563340), INT32_C(-1364071584), INT32_C( -516953475), INT32_C( 1021791773),
                            INT32_C(  587319712), INT32_C(-1327772936), INT32_C( -388433125), INT32_C(-1835488163),
                            INT32_C( 1934085090), INT32_C( 1823172786), INT32_C( -962834173), INT32_C(-1813383694)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(   141.08), SIMDE_FLOAT32_C(  -990.15), SIMDE_FLOAT32_C(  -887.47), SIMDE_FLOAT32_C(  -396.24),
                         SIMDE_FLOAT32_C(    -2.60), SIMDE_FLOAT32_C(   165.88), SIMDE_FLOAT32_C(   375.27), SIMDE_FLOAT32_C(  -512.98),
                         SIMDE_FLOAT32_C(   664.52), SIMDE_FLOAT32_C(   633.65), SIMDE_FLOAT32_C(  -157.33), SIMDE_FLOAT32_C(   541.44),
                         SIMDE_FLOAT32_C(   -98.08), SIMDE_FLOAT32_C(   711.12), SIMDE_FLOAT32_C(  -774.08), SIMDE_FLOAT32_C(  -414.07)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(  -990.15), SIMDE_FLOAT32_C(   664.52), SIMDE_FLOAT32_C(  -512.98), SIMDE_FLOAT32_C(  -396.24),
                         SIMDE_FLOAT32_C(   541.44), SIMDE_FLOAT32_C(    79.76), SIMDE_FLOAT32_C(  -887.47), SIMDE_FLOAT32_C(  -887.47),
                         SIMDE_FLOAT32_C(    79.76), SIMDE_FLOAT32_C(  -512.98), SIMDE_FLOAT32_C(    -2.60), SIMDE_FLOAT32_C(  -887.47),
                         SIMDE_FLOAT32_C(   282.83), SIMDE_FLOAT32_C(   711.12), SIMDE_FLOAT32_C(   464.19), SIMDE_FLOAT32_C(   711.12)) },
    { simde_mm512_set_ps(SIMDE_FLOAT32_C(   485.76), SIMDE_FLOAT32_C(   786.03), SIMDE_FLOAT32_C(   489.95), SIMDE_FLOAT32_C(   796.52),
                         SIMDE_FLOAT32_C(  -248.07), SIMDE_FLOAT32_C(   -88.91), SIMDE_FLOAT32_C(   170.00), SIMDE_FLOAT32_C(   366.57),
                         SIMDE_FLOAT32_C(  -211.73), SIMDE_FLOAT32_C(   908.31), SIMDE_FLOAT32_C(  -144.11), SIMDE_FLOAT32_C(  -343.92),
                         SIMDE_FLOAT32_C(   961.65), SIMDE_FLOAT32_C(   754.42), SIMDE_FLOAT32_C(  -432.97), SIMDE_FLOAT32_C(   164.52)),
      simde_mm512_set_epi32(INT32_C(-1723897302), INT32_C(-1378607382), INT32_C(-1399746280), INT32_C(   55039129),
                            INT32_C( -614650529), INT32_C( 1411406194), INT32_C(  789645610), INT32_C(  647523062),
                            INT32_C( 1326675104), INT32_C(-1833621116), INT32_C( 1459731687), INT32_C(-1374295064),
                            INT32_C( 1719685048), INT32_C(-1859395493), INT32_C(  506068853), INT32_C( 1338183771)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(  -985.32), SIMDE_FLOAT32_C(   234.60), SIMDE_FLOAT32_C(   859.59), SIMDE_FLOAT32_C(  -409.35),
                         SIMDE_FLOAT32_C(  -846.10), SIMDE_FLOAT32_C(  -411.92), SIMDE_FLOAT32_C(   481.68), SIMDE_FLOAT32_C(  -341.91),
                         SIMDE_FLOAT32_C(   254.48), SIMDE_FLOAT32_C(   755.70), SIMDE_FLOAT32_C(  -363.93), SIMDE_FLOAT32_C(   789.10),
                         SIMDE_FLOAT32_C(   344.74), SIMDE_FLOAT32_C(   652.93), SIMDE_FLOAT32_C(   184.91), SIMDE_FLOAT32_C(  -455.33)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(   -88.91), SIMDE_FLOAT32_C(   -88.91), SIMDE_FLOAT32_C(  -341.91), SIMDE_FLOAT32_C(   481.68),
                         SIMDE_FLOAT32_C(  -985.32), SIMDE_FLOAT32_C(   652.93), SIMDE_FLOAT32_C(   -88.91), SIMDE_FLOAT32_C(   755.70),
                         SIMDE_FLOAT32_C(   164.52), SIMDE_FLOAT32_C(  -343.92), SIMDE_FLOAT32_C(  -211.73), SIMDE_FLOAT32_C(   366.57),
                         SIMDE_FLOAT32_C(  -341.91), SIMDE_FLOAT32_C(  -846.10), SIMDE_FLOAT32_C(  -363.93), SIMDE_FLOAT32_C(  -846.10)) },
    { simde_mm512_set_ps(SIMDE_FLOAT32_C(   374.01), SIMDE_FLOAT32_C(  -829.82), SIMDE_FLOAT32_C(  -372.09), SIMDE_FLOAT32_C(  -693.82),
                         SIMDE_FLOAT32_C(   763.12), SIMDE_FLOAT32_C(   797.99), SIMDE_FLOAT32_C(   291.55), SIMDE_FLOAT32_C(   -93.41),
                         SIMDE_FLOAT32_C(   658.18), SIMDE_FLOAT32_C(  -330.38), SIMDE_FLOAT32_C(  -462.89), SIMDE_FLOAT32_C(  -905.06),
                         SIMDE_FLOAT32_C(   266.49), SIMDE_FLOAT32_C(  -537.47), SIMDE_FLOAT32_C(  -705.33), SIMDE_FLOAT32_C(   699.62)),
      simde_mm512_set_epi32(INT32_C(  542652634), INT32_C(-1703311025), INT32_C( 1982058627), INT32_C(  315796553),
                            INT32_C( -175644135), INT32_C( 1189569864), INT32_C(-1367453148), INT32_C( 1842630130),
                            INT32_C(-1935654327), INT32_C(  121935685), INT32_C( 1908625200), INT32_C(-1041198180),
                            INT32_C( 1800897720), INT32_C(-1697242531), INT32_C(-1701529660), INT32_C( 1678133404)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(   -65.54), SIMDE_FLOAT32_C(   852.70), SIMDE_FLOAT32_C(   316.87), SIMDE_FLOAT32_C(   303.57),
                         SIMDE_FLOAT32_C(   151.19), SIMDE_FLOAT32_C(    17.85), SIMDE_FLOAT32_C(   280.96), SIMDE_FLOAT32_C(  -966.13),
                         SIMDE_FLOAT32_C(   156.66), SIMDE_FLOAT32_C(   198.89), SIMDE_FLOAT32_C(  -766.40), SIMDE_FLOAT32_C(  -495.88),
                         SIMDE_FLOAT32_C(  -794.42), SIMDE_FLOAT32_C(  -263.27), SIMDE_FLOAT32_C(    74.85), SIMDE_FLOAT32_C(   127.81)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(    17.85), SIMDE_FLOAT32_C(   374.01), SIMDE_FLOAT32_C(   266.49), SIMDE_FLOAT32_C(   291.55),
                         SIMDE_FLOAT32_C(   280.96), SIMDE_FLOAT32_C(   -93.41), SIMDE_FLOAT32_C(  -905.06), SIMDE_FLOAT32_C(  -263.27),
                         SIMDE_FLOAT32_C(   291.55), SIMDE_FLOAT32_C(  -462.89), SIMDE_FLOAT32_C(   127.81), SIMDE_FLOAT32_C(   303.57),
                         SIMDE_FLOAT32_C(  -966.13), SIMDE_FLOAT32_C(   316.87), SIMDE_FLOAT32_C(  -905.06), SIMDE_FLOAT32_C(   303.57)) },
    { simde_mm512_set_ps(SIMDE_FLOAT32_C(  -276.00), SIMDE_FLOAT32_C(  -317.53), SIMDE_FLOAT32_C(  -723.48), SIMDE_FLOAT32_C(  -792.04),
                         SIMDE_FLOAT32_C(  -284.98), SIMDE_FLOAT32_C(   906.86), SIMDE_FLOAT32_C(  -798.29), SIMDE_FLOAT32_C(   122.95),
                         SIMDE_FLOAT32_C(   192.60), SIMDE_FLOAT32_C(  -766.97), SIMDE_FLOAT32_C(  -268.82), SIMDE_FLOAT32_C(   379.62),
                         SIMDE_FLOAT32_C(   889.99), SIMDE_FLOAT32_C(   778.00), SIMDE_FLOAT32_C(   136.45), SIMDE_FLOAT32_C(  -745.44)),
      simde_mm512_set_epi32(INT32_C( 1809884012), INT32_C( -191206140), INT32_C( -553702639), INT32_C(-1800209842),
                            INT32_C(  721509385), INT32_C(   -3110338), INT32_C(  629848436), INT32_C( 1833821522),
                            INT32_C( 1870762521), INT32_C( 1138301165), INT32_C(  499100111), INT32_C( -583483550),
                            INT32_C(  449841541), INT32_C( 1832272682), INT32_C( -100358742), INT32_C( 1797905164)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(   366.70), SIMDE_FLOAT32_C(   615.81), SIMDE_FLOAT32_C(  -673.63), SIMDE_FLOAT32_C(   832.55),
                         SIMDE_FLOAT32_C(   260.08), SIMDE_FLOAT32_C(  -412.45), SIMDE_FLOAT32_C(   245.05), SIMDE_FLOAT32_C(  -913.68),
                         SIMDE_FLOAT32_C(    79.71), SIMDE_FLOAT32_C(  -761.86), SIMDE_FLOAT32_C(   699.75), SIMDE_FLOAT32_C(   -94.00),
                         SIMDE_FLOAT32_C(   852.56), SIMDE_FLOAT32_C(  -583.72), SIMDE_FLOAT32_C(    64.51), SIMDE_FLOAT32_C(   598.44)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(  -792.04), SIMDE_FLOAT32_C(   379.62), SIMDE_FLOAT32_C(    64.51), SIMDE_FLOAT32_C(  -317.53),
                         SIMDE_FLOAT32_C(  -798.29), SIMDE_FLOAT32_C(   615.81), SIMDE_FLOAT32_C(   -94.00), SIMDE_FLOAT32_C(  -583.72),
                         SIMDE_FLOAT32_C(   245.05), SIMDE_FLOAT32_C(  -723.48), SIMDE_FLOAT32_C(  -276.00), SIMDE_FLOAT32_C(   778.00),
                         SIMDE_FLOAT32_C(  -268.82), SIMDE_FLOAT32_C(   906.86), SIMDE_FLOAT32_C(   906.86), SIMDE_FLOAT32_C(  -792.04)) },
    { simde_mm512_set_ps(SIMDE_FLOAT32_C(  -976.85), SIMDE_FLOAT32_C(   321.59), SIMDE_FLOAT32_C(   867.83), SIMDE_FLOAT32_C(   831.83),
                         SIMDE_FLOAT32_C(  -570.45), SIMDE_FLOAT32_C(  -732.92), SIMDE_FLOAT32_C(  -964.15), SIMDE_FLOAT32_C(   -39.63),
                         SIMDE_FLOAT32_C(   579.20), SIMDE_FLOAT32_C(  -391.63), SIMDE_FLOAT32_C(   335.63), SIMDE_FLOAT32_C(   738.93),
                         SIMDE_FLOAT32_C(   439.69), SIMDE_FLOAT32_C(   930.40), SIMDE_FLOAT32_C(   273.66), SIMDE_FLOAT32_C(   892.54)),
      simde_mm512_set_epi32(INT32_C( 1604291666), INT32_C( -491791926), INT32_C( 1819084879), INT32_C( 1431978307),
                            INT32_C( 1530613877), INT32_C(-1009988233), INT32_C( 1309545588), INT32_C(-1001207300),
                            INT32_C(-1909714099), INT32_C(-1031553759), INT32_C(-1195513362), INT32_C(  957243291),
                            INT32_C( 1576721253), INT32_C( 1170763213), INT32_C( 1280754757), INT32_C(-1670630534)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(   162.47), SIMDE_FLOAT32_C(   307.15), SIMDE_FLOAT32_C(  -851.38), SIMDE_FLOAT32_C(  -956.87),
                         SIMDE_FLOAT32_C(  -932.93), SIMDE_FLOAT32_C(   757.55), SIMDE_FLOAT32_C(  -934.19), SIMDE_FLOAT32_C(   361.60),
                         SIMDE_FLOAT32_C(  -239.16), SIMDE_FLOAT32_C(  -204.61), SIMDE_FLOAT32_C(   200.64), SIMDE_FLOAT32_C(  -634.66),
                         SIMDE_FLOAT32_C(   607.08), SIMDE_FLOAT32_C(  -668.91), SIMDE_FLOAT32_C(  -886.74), SIMDE_FLOAT32_C(  -214.28)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(  -668.91), SIMDE_FLOAT32_C(  -732.92), SIMDE_FLOAT32_C(  -976.85), SIMDE_FLOAT32_C(   439.69),
                         SIMDE_FLOAT32_C(   200.64), SIMDE_FLOAT32_C(  -239.16), SIMDE_FLOAT32_C(  -634.66), SIMDE_FLOAT32_C(  -956.87),
                         SIMDE_FLOAT32_C(   867.83), SIMDE_FLOAT32_C(   273.66), SIMDE_FLOAT32_C(   321.59), SIMDE_FLOAT32_C(  -932.93),
                         SIMDE_FLOAT32_C(   335.63), SIMDE_FLOAT32_C(   867.83), SIMDE_FLOAT32_C(   335.63), SIMDE_FLOAT32_C(   757.55)) },
    { simde_mm512_set_ps(SIMDE_FLOAT32_C(  -824.86), SIMDE_FLOAT32_C(   954.86), SIMDE_FLOAT32_C(   523.67), SIMDE_FLOAT32_C(  -253.94),
                         SIMDE_FLOAT32_C(   437.48), SIMDE_FLOAT32_C(    79.48), SIMDE_FLOAT32_C(  -371.31), SIMDE_FLOAT32_C(   -36.35),
                         SIMDE_FLOAT32_C(   288.58), SIMDE_FLOAT32_C(   274.36), SIMDE_FLOAT32_C(  -249.54), SIMDE_FLOAT32_C(   805.73),
                         SIMDE_FLOAT32_C(    29.94), SIMDE_FLOAT32_C(  -149.48), SIMDE_FLOAT32_C(   141.90), SIMDE_FLOAT32_C(   -55.72)),
      simde_mm512_set_epi32(INT32_C( -769209677), INT32_C(  921385960), INT32_C(  426713309), INT32_C( 1823076507),
                            INT32_C( 1666223712), INT32_C( -194163626), INT32_C(  604266257), INT32_C( 1932526911),
                            INT32_C(   20183709), INT32_C(  818624505), INT32_C( 1023612212), INT32_C(-1113050305),
                            INT32_C( 1709269191), INT32_C( 2143041839), INT32_C( 1719176952), INT32_C( -353230679)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(  -657.43), SIMDE_FLOAT32_C(  -181.72), SIMDE_FLOAT32_C(  -893.09), SIMDE_FLOAT32_C(   985.74),
                         SIMDE_FLOAT32_C(  -488.89), SIMDE_FLOAT32_C(   683.50), SIMDE_FLOAT32_C(   297.36), SIMDE_FLOAT32_C(    88.61),
                         SIMDE_FLOAT32_C(   -14.68), SIMDE_FLOAT32_C(   451.12), SIMDE_FLOAT32_C(  -464.35), SIMDE_FLOAT32_C(    82.04),
                         SIMDE_FLOAT32_C(   -48.11), SIMDE_FLOAT32_C(   254.96), SIMDE_FLOAT32_C(  -161.09), SIMDE_FLOAT32_C(  -538.50)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(   -48.11), SIMDE_FLOAT32_C(   -36.35), SIMDE_FLOAT32_C(  -893.09), SIMDE_FLOAT32_C(  -488.89),
                         SIMDE_FLOAT32_C(   -55.72), SIMDE_FLOAT32_C(   451.12), SIMDE_FLOAT32_C(  -161.09), SIMDE_FLOAT32_C(  -657.43),
                         SIMDE_FLOAT32_C(  -893.09), SIMDE_FLOAT32_C(   297.36), SIMDE_FLOAT32_C(    82.04), SIMDE_FLOAT32_C(  -657.43),
                         SIMDE_FLOAT32_C(   288.58), SIMDE_FLOAT32_C(  -824.86), SIMDE_FLOAT32_C(    88.61), SIMDE_FLOAT32_C(  -371.31)) },
    { simde_mm512_set_ps(SIMDE_FLOAT32_C(   645.39), SIMDE_FLOAT32_C(   -81.78), SIMDE_FLOAT32_C(   426.88), SIMDE_FLOAT32_C(   367.09),
                         SIMDE_FLOAT32_C(   269.97), SIMDE_FLOAT32_C(   513.55), SIMDE_FLOAT32_C(  -433.45), SIMDE_FLOAT32_C(  -401.21),
                         SIMDE_FLOAT32_C(  -679.71), SIMDE_FLOAT32_C(  -426.49), SIMDE_FLOAT32_C(  -878.06), SIMDE_FLOAT32_C(   441.47),
                         SIMDE_FLOAT32_C(  -137.95), SIMDE_FLOAT32_C(   177.44), SIMDE_FLOAT32_C(   -55.07), SIMDE_FLOAT32_C(  -581.76)),
      simde_mm512_set_epi32(INT32_C(  582660853), INT32_C(-1326740073), INT32_C( 1332684527), INT32_C(  720865928),
                            INT32_C( 1806675616), INT32_C( 1369928435), INT32_C( 2026484746), INT32_C(  939514243),
                            INT32_C( 1533779841), INT32_C( 1890230239), INT32_C(  631027080), INT32_C(  679389494),
                            INT32_C( 2030531254), INT32_C(   78143054), INT32_C( 1358587101), INT32_C( 1101843618)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(  -978.39), SIMDE_FLOAT32_C(  -650.69), SIMDE_FLOAT32_C(   796.63), SIMDE_FLOAT32_C(  -910.00),
                         SIMDE_FLOAT32_C(  -646.84), SIMDE_FLOAT32_C(  -538.44), SIMDE_FLOAT32_C(  -130.00), SIMDE_FLOAT32_C(  -692.07),
                         SIMDE_FLOAT32_C(  -408.06), SIMDE_FLOAT32_C(  -675.29), SIMDE_FLOAT32_C(  -359.85), SIMDE_FLOAT32_C(   775.91),
                         SIMDE_FLOAT32_C(  -262.33), SIMDE_FLOAT32_C(   878.38), SIMDE_FLOAT32_C(   212.22), SIMDE_FLOAT32_C(  -803.31)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(  -359.85), SIMDE_FLOAT32_C(  -408.06), SIMDE_FLOAT32_C(   645.39), SIMDE_FLOAT32_C(  -401.21),
                         SIMDE_FLOAT32_C(  -581.76), SIMDE_FLOAT32_C(  -262.33), SIMDE_FLOAT32_C(   513.55), SIMDE_FLOAT32_C(  -137.95),
                         SIMDE_FLOAT32_C(   -55.07), SIMDE_FLOAT32_C(  -978.39), SIMDE_FLOAT32_C(  -401.21), SIMDE_FLOAT32_C(  -675.29),
                         SIMDE_FLOAT32_C(  -675.29), SIMDE_FLOAT32_C(   -81.78), SIMDE_FLOAT32_C(   796.63), SIMDE_FLOAT32_C(   177.44)) },
  };

  for (size_t i = 0 ; i < (sizeof(test_vec) / sizeof(test_vec[0])); i++) {
    simde__m512 r = simde_mm512_permutex2var_ps(test_vec[i].a, test_vec[i].idx, test_vec[i].b);
    #if defined(__EMSCRIPTEN__)
    (void) r;
    #else
    simde_assert_m512_close(r, test_vec[i].r, 1);
    #endif
 }

  return 0;
}

static int
test_simde_mm512_mask_permutex2var_ps(SIMDE_MUNIT_TEST_ARGS) {
  const struct {
    simde__m512 a;
    simde__mmask16 k;
    simde__m512i idx;
    simde__m512 b;
    simde__m512 r;
  } test_vec[8] = {
    { simde_mm512_set_ps(SIMDE_FLOAT32_C(   232.04), SIMDE_FLOAT32_C(   774.81), SIMDE_FLOAT32_C(  -599.01), SIMDE_FLOAT32_C(    69.04),
                         SIMDE_FLOAT32_C(  -149.02), SIMDE_FLOAT32_C(   240.79), SIMDE_FLOAT32_C(  -839.80), SIMDE_FLOAT32_C(  -556.90),
                         SIMDE_FLOAT32_C(   160.98), SIMDE_FLOAT32_C(   391.82), SIMDE_FLOAT32_C(  -569.99), SIMDE_FLOAT32_C(  -327.63),
                         SIMDE_FLOAT32_C(  -172.36), SIMDE_FLOAT32_C(   393.53), SIMDE_FLOAT32_C(    36.69), SIMDE_FLOAT32_C(  -135.52)),
      UINT16_C(45849),
      simde_mm512_set_epi32(INT32_C( 1711460779), INT32_C( -919570191), INT32_C( 1974152373), INT32_C( -695949043),
                            INT32_C( -790242624), INT32_C(-1094331335), INT32_C(-1166320093), INT32_C(-2045280751),
                            INT32_C(-2037261521), INT32_C(  223952317), INT32_C(  282198336), INT32_C(  564965997),
                            INT32_C(  169645898), INT32_C(-1539616610), INT32_C( 1134735685), INT32_C( 1430356381)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(   903.50), SIMDE_FLOAT32_C(   -43.35), SIMDE_FLOAT32_C(   309.91), SIMDE_FLOAT32_C(   846.15),
                         SIMDE_FLOAT32_C(  -514.56), SIMDE_FLOAT32_C(  -860.98), SIMDE_FLOAT32_C(  -280.30), SIMDE_FLOAT32_C(   128.51),
                         SIMDE_FLOAT32_C(   522.06), SIMDE_FLOAT32_C(  -932.28), SIMDE_FLOAT32_C(   600.12), SIMDE_FLOAT32_C(  -491.12),
                         SIMDE_FLOAT32_C(  -139.11), SIMDE_FLOAT32_C(  -268.86), SIMDE_FLOAT32_C(   -71.72), SIMDE_FLOAT32_C(    98.47)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(  -149.02), SIMDE_FLOAT32_C(   774.81), SIMDE_FLOAT32_C(   600.12), SIMDE_FLOAT32_C(  -599.01),
                         SIMDE_FLOAT32_C(  -149.02), SIMDE_FLOAT32_C(   240.79), SIMDE_FLOAT32_C(  -172.36), SIMDE_FLOAT32_C(   -71.72),
                         SIMDE_FLOAT32_C(   160.98), SIMDE_FLOAT32_C(   391.82), SIMDE_FLOAT32_C(  -569.99), SIMDE_FLOAT32_C(  -599.01),
                         SIMDE_FLOAT32_C(   240.79), SIMDE_FLOAT32_C(   393.53), SIMDE_FLOAT32_C(    36.69), SIMDE_FLOAT32_C(   309.91)) },
    { simde_mm512_set_ps(SIMDE_FLOAT32_C(  -760.88), SIMDE_FLOAT32_C(  -617.12), SIMDE_FLOAT32_C(  -751.58), SIMDE_FLOAT32_C(   907.23),
                         SIMDE_FLOAT32_C(  -359.60), SIMDE_FLOAT32_C(  -213.75), SIMDE_FLOAT32_C(   403.00), SIMDE_FLOAT32_C(  -198.67),
                         SIMDE_FLOAT32_C(   447.98), SIMDE_FLOAT32_C(  -925.69), SIMDE_FLOAT32_C(   717.83), SIMDE_FLOAT32_C(  -489.88),
                         SIMDE_FLOAT32_C(   -37.49), SIMDE_FLOAT32_C(  -373.66), SIMDE_FLOAT32_C(  -292.35), SIMDE_FLOAT32_C(  -835.53)),
      UINT16_C(30259),
      simde_mm512_set_epi32(INT32_C( 1701079465), INT32_C( -195770682), INT32_C(  503748315), INT32_C( 1469355417),
                            INT32_C(-1849349632), INT32_C( 1962664621), INT32_C( -646247370), INT32_C( 1258747662),
                            INT32_C( 1838830023), INT32_C( -532007659), INT32_C( -622852205), INT32_C( -839037220),
                            INT32_C(  499633910), INT32_C( -260167255), INT32_C(  884163960), INT32_C( -329275629)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(   670.52), SIMDE_FLOAT32_C(   149.72), SIMDE_FLOAT32_C(   213.24), SIMDE_FLOAT32_C(  -577.36),
                         SIMDE_FLOAT32_C(   957.37), SIMDE_FLOAT32_C(  -934.92), SIMDE_FLOAT32_C(  -657.02), SIMDE_FLOAT32_C(  -629.37),
                         SIMDE_FLOAT32_C(   337.35), SIMDE_FLOAT32_C(  -278.32), SIMDE_FLOAT32_C(  -744.41), SIMDE_FLOAT32_C(    39.32),
                         SIMDE_FLOAT32_C(    29.68), SIMDE_FLOAT32_C(  -490.28), SIMDE_FLOAT32_C(   841.53), SIMDE_FLOAT32_C(   526.21)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(  -760.88), SIMDE_FLOAT32_C(  -925.69), SIMDE_FLOAT32_C(   957.37), SIMDE_FLOAT32_C(  -657.02),
                         SIMDE_FLOAT32_C(  -359.60), SIMDE_FLOAT32_C(  -751.58), SIMDE_FLOAT32_C(  -278.32), SIMDE_FLOAT32_C(  -198.67),
                         SIMDE_FLOAT32_C(   447.98), SIMDE_FLOAT32_C(  -925.69), SIMDE_FLOAT32_C(    29.68), SIMDE_FLOAT32_C(  -577.36),
                         SIMDE_FLOAT32_C(   -37.49), SIMDE_FLOAT32_C(  -373.66), SIMDE_FLOAT32_C(  -629.37), SIMDE_FLOAT32_C(    29.68)) },
    { simde_mm512_set_ps(SIMDE_FLOAT32_C(   493.30), SIMDE_FLOAT32_C(   831.29), SIMDE_FLOAT32_C(  -619.50), SIMDE_FLOAT32_C(   952.47),
                         SIMDE_FLOAT32_C(  -492.61), SIMDE_FLOAT32_C(   -68.16), SIMDE_FLOAT32_C(   717.69), SIMDE_FLOAT32_C(  -663.74),
                         SIMDE_FLOAT32_C(   179.29), SIMDE_FLOAT32_C(   989.70), SIMDE_FLOAT32_C(  -695.21), SIMDE_FLOAT32_C(  -786.23),
                         SIMDE_FLOAT32_C(   873.30), SIMDE_FLOAT32_C(   241.45), SIMDE_FLOAT32_C(  -432.13), SIMDE_FLOAT32_C(  -842.15)),
      UINT16_C(60970),
      simde_mm512_set_epi32(INT32_C(  204417556), INT32_C(-1329665093), INT32_C(-2039025377), INT32_C( 1639231015),
                            INT32_C( 1541217841), INT32_C( 1692413538), INT32_C(  738521275), INT32_C(  159429100),
                            INT32_C(  451955897), INT32_C(  181201098), INT32_C(  450627934), INT32_C( 2082954477),
                            INT32_C( 1254960767), INT32_C( 1995459397), INT32_C(  -11572946), INT32_C(-1087388220)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(    52.79), SIMDE_FLOAT32_C(   835.54), SIMDE_FLOAT32_C(  -712.24), SIMDE_FLOAT32_C(   518.12),
                         SIMDE_FLOAT32_C(  -173.80), SIMDE_FLOAT32_C(   487.08), SIMDE_FLOAT32_C(   180.78), SIMDE_FLOAT32_C(  -289.23),
                         SIMDE_FLOAT32_C(   918.52), SIMDE_FLOAT32_C(  -422.76), SIMDE_FLOAT32_C(  -433.33), SIMDE_FLOAT32_C(    48.49),
                         SIMDE_FLOAT32_C(   799.57), SIMDE_FLOAT32_C(  -820.22), SIMDE_FLOAT32_C(  -959.11), SIMDE_FLOAT32_C(   268.99)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(    48.49), SIMDE_FLOAT32_C(  -173.80), SIMDE_FLOAT32_C(    52.79), SIMDE_FLOAT32_C(   952.47),
                         SIMDE_FLOAT32_C(  -959.11), SIMDE_FLOAT32_C(   241.45), SIMDE_FLOAT32_C(  -173.80), SIMDE_FLOAT32_C(  -663.74),
                         SIMDE_FLOAT32_C(   179.29), SIMDE_FLOAT32_C(   989.70), SIMDE_FLOAT32_C(   835.54), SIMDE_FLOAT32_C(  -786.23),
                         SIMDE_FLOAT32_C(    52.79), SIMDE_FLOAT32_C(   241.45), SIMDE_FLOAT32_C(   831.29), SIMDE_FLOAT32_C(  -842.15)) },
    { simde_mm512_set_ps(SIMDE_FLOAT32_C(  -844.73), SIMDE_FLOAT32_C(   757.65), SIMDE_FLOAT32_C(   677.41), SIMDE_FLOAT32_C(  -352.24),
                         SIMDE_FLOAT32_C(  -479.79), SIMDE_FLOAT32_C(   602.83), SIMDE_FLOAT32_C(     2.55), SIMDE_FLOAT32_C(  -388.47),
                         SIMDE_FLOAT32_C(  -643.43), SIMDE_FLOAT32_C(  -331.34), SIMDE_FLOAT32_C(    72.67), SIMDE_FLOAT32_C(  -870.79),
                         SIMDE_FLOAT32_C(  -722.44), SIMDE_FLOAT32_C(   529.44), SIMDE_FLOAT32_C(  -949.73), SIMDE_FLOAT32_C(   280.87)),
      UINT16_C(48011),
      simde_mm512_set_epi32(INT32_C( -811849174), INT32_C(-1510825074), INT32_C( 1897985966), INT32_C( 1445172644),
                            INT32_C( -193622280), INT32_C( 2097959091), INT32_C( -652080500), INT32_C( 1943026961),
                            INT32_C(  763848022), INT32_C(-2124387583), INT32_C(-1102663841), INT32_C(  712044568),
                            INT32_C( 1641785760), INT32_C( 1696516135), INT32_C(-1123374630), INT32_C( -181070601)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(   -53.79), SIMDE_FLOAT32_C(   703.31), SIMDE_FLOAT32_C(   930.79), SIMDE_FLOAT32_C(   111.33),
                         SIMDE_FLOAT32_C(  -176.75), SIMDE_FLOAT32_C(  -316.94), SIMDE_FLOAT32_C(   639.68), SIMDE_FLOAT32_C(  -783.00),
                         SIMDE_FLOAT32_C(  -102.18), SIMDE_FLOAT32_C(   960.00), SIMDE_FLOAT32_C(    22.93), SIMDE_FLOAT32_C(  -395.13),
                         SIMDE_FLOAT32_C(   145.63), SIMDE_FLOAT32_C(  -149.04), SIMDE_FLOAT32_C(   214.37), SIMDE_FLOAT32_C(  -453.25)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(   602.83), SIMDE_FLOAT32_C(   757.65), SIMDE_FLOAT32_C(   757.65), SIMDE_FLOAT32_C(  -870.79),
                         SIMDE_FLOAT32_C(  -783.00), SIMDE_FLOAT32_C(   602.83), SIMDE_FLOAT32_C(  -352.24), SIMDE_FLOAT32_C(   214.37),
                         SIMDE_FLOAT32_C(   960.00), SIMDE_FLOAT32_C(  -331.34), SIMDE_FLOAT32_C(    72.67), SIMDE_FLOAT32_C(  -870.79),
                         SIMDE_FLOAT32_C(   280.87), SIMDE_FLOAT32_C(   529.44), SIMDE_FLOAT32_C(  -316.94), SIMDE_FLOAT32_C(  -102.18)) },
    { simde_mm512_set_ps(SIMDE_FLOAT32_C(  -528.18), SIMDE_FLOAT32_C(   813.86), SIMDE_FLOAT32_C(   925.24), SIMDE_FLOAT32_C(   849.34),
                         SIMDE_FLOAT32_C(   112.68), SIMDE_FLOAT32_C(   -96.70), SIMDE_FLOAT32_C(   -44.05), SIMDE_FLOAT32_C(   432.42),
                         SIMDE_FLOAT32_C(   421.92), SIMDE_FLOAT32_C(   718.96), SIMDE_FLOAT32_C(  -864.59), SIMDE_FLOAT32_C(  -334.42),
                         SIMDE_FLOAT32_C(   660.53), SIMDE_FLOAT32_C(   748.73), SIMDE_FLOAT32_C(   996.15), SIMDE_FLOAT32_C(  -607.82)),
      UINT16_C(  903),
      simde_mm512_set_epi32(INT32_C( 1969107101), INT32_C(-2063427243), INT32_C( -670405092), INT32_C(-1879729053),
                            INT32_C( 1035482990), INT32_C( 1183910939), INT32_C( 1515345934), INT32_C(-1884003639),
                            INT32_C( -638430290), INT32_C(-2007622482), INT32_C(  171336877), INT32_C(   59553613),
                            INT32_C(  165266600), INT32_C( -798384264), INT32_C( 1607584815), INT32_C(-1324336584)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(   641.22), SIMDE_FLOAT32_C(  -747.07), SIMDE_FLOAT32_C(  -762.67), SIMDE_FLOAT32_C(   744.11),
                         SIMDE_FLOAT32_C(   350.11), SIMDE_FLOAT32_C(   409.27), SIMDE_FLOAT32_C(   481.83), SIMDE_FLOAT32_C(   601.37),
                         SIMDE_FLOAT32_C(  -660.24), SIMDE_FLOAT32_C(  -675.56), SIMDE_FLOAT32_C(  -194.09), SIMDE_FLOAT32_C(   149.22),
                         SIMDE_FLOAT32_C(   161.52), SIMDE_FLOAT32_C(   632.78), SIMDE_FLOAT32_C(   346.90), SIMDE_FLOAT32_C(  -777.05)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(  -528.18), SIMDE_FLOAT32_C(   813.86), SIMDE_FLOAT32_C(   925.24), SIMDE_FLOAT32_C(   849.34),
                         SIMDE_FLOAT32_C(   112.68), SIMDE_FLOAT32_C(   -96.70), SIMDE_FLOAT32_C(   813.86), SIMDE_FLOAT32_C(   -44.05),
                         SIMDE_FLOAT32_C(   813.86), SIMDE_FLOAT32_C(   718.96), SIMDE_FLOAT32_C(  -864.59), SIMDE_FLOAT32_C(  -334.42),
                         SIMDE_FLOAT32_C(   660.53), SIMDE_FLOAT32_C(   601.37), SIMDE_FLOAT32_C(  -528.18), SIMDE_FLOAT32_C(   601.37)) },
    { simde_mm512_set_ps(SIMDE_FLOAT32_C(   211.34), SIMDE_FLOAT32_C(  -159.54), SIMDE_FLOAT32_C(   297.01), SIMDE_FLOAT32_C(   147.67),
                         SIMDE_FLOAT32_C(  -855.53), SIMDE_FLOAT32_C(   391.08), SIMDE_FLOAT32_C(  -710.54), SIMDE_FLOAT32_C(  -140.51),
                         SIMDE_FLOAT32_C(   346.36), SIMDE_FLOAT32_C(   318.14), SIMDE_FLOAT32_C(   399.19), SIMDE_FLOAT32_C(  -291.83),
                         SIMDE_FLOAT32_C(   951.57), SIMDE_FLOAT32_C(   272.52), SIMDE_FLOAT32_C(  -735.05), SIMDE_FLOAT32_C(     5.84)),
      UINT16_C(  487),
      simde_mm512_set_epi32(INT32_C(-2094713086), INT32_C(  197529411), INT32_C( 1055036471), INT32_C(  351897115),
                            INT32_C( 1594003471), INT32_C(-1709813294), INT32_C( -133653364), INT32_C(  -51462036),
                            INT32_C(   46796230), INT32_C(  989301899), INT32_C( -691937914), INT32_C( 1667629581),
                            INT32_C( -496700661), INT32_C(-1318801755), INT32_C( 1076515270), INT32_C(-1757573505)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(   739.21), SIMDE_FLOAT32_C(   355.61), SIMDE_FLOAT32_C(  -450.77), SIMDE_FLOAT32_C(   343.42),
                         SIMDE_FLOAT32_C(  -703.95), SIMDE_FLOAT32_C(   169.29), SIMDE_FLOAT32_C(   932.53), SIMDE_FLOAT32_C(  -653.71),
                         SIMDE_FLOAT32_C(   371.73), SIMDE_FLOAT32_C(   757.18), SIMDE_FLOAT32_C(   214.84), SIMDE_FLOAT32_C(   830.24),
                         SIMDE_FLOAT32_C(   903.53), SIMDE_FLOAT32_C(  -831.08), SIMDE_FLOAT32_C(   815.07), SIMDE_FLOAT32_C(   196.06)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(   211.34), SIMDE_FLOAT32_C(  -159.54), SIMDE_FLOAT32_C(   297.01), SIMDE_FLOAT32_C(   147.67),
                         SIMDE_FLOAT32_C(  -855.53), SIMDE_FLOAT32_C(   391.08), SIMDE_FLOAT32_C(  -710.54), SIMDE_FLOAT32_C(   147.67),
                         SIMDE_FLOAT32_C(   318.14), SIMDE_FLOAT32_C(  -855.53), SIMDE_FLOAT32_C(   318.14), SIMDE_FLOAT32_C(  -291.83),
                         SIMDE_FLOAT32_C(   951.57), SIMDE_FLOAT32_C(   399.19), SIMDE_FLOAT32_C(   318.14), SIMDE_FLOAT32_C(   739.21)) },
    { simde_mm512_set_ps(SIMDE_FLOAT32_C(  -482.01), SIMDE_FLOAT32_C(   218.00), SIMDE_FLOAT32_C(   412.00), SIMDE_FLOAT32_C(   409.50),
                         SIMDE_FLOAT32_C(  -290.29), SIMDE_FLOAT32_C(   337.59), SIMDE_FLOAT32_C(  -137.98), SIMDE_FLOAT32_C(   723.06),
                         SIMDE_FLOAT32_C(  -632.02), SIMDE_FLOAT32_C(   769.08), SIMDE_FLOAT32_C(  -269.22), SIMDE_FLOAT32_C(   771.53),
                         SIMDE_FLOAT32_C(   554.20), SIMDE_FLOAT32_C(   154.86), SIMDE_FLOAT32_C(   918.01), SIMDE_FLOAT32_C(   348.86)),
      UINT16_C(21630),
      simde_mm512_set_epi32(INT32_C( -501257427), INT32_C(-1329431510), INT32_C( 1005777948), INT32_C(  616430734),
                            INT32_C( 1581162255), INT32_C( 1497456456), INT32_C(-1170808415), INT32_C(-1014503666),
                            INT32_C(-1157750165), INT32_C( 1691363299), INT32_C( 1100655145), INT32_C(  673265711),
                            INT32_C( 1544659928), INT32_C(-1956803094), INT32_C( 1970109422), INT32_C(-1197844366)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(   904.77), SIMDE_FLOAT32_C(   -16.01), SIMDE_FLOAT32_C(    -8.87), SIMDE_FLOAT32_C(  -521.88),
                         SIMDE_FLOAT32_C(  -842.76), SIMDE_FLOAT32_C(   871.64), SIMDE_FLOAT32_C(   769.47), SIMDE_FLOAT32_C(  -997.66),
                         SIMDE_FLOAT32_C(   691.39), SIMDE_FLOAT32_C(   987.54), SIMDE_FLOAT32_C(  -288.94), SIMDE_FLOAT32_C(   506.40),
                         SIMDE_FLOAT32_C(  -318.39), SIMDE_FLOAT32_C(  -477.43), SIMDE_FLOAT32_C(   119.12), SIMDE_FLOAT32_C(   397.77)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(  -482.01), SIMDE_FLOAT32_C(   337.59), SIMDE_FLOAT32_C(   412.00), SIMDE_FLOAT32_C(   218.00),
                         SIMDE_FLOAT32_C(  -290.29), SIMDE_FLOAT32_C(   723.06), SIMDE_FLOAT32_C(  -137.98), SIMDE_FLOAT32_C(   723.06),
                         SIMDE_FLOAT32_C(  -632.02), SIMDE_FLOAT32_C(   554.20), SIMDE_FLOAT32_C(  -137.98), SIMDE_FLOAT32_C(  -482.01),
                         SIMDE_FLOAT32_C(  -997.66), SIMDE_FLOAT32_C(   337.59), SIMDE_FLOAT32_C(   218.00), SIMDE_FLOAT32_C(   348.86)) },
    { simde_mm512_set_ps(SIMDE_FLOAT32_C(  -714.57), SIMDE_FLOAT32_C(  -728.75), SIMDE_FLOAT32_C(  -712.01), SIMDE_FLOAT32_C(  -346.18),
                         SIMDE_FLOAT32_C(   238.27), SIMDE_FLOAT32_C(  -879.28), SIMDE_FLOAT32_C(  -391.86), SIMDE_FLOAT32_C(  -824.42),
                         SIMDE_FLOAT32_C(   939.74), SIMDE_FLOAT32_C(   471.05), SIMDE_FLOAT32_C(  -276.21), SIMDE_FLOAT32_C(   528.15),
                         SIMDE_FLOAT32_C(   113.46), SIMDE_FLOAT32_C(   829.33), SIMDE_FLOAT32_C(  -265.53), SIMDE_FLOAT32_C(  -933.24)),
      UINT16_C(42527),
      simde_mm512_set_epi32(INT32_C( -675362282), INT32_C(-1218762696), INT32_C(-1400182216), INT32_C(-2088680370),
                            INT32_C(-1895497877), INT32_C( 1563893931), INT32_C( 1105770515), INT32_C(-1745770541),
                            INT32_C(-1255255240), INT32_C( 1238532704), INT32_C(  995946229), INT32_C(  119517601),
                            INT32_C( 1389614040), INT32_C(-2032996348), INT32_C( 1996749952), INT32_C(  450477794)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(   705.41), SIMDE_FLOAT32_C(  -150.22), SIMDE_FLOAT32_C(   115.26), SIMDE_FLOAT32_C(  -433.46),
                         SIMDE_FLOAT32_C(  -112.53), SIMDE_FLOAT32_C(  -754.09), SIMDE_FLOAT32_C(  -873.63), SIMDE_FLOAT32_C(  -546.06),
                         SIMDE_FLOAT32_C(   126.79), SIMDE_FLOAT32_C(  -885.01), SIMDE_FLOAT32_C(   749.00), SIMDE_FLOAT32_C(  -249.67),
                         SIMDE_FLOAT32_C(  -471.39), SIMDE_FLOAT32_C(  -437.78), SIMDE_FLOAT32_C(  -357.63), SIMDE_FLOAT32_C(   772.54)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(  -885.01), SIMDE_FLOAT32_C(  -728.75), SIMDE_FLOAT32_C(  -546.06), SIMDE_FLOAT32_C(  -346.18),
                         SIMDE_FLOAT32_C(   238.27), SIMDE_FLOAT32_C(   238.27), SIMDE_FLOAT32_C(  -471.39), SIMDE_FLOAT32_C(  -824.42),
                         SIMDE_FLOAT32_C(   939.74), SIMDE_FLOAT32_C(   471.05), SIMDE_FLOAT32_C(  -276.21), SIMDE_FLOAT32_C(  -265.53),
                         SIMDE_FLOAT32_C(  -546.06), SIMDE_FLOAT32_C(   528.15), SIMDE_FLOAT32_C(  -933.24), SIMDE_FLOAT32_C(   829.33)) },
  };

  for (size_t i = 0 ; i < (sizeof(test_vec) / sizeof(test_vec[0])); i++) {
    simde__m512 r = simde_mm512_mask_permutex2var_ps(test_vec[i].a, test_vec[i].k, test_vec[i].idx, test_vec[i].b);
    simde_assert_m512_close(r, test_vec[i].r, 1);
 }

  return 0;
}

static int
test_simde_mm512_mask2_permutex2var_ps(SIMDE_MUNIT_TEST_ARGS) {
  const struct {
    simde__m512 a;
    simde__m512i idx;
    simde__mmask16 k;
    simde__m512 b;
    simde__m512 r;
  } test_vec[8] = {
    { simde_mm512_set_ps(SIMDE_FLOAT32_C(   877.96), SIMDE_FLOAT32_C(   184.43), SIMDE_FLOAT32_C(   375.34), SIMDE_FLOAT32_C(   389.76),
                         SIMDE_FLOAT32_C(   437.16), SIMDE_FLOAT32_C(  -638.93), SIMDE_FLOAT32_C(   773.45), SIMDE_FLOAT32_C(   109.31),
                         SIMDE_FLOAT32_C(   824.77), SIMDE_FLOAT32_C(   172.30), SIMDE_FLOAT32_C(  -660.39), SIMDE_FLOAT32_C(  -605.88),
                         SIMDE_FLOAT32_C(  -689.22), SIMDE_FLOAT32_C(   -25.12), SIMDE_FLOAT32_C(   921.58), SIMDE_FLOAT32_C(   433.31)),
      simde_mm512_set_epi32(INT32_C( 1145310577), INT32_C( 1144464671), INT32_C(-1000882995), INT32_C(-1015975772),
                            INT32_C(-1012966359), INT32_C( 1142785802), INT32_C(-1004452250), INT32_C(-1016706499),
                            INT32_C( 1148133540), INT32_C( 1143775396), INT32_C( 1145653494), INT32_C( 1092154819),
                            INT32_C(-1002177167), INT32_C( 1142945710), INT32_C(-1005107118), INT32_C(-1003331748)),
      UINT16_C( 7750),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(   467.94), SIMDE_FLOAT32_C(   141.60), SIMDE_FLOAT32_C(    23.96), SIMDE_FLOAT32_C(  -171.38),
                         SIMDE_FLOAT32_C(  -106.17), SIMDE_FLOAT32_C(  -737.60), SIMDE_FLOAT32_C(  -140.98), SIMDE_FLOAT32_C(  -735.83),
                         SIMDE_FLOAT32_C(  -867.63), SIMDE_FLOAT32_C(   -65.75), SIMDE_FLOAT32_C(   137.16), SIMDE_FLOAT32_C(   -73.36),
                         SIMDE_FLOAT32_C(  -396.53), SIMDE_FLOAT32_C(  -409.15), SIMDE_FLOAT32_C(   672.29), SIMDE_FLOAT32_C(   992.21)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(   784.21), SIMDE_FLOAT32_C(   732.58), SIMDE_FLOAT32_C(  -862.95), SIMDE_FLOAT32_C(  -605.88),
                         SIMDE_FLOAT32_C(   773.45), SIMDE_FLOAT32_C(  -638.93), SIMDE_FLOAT32_C(   172.30), SIMDE_FLOAT32_C(  -230.29),
                         SIMDE_FLOAT32_C(   956.51), SIMDE_FLOAT32_C(  -605.88), SIMDE_FLOAT32_C(   805.14), SIMDE_FLOAT32_C(     9.56),
                         SIMDE_FLOAT32_C(  -783.96), SIMDE_FLOAT32_C(   184.43), SIMDE_FLOAT32_C(  -409.15), SIMDE_FLOAT32_C(  -713.49)) },
    { simde_mm512_set_ps(SIMDE_FLOAT32_C(  -200.75), SIMDE_FLOAT32_C(  -165.75), SIMDE_FLOAT32_C(  -249.91), SIMDE_FLOAT32_C(  -394.72),
                         SIMDE_FLOAT32_C(   706.66), SIMDE_FLOAT32_C(  -789.81), SIMDE_FLOAT32_C(  -218.09), SIMDE_FLOAT32_C(  -475.08),
                         SIMDE_FLOAT32_C(   601.08), SIMDE_FLOAT32_C(  -590.62), SIMDE_FLOAT32_C(   446.98), SIMDE_FLOAT32_C(    51.90),
                         SIMDE_FLOAT32_C(   597.18), SIMDE_FLOAT32_C(   -19.20), SIMDE_FLOAT32_C(  -536.51), SIMDE_FLOAT32_C(   510.31)),
      simde_mm512_set_epi32(INT32_C( 1141430682), INT32_C( -998721126), INT32_C(-1006378189), INT32_C( 1133601096),
                            INT32_C(-1001273426), INT32_C( 1143976919), INT32_C(-1023309251), INT32_C( 1140917043),
                            INT32_C( 1146448282), INT32_C( 1140298875), INT32_C( -998775030), INT32_C( 1123123200),
                            INT32_C(-1008623616), INT32_C(-1003229512), INT32_C(-1013737062), INT32_C( 1137376297)),
      UINT16_C(36885),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(   985.03), SIMDE_FLOAT32_C(   291.60), SIMDE_FLOAT32_C(  -732.66), SIMDE_FLOAT32_C(   106.36),
                         SIMDE_FLOAT32_C(   883.40), SIMDE_FLOAT32_C(     8.63), SIMDE_FLOAT32_C(   178.77), SIMDE_FLOAT32_C(  -118.91),
                         SIMDE_FLOAT32_C(  -944.88), SIMDE_FLOAT32_C(  -743.12), SIMDE_FLOAT32_C(   752.91), SIMDE_FLOAT32_C(  -489.26),
                         SIMDE_FLOAT32_C(   163.33), SIMDE_FLOAT32_C(   566.34), SIMDE_FLOAT32_C(  -175.54), SIMDE_FLOAT32_C(  -823.41)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(     8.63), SIMDE_FLOAT32_C(  -994.90), SIMDE_FLOAT32_C(  -527.55), SIMDE_FLOAT32_C(  -475.08),
                         SIMDE_FLOAT32_C(  -839.12), SIMDE_FLOAT32_C(   702.81), SIMDE_FLOAT32_C(  -129.54), SIMDE_FLOAT32_C(   516.05),
                         SIMDE_FLOAT32_C(   853.65), SIMDE_FLOAT32_C(   495.16), SIMDE_FLOAT32_C(  -991.61), SIMDE_FLOAT32_C(   510.31),
                         SIMDE_FLOAT32_C(  -451.25), SIMDE_FLOAT32_C(  -118.91), SIMDE_FLOAT32_C(  -295.20), SIMDE_FLOAT32_C(  -218.09)) },
    { simde_mm512_set_ps(SIMDE_FLOAT32_C(  -242.78), SIMDE_FLOAT32_C(   250.83), SIMDE_FLOAT32_C(  -818.85), SIMDE_FLOAT32_C(  -959.57),
                         SIMDE_FLOAT32_C(   925.03), SIMDE_FLOAT32_C(  -644.70), SIMDE_FLOAT32_C(  -800.67), SIMDE_FLOAT32_C(   914.15),
                         SIMDE_FLOAT32_C(   333.29), SIMDE_FLOAT32_C(   760.10), SIMDE_FLOAT32_C(   397.05), SIMDE_FLOAT32_C(   356.22),
                         SIMDE_FLOAT32_C(    -4.35), SIMDE_FLOAT32_C(   408.12), SIMDE_FLOAT32_C(    89.10), SIMDE_FLOAT32_C(   557.43)),
      simde_mm512_set_epi32(INT32_C(-1000840397), INT32_C(-1014681108), INT32_C(-1002009723), INT32_C(-1001187082),
                            INT32_C(-1005810811), INT32_C(-1019216527), INT32_C( -999992852), INT32_C(-1002857595),
                            INT32_C( 1126940672), INT32_C( 1147155743), INT32_C( 1136568238), INT32_C(-1008068198),
                            INT32_C(-1019846328), INT32_C(-1004496650), INT32_C(-1000071004), INT32_C(-1004023153)),
      UINT16_C( 3523),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(  -645.40), SIMDE_FLOAT32_C(  -442.29), SIMDE_FLOAT32_C(  -336.85), SIMDE_FLOAT32_C(  -152.85),
                         SIMDE_FLOAT32_C(  -363.79), SIMDE_FLOAT32_C(  -614.03), SIMDE_FLOAT32_C(  -923.13), SIMDE_FLOAT32_C(   985.40),
                         SIMDE_FLOAT32_C(  -733.70), SIMDE_FLOAT32_C(   -80.62), SIMDE_FLOAT32_C(   200.37), SIMDE_FLOAT32_C(  -613.00),
                         SIMDE_FLOAT32_C(  -530.37), SIMDE_FLOAT32_C(   940.29), SIMDE_FLOAT32_C(  -837.65), SIMDE_FLOAT32_C(  -127.38)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(  -865.55), SIMDE_FLOAT32_C(  -266.39), SIMDE_FLOAT32_C(  -794.18), SIMDE_FLOAT32_C(  -844.39),
                         SIMDE_FLOAT32_C(   397.05), SIMDE_FLOAT32_C(  -837.65), SIMDE_FLOAT32_C(  -917.28), SIMDE_FLOAT32_C(   397.05),
                         SIMDE_FLOAT32_C(   557.43), SIMDE_FLOAT32_C(  -645.40), SIMDE_FLOAT32_C(   381.31), SIMDE_FLOAT32_C(  -468.20),
                         SIMDE_FLOAT32_C(  -182.38), SIMDE_FLOAT32_C(  -642.39), SIMDE_FLOAT32_C(   356.22), SIMDE_FLOAT32_C(  -242.78)) },
    { simde_mm512_set_ps(SIMDE_FLOAT32_C(   419.61), SIMDE_FLOAT32_C(  -753.42), SIMDE_FLOAT32_C(   687.05), SIMDE_FLOAT32_C(   241.87),
                         SIMDE_FLOAT32_C(   -80.26), SIMDE_FLOAT32_C(  -667.68), SIMDE_FLOAT32_C(   776.25), SIMDE_FLOAT32_C(  -748.43),
                         SIMDE_FLOAT32_C(   -53.25), SIMDE_FLOAT32_C(  -132.01), SIMDE_FLOAT32_C(  -767.78), SIMDE_FLOAT32_C(    -9.36),
                         SIMDE_FLOAT32_C(  -226.72), SIMDE_FLOAT32_C(  -661.68), SIMDE_FLOAT32_C(  -655.84), SIMDE_FLOAT32_C(  -744.21)),
      simde_mm512_set_epi32(INT32_C( -998850560), INT32_C( 1143600415), INT32_C(-1000731771), INT32_C( 1114277151),
                            INT32_C(-1010340332), INT32_C(-1001651732), INT32_C( 1143390372), INT32_C( 1119634063),
                            INT32_C(-1019717222), INT32_C(-1031045120), INT32_C(-1011098255), INT32_C( 1132600689),
                            INT32_C(-1010611978), INT32_C( 1128936899), INT32_C(-1001749053), INT32_C( 1140980122)),
      UINT16_C(37204),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(  -518.52), SIMDE_FLOAT32_C(   431.51), SIMDE_FLOAT32_C(    99.29), SIMDE_FLOAT32_C(   936.82),
                         SIMDE_FLOAT32_C(   -99.13), SIMDE_FLOAT32_C(  -566.48), SIMDE_FLOAT32_C(   699.34), SIMDE_FLOAT32_C(   845.75),
                         SIMDE_FLOAT32_C(    43.86), SIMDE_FLOAT32_C(  -170.77), SIMDE_FLOAT32_C(   428.74), SIMDE_FLOAT32_C(   695.01),
                         SIMDE_FLOAT32_C(  -702.60), SIMDE_FLOAT32_C(  -231.45), SIMDE_FLOAT32_C(  -416.99), SIMDE_FLOAT32_C(   838.71)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(  -744.21), SIMDE_FLOAT32_C(   679.83), SIMDE_FLOAT32_C(  -872.18), SIMDE_FLOAT32_C(  -518.52),
                         SIMDE_FLOAT32_C(  -398.86), SIMDE_FLOAT32_C(  -816.03), SIMDE_FLOAT32_C(   667.01), SIMDE_FLOAT32_C(   419.61),
                         SIMDE_FLOAT32_C(  -184.35), SIMDE_FLOAT32_C(  -744.21), SIMDE_FLOAT32_C(  -375.73), SIMDE_FLOAT32_C(  -416.99),
                         SIMDE_FLOAT32_C(  -390.57), SIMDE_FLOAT32_C(  -226.72), SIMDE_FLOAT32_C(  -810.09), SIMDE_FLOAT32_C(   519.90)) },
    { simde_mm512_set_ps(SIMDE_FLOAT32_C(   924.35), SIMDE_FLOAT32_C(  -647.29), SIMDE_FLOAT32_C(  -651.10), SIMDE_FLOAT32_C(   678.72),
                         SIMDE_FLOAT32_C(   318.50), SIMDE_FLOAT32_C(   607.02), SIMDE_FLOAT32_C(   959.46), SIMDE_FLOAT32_C(   708.40),
                         SIMDE_FLOAT32_C(   684.78), SIMDE_FLOAT32_C(   938.65), SIMDE_FLOAT32_C(    79.72), SIMDE_FLOAT32_C(  -367.19),
                         SIMDE_FLOAT32_C(  -848.84), SIMDE_FLOAT32_C(  -319.22), SIMDE_FLOAT32_C(   807.26), SIMDE_FLOAT32_C(  -797.03)),
      simde_mm512_set_epi32(INT32_C( 1144478269), INT32_C(-1014431089), INT32_C( 1145887785), INT32_C(-1000062648),
                            INT32_C(-1004164383), INT32_C(-1038973665), INT32_C(-1013049590), INT32_C( 1139362365),
                            INT32_C( 1143090545), INT32_C( 1142120612), INT32_C(-1031333478), INT32_C( 1146798899),
                            INT32_C( 1148490383), INT32_C( 1146840351), INT32_C(-1034768876), INT32_C(-1003322081)),
      UINT16_C(41858),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(   538.68), SIMDE_FLOAT32_C(  -878.56), SIMDE_FLOAT32_C(    48.75), SIMDE_FLOAT32_C(  -299.81),
                         SIMDE_FLOAT32_C(  -177.03), SIMDE_FLOAT32_C(  -530.47), SIMDE_FLOAT32_C(   848.40), SIMDE_FLOAT32_C(  -491.55),
                         SIMDE_FLOAT32_C(   978.68), SIMDE_FLOAT32_C(   838.38), SIMDE_FLOAT32_C(   198.53), SIMDE_FLOAT32_C(  -129.15),
                         SIMDE_FLOAT32_C(  -588.91), SIMDE_FLOAT32_C(   399.94), SIMDE_FLOAT32_C(    44.96), SIMDE_FLOAT32_C(   312.31)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(    48.75), SIMDE_FLOAT32_C(  -274.02), SIMDE_FLOAT32_C(   959.46), SIMDE_FLOAT32_C(  -913.02),
                         SIMDE_FLOAT32_C(  -662.67), SIMDE_FLOAT32_C(   -36.63), SIMDE_FLOAT32_C(   607.02), SIMDE_FLOAT32_C(    48.75),
                         SIMDE_FLOAT32_C(    44.96), SIMDE_FLOAT32_C(   589.51), SIMDE_FLOAT32_C(   -67.55), SIMDE_FLOAT32_C(   875.05),
                         SIMDE_FLOAT32_C(   978.29), SIMDE_FLOAT32_C(   877.58), SIMDE_FLOAT32_C(  -129.15), SIMDE_FLOAT32_C(  -714.08)) },
    { simde_mm512_set_ps(SIMDE_FLOAT32_C(  -944.36), SIMDE_FLOAT32_C(  -838.63), SIMDE_FLOAT32_C(    38.26), SIMDE_FLOAT32_C(  -152.44),
                         SIMDE_FLOAT32_C(   946.95), SIMDE_FLOAT32_C(  -423.59), SIMDE_FLOAT32_C(  -297.05), SIMDE_FLOAT32_C(  -205.88),
                         SIMDE_FLOAT32_C(  -253.64), SIMDE_FLOAT32_C(  -501.33), SIMDE_FLOAT32_C(   -37.12), SIMDE_FLOAT32_C(  -369.82),
                         SIMDE_FLOAT32_C(  -496.81), SIMDE_FLOAT32_C(   -47.73), SIMDE_FLOAT32_C(  -743.25), SIMDE_FLOAT32_C(  -913.65)),
      simde_mm512_set_epi32(INT32_C( 1148280996), INT32_C( 1141096448), INT32_C( 1147594179), INT32_C( 1133745603),
                            INT32_C( 1142890004), INT32_C(-1013119386), INT32_C( 1142369157), INT32_C( 1137598792),
                            INT32_C( -999746929), INT32_C(-1011464274), INT32_C( 1136544645), INT32_C( 1147671675),
                            INT32_C( 1148562964), INT32_C( 1137554883), INT32_C(-1006904934), INT32_C(-1018696172)),
      UINT16_C(58593),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(   -84.19), SIMDE_FLOAT32_C(   399.10), SIMDE_FLOAT32_C(  -610.29), SIMDE_FLOAT32_C(   149.87),
                         SIMDE_FLOAT32_C(   820.28), SIMDE_FLOAT32_C(  -278.06), SIMDE_FLOAT32_C(   765.67), SIMDE_FLOAT32_C(   664.38),
                         SIMDE_FLOAT32_C(  -117.33), SIMDE_FLOAT32_C(   617.04), SIMDE_FLOAT32_C(   690.47), SIMDE_FLOAT32_C(   983.05),
                         SIMDE_FLOAT32_C(   980.92), SIMDE_FLOAT32_C(  -996.65), SIMDE_FLOAT32_C(   209.60), SIMDE_FLOAT32_C(  -480.53)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(  -369.82), SIMDE_FLOAT32_C(  -913.65), SIMDE_FLOAT32_C(  -496.81), SIMDE_FLOAT32_C(   295.17),
                         SIMDE_FLOAT32_C(   636.47), SIMDE_FLOAT32_C(  -501.33), SIMDE_FLOAT32_C(   604.68), SIMDE_FLOAT32_C(   412.76),
                         SIMDE_FLOAT32_C(  -944.36), SIMDE_FLOAT32_C(  -838.63), SIMDE_FLOAT32_C(   -37.12), SIMDE_FLOAT32_C(   928.32),
                         SIMDE_FLOAT32_C(   982.72), SIMDE_FLOAT32_C(   411.42), SIMDE_FLOAT32_C(  -503.70), SIMDE_FLOAT32_C(   983.05)) },
    { simde_mm512_set_ps(SIMDE_FLOAT32_C(  -918.50), SIMDE_FLOAT32_C(  -515.44), SIMDE_FLOAT32_C(  -137.15), SIMDE_FLOAT32_C(   561.32),
                         SIMDE_FLOAT32_C(   501.72), SIMDE_FLOAT32_C(  -843.67), SIMDE_FLOAT32_C(  -326.79), SIMDE_FLOAT32_C(   106.60),
                         SIMDE_FLOAT32_C(   380.78), SIMDE_FLOAT32_C(     2.64), SIMDE_FLOAT32_C(  -699.45), SIMDE_FLOAT32_C(   503.17),
                         SIMDE_FLOAT32_C(  -803.82), SIMDE_FLOAT32_C(    78.52), SIMDE_FLOAT32_C(   647.26), SIMDE_FLOAT32_C(  -393.01)),
      simde_mm512_set_epi32(INT32_C( -999928627), INT32_C( 1129960571), INT32_C( 1099662623), INT32_C(-1017545359),
                            INT32_C( -999118602), INT32_C( 1144669635), INT32_C(-1000925266), INT32_C(-1002151281),
                            INT32_C(-1020877210), INT32_C(-1027625452), INT32_C(-1004458476), INT32_C(-1004674089),
                            INT32_C(-1004804342), INT32_C( 1143535534), INT32_C( 1125517230), INT32_C( 1132990300)),
      UINT16_C(14071),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(  -663.05), SIMDE_FLOAT32_C(  -657.03), SIMDE_FLOAT32_C(  -368.45), SIMDE_FLOAT32_C(   822.35),
                         SIMDE_FLOAT32_C(   469.97), SIMDE_FLOAT32_C(   973.10), SIMDE_FLOAT32_C(   419.44), SIMDE_FLOAT32_C(  -510.97),
                         SIMDE_FLOAT32_C(  -448.70), SIMDE_FLOAT32_C(  -780.36), SIMDE_FLOAT32_C(   722.25), SIMDE_FLOAT32_C(   745.47),
                         SIMDE_FLOAT32_C(   381.61), SIMDE_FLOAT32_C(   670.39), SIMDE_FLOAT32_C(    71.28), SIMDE_FLOAT32_C(  -178.06)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(  -921.20), SIMDE_FLOAT32_C(   217.83), SIMDE_FLOAT32_C(  -663.05), SIMDE_FLOAT32_C(    71.28),
                         SIMDE_FLOAT32_C(  -970.64), SIMDE_FLOAT32_C(  -803.82), SIMDE_FLOAT32_C(  -515.44), SIMDE_FLOAT32_C(  -785.54),
                         SIMDE_FLOAT32_C(     2.64), SIMDE_FLOAT32_C(   745.47), SIMDE_FLOAT32_C(   745.47), SIMDE_FLOAT32_C(  -448.70),
                         SIMDE_FLOAT32_C(  -623.61), SIMDE_FLOAT32_C(  -515.44), SIMDE_FLOAT32_C(  -515.44), SIMDE_FLOAT32_C(   822.35)) },
    { simde_mm512_set_ps(SIMDE_FLOAT32_C(  -199.95), SIMDE_FLOAT32_C(  -694.07), SIMDE_FLOAT32_C(   741.25), SIMDE_FLOAT32_C(  -612.71),
                         SIMDE_FLOAT32_C(   316.26), SIMDE_FLOAT32_C(  -621.79), SIMDE_FLOAT32_C(   163.37), SIMDE_FLOAT32_C(   389.35),
                         SIMDE_FLOAT32_C(   146.51), SIMDE_FLOAT32_C(   723.78), SIMDE_FLOAT32_C(   687.77), SIMDE_FLOAT32_C(   582.14),
                         SIMDE_FLOAT32_C(   891.09), SIMDE_FLOAT32_C(  -226.06), SIMDE_FLOAT32_C(   206.62), SIMDE_FLOAT32_C(   608.43)),
      simde_mm512_set_epi32(INT32_C( 1143844536), INT32_C(-1020415181), INT32_C(-1053032448), INT32_C( 1138942607),
                            INT32_C( 1134596915), INT32_C( 1146536264), INT32_C( 1145270436), INT32_C( 1147929395),
                            INT32_C( 1143444111), INT32_C( 1126843679), INT32_C(-1004511724), INT32_C( 1141078753),
                            INT32_C(-1010149949), INT32_C(-1005574062), INT32_C(-1016484332), INT32_C(-1003633050)),
      UINT16_C(28924),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(   725.47), SIMDE_FLOAT32_C(   989.71), SIMDE_FLOAT32_C(   233.61), SIMDE_FLOAT32_C(   876.86),
                         SIMDE_FLOAT32_C(  -135.15), SIMDE_FLOAT32_C(   476.19), SIMDE_FLOAT32_C(   231.31), SIMDE_FLOAT32_C(   -79.03),
                         SIMDE_FLOAT32_C(  -501.37), SIMDE_FLOAT32_C(   310.62), SIMDE_FLOAT32_C(   652.20), SIMDE_FLOAT32_C(  -426.66),
                         SIMDE_FLOAT32_C(  -323.40), SIMDE_FLOAT32_C(  -305.08), SIMDE_FLOAT32_C(    -4.94), SIMDE_FLOAT32_C(   -30.71)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(   694.73), SIMDE_FLOAT32_C(  -323.40), SIMDE_FLOAT32_C(   608.43), SIMDE_FLOAT32_C(  -199.95),
                         SIMDE_FLOAT32_C(   321.15), SIMDE_FLOAT32_C(   859.02), SIMDE_FLOAT32_C(   781.76), SIMDE_FLOAT32_C(   944.05),
                         SIMDE_FLOAT32_C(  -199.95), SIMDE_FLOAT32_C(   725.47), SIMDE_FLOAT32_C(  -426.66), SIMDE_FLOAT32_C(   206.62),
                         SIMDE_FLOAT32_C(   891.09), SIMDE_FLOAT32_C(  -305.08), SIMDE_FLOAT32_C(  -233.68), SIMDE_FLOAT32_C(  -695.10)) },
  };

  for (size_t i = 0 ; i < (sizeof(test_vec) / sizeof(test_vec[0])); i++) {
    simde__m512 r = simde_mm512_mask2_permutex2var_ps(test_vec[i].a, test_vec[i].idx, test_vec[i].k, test_vec[i].b);
    simde_assert_m512_close(r, test_vec[i].r, 1);
 }

  return 0;
}

static int
test_simde_mm512_maskz_permutex2var_ps(SIMDE_MUNIT_TEST_ARGS) {
  const struct {
    simde__mmask16 k;
    simde__m512 a;
    simde__m512i idx;
    simde__m512 b;
    simde__m512 r;
  } test_vec[8] = {
    { UINT16_C(45849),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(   232.04), SIMDE_FLOAT32_C(   774.81), SIMDE_FLOAT32_C(  -599.01), SIMDE_FLOAT32_C(    69.04),
                         SIMDE_FLOAT32_C(  -149.02), SIMDE_FLOAT32_C(   240.79), SIMDE_FLOAT32_C(  -839.80), SIMDE_FLOAT32_C(  -556.90),
                         SIMDE_FLOAT32_C(   160.98), SIMDE_FLOAT32_C(   391.82), SIMDE_FLOAT32_C(  -569.99), SIMDE_FLOAT32_C(  -327.63),
                         SIMDE_FLOAT32_C(  -172.36), SIMDE_FLOAT32_C(   393.53), SIMDE_FLOAT32_C(    36.69), SIMDE_FLOAT32_C(  -135.52)),
      simde_mm512_set_epi32(INT32_C( 1711460779), INT32_C( -919570191), INT32_C( 1974152373), INT32_C( -695949043),
                            INT32_C( -790242624), INT32_C(-1094331335), INT32_C(-1166320093), INT32_C(-2045280751),
                            INT32_C(-2037261521), INT32_C(  223952317), INT32_C(  282198336), INT32_C(  564965997),
                            INT32_C(  169645898), INT32_C(-1539616610), INT32_C( 1134735685), INT32_C( 1430356381)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(   903.50), SIMDE_FLOAT32_C(   -43.35), SIMDE_FLOAT32_C(   309.91), SIMDE_FLOAT32_C(   846.15),
                         SIMDE_FLOAT32_C(  -514.56), SIMDE_FLOAT32_C(  -860.98), SIMDE_FLOAT32_C(  -280.30), SIMDE_FLOAT32_C(   128.51),
                         SIMDE_FLOAT32_C(   522.06), SIMDE_FLOAT32_C(  -932.28), SIMDE_FLOAT32_C(   600.12), SIMDE_FLOAT32_C(  -491.12),
                         SIMDE_FLOAT32_C(  -139.11), SIMDE_FLOAT32_C(  -268.86), SIMDE_FLOAT32_C(   -71.72), SIMDE_FLOAT32_C(    98.47)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(  -149.02), SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(   600.12), SIMDE_FLOAT32_C(  -599.01),
                         SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(  -172.36), SIMDE_FLOAT32_C(   -71.72),
                         SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(  -599.01),
                         SIMDE_FLOAT32_C(   240.79), SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(   309.91)) },
    { UINT16_C(30259),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(  -760.88), SIMDE_FLOAT32_C(  -617.12), SIMDE_FLOAT32_C(  -751.58), SIMDE_FLOAT32_C(   907.23),
                         SIMDE_FLOAT32_C(  -359.60), SIMDE_FLOAT32_C(  -213.75), SIMDE_FLOAT32_C(   403.00), SIMDE_FLOAT32_C(  -198.67),
                         SIMDE_FLOAT32_C(   447.98), SIMDE_FLOAT32_C(  -925.69), SIMDE_FLOAT32_C(   717.83), SIMDE_FLOAT32_C(  -489.88),
                         SIMDE_FLOAT32_C(   -37.49), SIMDE_FLOAT32_C(  -373.66), SIMDE_FLOAT32_C(  -292.35), SIMDE_FLOAT32_C(  -835.53)),
      simde_mm512_set_epi32(INT32_C( 1701079465), INT32_C( -195770682), INT32_C(  503748315), INT32_C( 1469355417),
                            INT32_C(-1849349632), INT32_C( 1962664621), INT32_C( -646247370), INT32_C( 1258747662),
                            INT32_C( 1838830023), INT32_C( -532007659), INT32_C( -622852205), INT32_C( -839037220),
                            INT32_C(  499633910), INT32_C( -260167255), INT32_C(  884163960), INT32_C( -329275629)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(   670.52), SIMDE_FLOAT32_C(   149.72), SIMDE_FLOAT32_C(   213.24), SIMDE_FLOAT32_C(  -577.36),
                         SIMDE_FLOAT32_C(   957.37), SIMDE_FLOAT32_C(  -934.92), SIMDE_FLOAT32_C(  -657.02), SIMDE_FLOAT32_C(  -629.37),
                         SIMDE_FLOAT32_C(   337.35), SIMDE_FLOAT32_C(  -278.32), SIMDE_FLOAT32_C(  -744.41), SIMDE_FLOAT32_C(    39.32),
                         SIMDE_FLOAT32_C(    29.68), SIMDE_FLOAT32_C(  -490.28), SIMDE_FLOAT32_C(   841.53), SIMDE_FLOAT32_C(   526.21)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(  -925.69), SIMDE_FLOAT32_C(   957.37), SIMDE_FLOAT32_C(  -657.02),
                         SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(  -751.58), SIMDE_FLOAT32_C(  -278.32), SIMDE_FLOAT32_C(     0.00),
                         SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(    29.68), SIMDE_FLOAT32_C(  -577.36),
                         SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(  -629.37), SIMDE_FLOAT32_C(    29.68)) },
    { UINT16_C(60970),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(   493.30), SIMDE_FLOAT32_C(   831.29), SIMDE_FLOAT32_C(  -619.50), SIMDE_FLOAT32_C(   952.47),
                         SIMDE_FLOAT32_C(  -492.61), SIMDE_FLOAT32_C(   -68.16), SIMDE_FLOAT32_C(   717.69), SIMDE_FLOAT32_C(  -663.74),
                         SIMDE_FLOAT32_C(   179.29), SIMDE_FLOAT32_C(   989.70), SIMDE_FLOAT32_C(  -695.21), SIMDE_FLOAT32_C(  -786.23),
                         SIMDE_FLOAT32_C(   873.30), SIMDE_FLOAT32_C(   241.45), SIMDE_FLOAT32_C(  -432.13), SIMDE_FLOAT32_C(  -842.15)),
      simde_mm512_set_epi32(INT32_C(  204417556), INT32_C(-1329665093), INT32_C(-2039025377), INT32_C( 1639231015),
                            INT32_C( 1541217841), INT32_C( 1692413538), INT32_C(  738521275), INT32_C(  159429100),
                            INT32_C(  451955897), INT32_C(  181201098), INT32_C(  450627934), INT32_C( 2082954477),
                            INT32_C( 1254960767), INT32_C( 1995459397), INT32_C(  -11572946), INT32_C(-1087388220)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(    52.79), SIMDE_FLOAT32_C(   835.54), SIMDE_FLOAT32_C(  -712.24), SIMDE_FLOAT32_C(   518.12),
                         SIMDE_FLOAT32_C(  -173.80), SIMDE_FLOAT32_C(   487.08), SIMDE_FLOAT32_C(   180.78), SIMDE_FLOAT32_C(  -289.23),
                         SIMDE_FLOAT32_C(   918.52), SIMDE_FLOAT32_C(  -422.76), SIMDE_FLOAT32_C(  -433.33), SIMDE_FLOAT32_C(    48.49),
                         SIMDE_FLOAT32_C(   799.57), SIMDE_FLOAT32_C(  -820.22), SIMDE_FLOAT32_C(  -959.11), SIMDE_FLOAT32_C(   268.99)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(    48.49), SIMDE_FLOAT32_C(  -173.80), SIMDE_FLOAT32_C(    52.79), SIMDE_FLOAT32_C(     0.00),
                         SIMDE_FLOAT32_C(  -959.11), SIMDE_FLOAT32_C(   241.45), SIMDE_FLOAT32_C(  -173.80), SIMDE_FLOAT32_C(     0.00),
                         SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(   835.54), SIMDE_FLOAT32_C(     0.00),
                         SIMDE_FLOAT32_C(    52.79), SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(   831.29), SIMDE_FLOAT32_C(     0.00)) },
    { UINT16_C(48011),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(  -844.73), SIMDE_FLOAT32_C(   757.65), SIMDE_FLOAT32_C(   677.41), SIMDE_FLOAT32_C(  -352.24),
                         SIMDE_FLOAT32_C(  -479.79), SIMDE_FLOAT32_C(   602.83), SIMDE_FLOAT32_C(     2.55), SIMDE_FLOAT32_C(  -388.47),
                         SIMDE_FLOAT32_C(  -643.43), SIMDE_FLOAT32_C(  -331.34), SIMDE_FLOAT32_C(    72.67), SIMDE_FLOAT32_C(  -870.79),
                         SIMDE_FLOAT32_C(  -722.44), SIMDE_FLOAT32_C(   529.44), SIMDE_FLOAT32_C(  -949.73), SIMDE_FLOAT32_C(   280.87)),
      simde_mm512_set_epi32(INT32_C( -811849174), INT32_C(-1510825074), INT32_C( 1897985966), INT32_C( 1445172644),
                            INT32_C( -193622280), INT32_C( 2097959091), INT32_C( -652080500), INT32_C( 1943026961),
                            INT32_C(  763848022), INT32_C(-2124387583), INT32_C(-1102663841), INT32_C(  712044568),
                            INT32_C( 1641785760), INT32_C( 1696516135), INT32_C(-1123374630), INT32_C( -181070601)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(   -53.79), SIMDE_FLOAT32_C(   703.31), SIMDE_FLOAT32_C(   930.79), SIMDE_FLOAT32_C(   111.33),
                         SIMDE_FLOAT32_C(  -176.75), SIMDE_FLOAT32_C(  -316.94), SIMDE_FLOAT32_C(   639.68), SIMDE_FLOAT32_C(  -783.00),
                         SIMDE_FLOAT32_C(  -102.18), SIMDE_FLOAT32_C(   960.00), SIMDE_FLOAT32_C(    22.93), SIMDE_FLOAT32_C(  -395.13),
                         SIMDE_FLOAT32_C(   145.63), SIMDE_FLOAT32_C(  -149.04), SIMDE_FLOAT32_C(   214.37), SIMDE_FLOAT32_C(  -453.25)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(   602.83), SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(   757.65), SIMDE_FLOAT32_C(  -870.79),
                         SIMDE_FLOAT32_C(  -783.00), SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(  -352.24), SIMDE_FLOAT32_C(   214.37),
                         SIMDE_FLOAT32_C(   960.00), SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(     0.00),
                         SIMDE_FLOAT32_C(   280.87), SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(  -316.94), SIMDE_FLOAT32_C(  -102.18)) },
    { UINT16_C(  903),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(  -528.18), SIMDE_FLOAT32_C(   813.86), SIMDE_FLOAT32_C(   925.24), SIMDE_FLOAT32_C(   849.34),
                         SIMDE_FLOAT32_C(   112.68), SIMDE_FLOAT32_C(   -96.70), SIMDE_FLOAT32_C(   -44.05), SIMDE_FLOAT32_C(   432.42),
                         SIMDE_FLOAT32_C(   421.92), SIMDE_FLOAT32_C(   718.96), SIMDE_FLOAT32_C(  -864.59), SIMDE_FLOAT32_C(  -334.42),
                         SIMDE_FLOAT32_C(   660.53), SIMDE_FLOAT32_C(   748.73), SIMDE_FLOAT32_C(   996.15), SIMDE_FLOAT32_C(  -607.82)),
      simde_mm512_set_epi32(INT32_C( 1969107101), INT32_C(-2063427243), INT32_C( -670405092), INT32_C(-1879729053),
                            INT32_C( 1035482990), INT32_C( 1183910939), INT32_C( 1515345934), INT32_C(-1884003639),
                            INT32_C( -638430290), INT32_C(-2007622482), INT32_C(  171336877), INT32_C(   59553613),
                            INT32_C(  165266600), INT32_C( -798384264), INT32_C( 1607584815), INT32_C(-1324336584)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(   641.22), SIMDE_FLOAT32_C(  -747.07), SIMDE_FLOAT32_C(  -762.67), SIMDE_FLOAT32_C(   744.11),
                         SIMDE_FLOAT32_C(   350.11), SIMDE_FLOAT32_C(   409.27), SIMDE_FLOAT32_C(   481.83), SIMDE_FLOAT32_C(   601.37),
                         SIMDE_FLOAT32_C(  -660.24), SIMDE_FLOAT32_C(  -675.56), SIMDE_FLOAT32_C(  -194.09), SIMDE_FLOAT32_C(   149.22),
                         SIMDE_FLOAT32_C(   161.52), SIMDE_FLOAT32_C(   632.78), SIMDE_FLOAT32_C(   346.90), SIMDE_FLOAT32_C(  -777.05)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(     0.00),
                         SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(   813.86), SIMDE_FLOAT32_C(   -44.05),
                         SIMDE_FLOAT32_C(   813.86), SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(     0.00),
                         SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(   601.37), SIMDE_FLOAT32_C(  -528.18), SIMDE_FLOAT32_C(   601.37)) },
    { UINT16_C(  487),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(   211.34), SIMDE_FLOAT32_C(  -159.54), SIMDE_FLOAT32_C(   297.01), SIMDE_FLOAT32_C(   147.67),
                         SIMDE_FLOAT32_C(  -855.53), SIMDE_FLOAT32_C(   391.08), SIMDE_FLOAT32_C(  -710.54), SIMDE_FLOAT32_C(  -140.51),
                         SIMDE_FLOAT32_C(   346.36), SIMDE_FLOAT32_C(   318.14), SIMDE_FLOAT32_C(   399.19), SIMDE_FLOAT32_C(  -291.83),
                         SIMDE_FLOAT32_C(   951.57), SIMDE_FLOAT32_C(   272.52), SIMDE_FLOAT32_C(  -735.05), SIMDE_FLOAT32_C(     5.84)),
      simde_mm512_set_epi32(INT32_C(-2094713086), INT32_C(  197529411), INT32_C( 1055036471), INT32_C(  351897115),
                            INT32_C( 1594003471), INT32_C(-1709813294), INT32_C( -133653364), INT32_C(  -51462036),
                            INT32_C(   46796230), INT32_C(  989301899), INT32_C( -691937914), INT32_C( 1667629581),
                            INT32_C( -496700661), INT32_C(-1318801755), INT32_C( 1076515270), INT32_C(-1757573505)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(   739.21), SIMDE_FLOAT32_C(   355.61), SIMDE_FLOAT32_C(  -450.77), SIMDE_FLOAT32_C(   343.42),
                         SIMDE_FLOAT32_C(  -703.95), SIMDE_FLOAT32_C(   169.29), SIMDE_FLOAT32_C(   932.53), SIMDE_FLOAT32_C(  -653.71),
                         SIMDE_FLOAT32_C(   371.73), SIMDE_FLOAT32_C(   757.18), SIMDE_FLOAT32_C(   214.84), SIMDE_FLOAT32_C(   830.24),
                         SIMDE_FLOAT32_C(   903.53), SIMDE_FLOAT32_C(  -831.08), SIMDE_FLOAT32_C(   815.07), SIMDE_FLOAT32_C(   196.06)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(     0.00),
                         SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(   147.67),
                         SIMDE_FLOAT32_C(   318.14), SIMDE_FLOAT32_C(  -855.53), SIMDE_FLOAT32_C(   318.14), SIMDE_FLOAT32_C(     0.00),
                         SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(   399.19), SIMDE_FLOAT32_C(   318.14), SIMDE_FLOAT32_C(   739.21)) },
    { UINT16_C(21630),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(  -482.01), SIMDE_FLOAT32_C(   218.00), SIMDE_FLOAT32_C(   412.00), SIMDE_FLOAT32_C(   409.50),
                         SIMDE_FLOAT32_C(  -290.29), SIMDE_FLOAT32_C(   337.59), SIMDE_FLOAT32_C(  -137.98), SIMDE_FLOAT32_C(   723.06),
                         SIMDE_FLOAT32_C(  -632.02), SIMDE_FLOAT32_C(   769.08), SIMDE_FLOAT32_C(  -269.22), SIMDE_FLOAT32_C(   771.53),
                         SIMDE_FLOAT32_C(   554.20), SIMDE_FLOAT32_C(   154.86), SIMDE_FLOAT32_C(   918.01), SIMDE_FLOAT32_C(   348.86)),
      simde_mm512_set_epi32(INT32_C( -501257427), INT32_C(-1329431510), INT32_C( 1005777948), INT32_C(  616430734),
                            INT32_C( 1581162255), INT32_C( 1497456456), INT32_C(-1170808415), INT32_C(-1014503666),
                            INT32_C(-1157750165), INT32_C( 1691363299), INT32_C( 1100655145), INT32_C(  673265711),
                            INT32_C( 1544659928), INT32_C(-1956803094), INT32_C( 1970109422), INT32_C(-1197844366)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(   904.77), SIMDE_FLOAT32_C(   -16.01), SIMDE_FLOAT32_C(    -8.87), SIMDE_FLOAT32_C(  -521.88),
                         SIMDE_FLOAT32_C(  -842.76), SIMDE_FLOAT32_C(   871.64), SIMDE_FLOAT32_C(   769.47), SIMDE_FLOAT32_C(  -997.66),
                         SIMDE_FLOAT32_C(   691.39), SIMDE_FLOAT32_C(   987.54), SIMDE_FLOAT32_C(  -288.94), SIMDE_FLOAT32_C(   506.40),
                         SIMDE_FLOAT32_C(  -318.39), SIMDE_FLOAT32_C(  -477.43), SIMDE_FLOAT32_C(   119.12), SIMDE_FLOAT32_C(   397.77)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(   337.59), SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(   218.00),
                         SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(   723.06), SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(     0.00),
                         SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(   554.20), SIMDE_FLOAT32_C(  -137.98), SIMDE_FLOAT32_C(  -482.01),
                         SIMDE_FLOAT32_C(  -997.66), SIMDE_FLOAT32_C(   337.59), SIMDE_FLOAT32_C(   218.00), SIMDE_FLOAT32_C(     0.00)) },
    { UINT16_C(42527),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(  -714.57), SIMDE_FLOAT32_C(  -728.75), SIMDE_FLOAT32_C(  -712.01), SIMDE_FLOAT32_C(  -346.18),
                         SIMDE_FLOAT32_C(   238.27), SIMDE_FLOAT32_C(  -879.28), SIMDE_FLOAT32_C(  -391.86), SIMDE_FLOAT32_C(  -824.42),
                         SIMDE_FLOAT32_C(   939.74), SIMDE_FLOAT32_C(   471.05), SIMDE_FLOAT32_C(  -276.21), SIMDE_FLOAT32_C(   528.15),
                         SIMDE_FLOAT32_C(   113.46), SIMDE_FLOAT32_C(   829.33), SIMDE_FLOAT32_C(  -265.53), SIMDE_FLOAT32_C(  -933.24)),
      simde_mm512_set_epi32(INT32_C( -675362282), INT32_C(-1218762696), INT32_C(-1400182216), INT32_C(-2088680370),
                            INT32_C(-1895497877), INT32_C( 1563893931), INT32_C( 1105770515), INT32_C(-1745770541),
                            INT32_C(-1255255240), INT32_C( 1238532704), INT32_C(  995946229), INT32_C(  119517601),
                            INT32_C( 1389614040), INT32_C(-2032996348), INT32_C( 1996749952), INT32_C(  450477794)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(   705.41), SIMDE_FLOAT32_C(  -150.22), SIMDE_FLOAT32_C(   115.26), SIMDE_FLOAT32_C(  -433.46),
                         SIMDE_FLOAT32_C(  -112.53), SIMDE_FLOAT32_C(  -754.09), SIMDE_FLOAT32_C(  -873.63), SIMDE_FLOAT32_C(  -546.06),
                         SIMDE_FLOAT32_C(   126.79), SIMDE_FLOAT32_C(  -885.01), SIMDE_FLOAT32_C(   749.00), SIMDE_FLOAT32_C(  -249.67),
                         SIMDE_FLOAT32_C(  -471.39), SIMDE_FLOAT32_C(  -437.78), SIMDE_FLOAT32_C(  -357.63), SIMDE_FLOAT32_C(   772.54)),
      simde_mm512_set_ps(SIMDE_FLOAT32_C(  -885.01), SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(  -546.06), SIMDE_FLOAT32_C(     0.00),
                         SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(   238.27), SIMDE_FLOAT32_C(  -471.39), SIMDE_FLOAT32_C(     0.00),
                         SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(     0.00), SIMDE_FLOAT32_C(  -265.53),
                         SIMDE_FLOAT32_C(  -546.06), SIMDE_FLOAT32_C(   528.15), SIMDE_FLOAT32_C(  -933.24), SIMDE_FLOAT32_C(   829.33)) },
  };

  for (size_t i = 0 ; i < (sizeof(test_vec) / sizeof(test_vec[0])); i++) {
    simde__m512 r = simde_mm512_maskz_permutex2var_ps(test_vec[i].k, test_vec[i].a, test_vec[i].idx, test_vec[i].b);
    simde_assert_m512_close(r, test_vec[i].r, 1);
 }

  return 0;
}

SIMDE_TEST_FUNC_LIST_BEGIN
  SIMDE_TEST_FUNC_LIST_ENTRY(mm512_permutex2var_epi32)
  SIMDE_TEST_FUNC_LIST_ENTRY(mm512_mask_permutex2var_epi32)
  SIMDE_TEST_FUNC_LIST_ENTRY(mm512_mask2_permutex2var_epi32)
  SIMDE_TEST_FUNC_LIST_ENTRY(mm512_maskz_permutex2var_epi32)
  SIMDE_TEST_FUNC_LIST_ENTRY(mm512_permutex2var_epi64)
  SIMDE_TEST_FUNC_LIST_ENTRY(mm512_mask_permutex2var_epi64)
  SIMDE_TEST_FUNC_LIST_ENTRY(mm512_mask2_permutex2var_epi64)
  SIMDE_TEST_FUNC_LIST_ENTRY(mm512_maskz_permutex2var_epi64)
  SIMDE_TEST_FUNC_LIST_ENTRY(mm512_permutex2var_pd)
  SIMDE_TEST_FUNC_LIST_ENTRY(mm512_mask_permutex2var_pd)
  SIMDE_TEST_FUNC_LIST_ENTRY(mm512_mask2_permutex2var_pd)
  SIMDE_TEST_FUNC_LIST_ENTRY(mm512_maskz_permutex2var_pd)
  SIMDE_TEST_FUNC_LIST_ENTRY(mm512_permutex2var_ps)
  SIMDE_TEST_FUNC_LIST_ENTRY(mm512_mask_permutex2var_ps)
  SIMDE_TEST_FUNC_LIST_ENTRY(mm512_mask2_permutex2var_ps)
  SIMDE_TEST_FUNC_LIST_ENTRY(mm512_maskz_permutex2var_ps)
SIMDE_TEST_FUNC_LIST_END

#include <test/x86/avx512/test-avx512-footer.h>
