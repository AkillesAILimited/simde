/* SPDX-License-Identifier: MIT
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use, copy,
 * modify, merge, publish, distribute, sublicense, and/or sell copies
 * of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS
 * BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN
 * ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 * Copyright:
 *   2020      Evan Nemerson <evan@nemerson.com>
 */

#define SIMDE_TEST_X86_AVX512_INSN set

#include <test/x86/avx512/test-avx512.h>
#include <simde/x86/avx512/set.h>

static int
test_simde_mm512_set_ps (SIMDE_MUNIT_TEST_ARGS) {
#if 1
  static const struct {
    const simde_float32 a[16];
    const simde_float32 r[16];
  } test_vec[] = {
    { { SIMDE_FLOAT32_C(  -967.45), SIMDE_FLOAT32_C(   555.14), SIMDE_FLOAT32_C(   395.62), SIMDE_FLOAT32_C(   646.95),
        SIMDE_FLOAT32_C(    -7.99), SIMDE_FLOAT32_C(  -159.39), SIMDE_FLOAT32_C(  -204.24), SIMDE_FLOAT32_C(    19.62),
        SIMDE_FLOAT32_C(   980.65), SIMDE_FLOAT32_C(  -174.06), SIMDE_FLOAT32_C(  -131.07), SIMDE_FLOAT32_C(   -28.25),
        SIMDE_FLOAT32_C(  -768.63), SIMDE_FLOAT32_C(   553.54), SIMDE_FLOAT32_C(   497.97), SIMDE_FLOAT32_C(  -142.92) },
      { SIMDE_FLOAT32_C(  -967.45), SIMDE_FLOAT32_C(   555.14), SIMDE_FLOAT32_C(   395.62), SIMDE_FLOAT32_C(   646.95),
        SIMDE_FLOAT32_C(    -7.99), SIMDE_FLOAT32_C(  -159.39), SIMDE_FLOAT32_C(  -204.24), SIMDE_FLOAT32_C(    19.62),
        SIMDE_FLOAT32_C(   980.65), SIMDE_FLOAT32_C(  -174.06), SIMDE_FLOAT32_C(  -131.07), SIMDE_FLOAT32_C(   -28.25),
        SIMDE_FLOAT32_C(  -768.63), SIMDE_FLOAT32_C(   553.54), SIMDE_FLOAT32_C(   497.97), SIMDE_FLOAT32_C(  -142.92) } },
    { { SIMDE_FLOAT32_C(   -51.14), SIMDE_FLOAT32_C(    28.70), SIMDE_FLOAT32_C(  -598.25), SIMDE_FLOAT32_C(   911.70),
        SIMDE_FLOAT32_C(  -905.59), SIMDE_FLOAT32_C(   815.98), SIMDE_FLOAT32_C(  -798.54), SIMDE_FLOAT32_C(  -677.94),
        SIMDE_FLOAT32_C(   697.56), SIMDE_FLOAT32_C(  -111.92), SIMDE_FLOAT32_C(  -783.66), SIMDE_FLOAT32_C(   226.91),
        SIMDE_FLOAT32_C(  -846.01), SIMDE_FLOAT32_C(   293.51), SIMDE_FLOAT32_C(    37.49), SIMDE_FLOAT32_C(  -813.46) },
      { SIMDE_FLOAT32_C(   -51.14), SIMDE_FLOAT32_C(    28.70), SIMDE_FLOAT32_C(  -598.25), SIMDE_FLOAT32_C(   911.70),
        SIMDE_FLOAT32_C(  -905.59), SIMDE_FLOAT32_C(   815.98), SIMDE_FLOAT32_C(  -798.54), SIMDE_FLOAT32_C(  -677.94),
        SIMDE_FLOAT32_C(   697.56), SIMDE_FLOAT32_C(  -111.92), SIMDE_FLOAT32_C(  -783.66), SIMDE_FLOAT32_C(   226.91),
        SIMDE_FLOAT32_C(  -846.01), SIMDE_FLOAT32_C(   293.51), SIMDE_FLOAT32_C(    37.49), SIMDE_FLOAT32_C(  -813.46) } },
    { { SIMDE_FLOAT32_C(  -151.35), SIMDE_FLOAT32_C(  -566.88), SIMDE_FLOAT32_C(   833.49), SIMDE_FLOAT32_C(   840.66),
        SIMDE_FLOAT32_C(   273.73), SIMDE_FLOAT32_C(  -370.75), SIMDE_FLOAT32_C(  -139.72), SIMDE_FLOAT32_C(   254.38),
        SIMDE_FLOAT32_C(   455.19), SIMDE_FLOAT32_C(   729.21), SIMDE_FLOAT32_C(  -773.88), SIMDE_FLOAT32_C(   686.56),
        SIMDE_FLOAT32_C(   282.75), SIMDE_FLOAT32_C(   724.10), SIMDE_FLOAT32_C(  -456.37), SIMDE_FLOAT32_C(  -768.39) },
      { SIMDE_FLOAT32_C(  -151.35), SIMDE_FLOAT32_C(  -566.88), SIMDE_FLOAT32_C(   833.49), SIMDE_FLOAT32_C(   840.66),
        SIMDE_FLOAT32_C(   273.73), SIMDE_FLOAT32_C(  -370.75), SIMDE_FLOAT32_C(  -139.72), SIMDE_FLOAT32_C(   254.38),
        SIMDE_FLOAT32_C(   455.19), SIMDE_FLOAT32_C(   729.21), SIMDE_FLOAT32_C(  -773.88), SIMDE_FLOAT32_C(   686.56),
        SIMDE_FLOAT32_C(   282.75), SIMDE_FLOAT32_C(   724.10), SIMDE_FLOAT32_C(  -456.37), SIMDE_FLOAT32_C(  -768.39) } },
    { { SIMDE_FLOAT32_C(  -247.20), SIMDE_FLOAT32_C(   -54.62), SIMDE_FLOAT32_C(  -856.69), SIMDE_FLOAT32_C(  -152.80),
        SIMDE_FLOAT32_C(  -238.64), SIMDE_FLOAT32_C(  -655.23), SIMDE_FLOAT32_C(   169.26), SIMDE_FLOAT32_C(  -541.09),
        SIMDE_FLOAT32_C(   232.84), SIMDE_FLOAT32_C(   385.60), SIMDE_FLOAT32_C(   685.83), SIMDE_FLOAT32_C(   386.84),
        SIMDE_FLOAT32_C(  -320.88), SIMDE_FLOAT32_C(  -276.68), SIMDE_FLOAT32_C(   573.38), SIMDE_FLOAT32_C(   527.77) },
      { SIMDE_FLOAT32_C(  -247.20), SIMDE_FLOAT32_C(   -54.62), SIMDE_FLOAT32_C(  -856.69), SIMDE_FLOAT32_C(  -152.80),
        SIMDE_FLOAT32_C(  -238.64), SIMDE_FLOAT32_C(  -655.23), SIMDE_FLOAT32_C(   169.26), SIMDE_FLOAT32_C(  -541.09),
        SIMDE_FLOAT32_C(   232.84), SIMDE_FLOAT32_C(   385.60), SIMDE_FLOAT32_C(   685.83), SIMDE_FLOAT32_C(   386.84),
        SIMDE_FLOAT32_C(  -320.88), SIMDE_FLOAT32_C(  -276.68), SIMDE_FLOAT32_C(   573.38), SIMDE_FLOAT32_C(   527.77) } },
    { { SIMDE_FLOAT32_C(   156.44), SIMDE_FLOAT32_C(   406.87), SIMDE_FLOAT32_C(   368.42), SIMDE_FLOAT32_C(  -569.84),
        SIMDE_FLOAT32_C(  -963.88), SIMDE_FLOAT32_C(  -771.30), SIMDE_FLOAT32_C(   684.54), SIMDE_FLOAT32_C(   491.30),
        SIMDE_FLOAT32_C(   957.91), SIMDE_FLOAT32_C(   910.66), SIMDE_FLOAT32_C(   177.86), SIMDE_FLOAT32_C(   240.66),
        SIMDE_FLOAT32_C(   634.76), SIMDE_FLOAT32_C(   721.49), SIMDE_FLOAT32_C(   472.26), SIMDE_FLOAT32_C(  -612.44) },
      { SIMDE_FLOAT32_C(   156.44), SIMDE_FLOAT32_C(   406.87), SIMDE_FLOAT32_C(   368.42), SIMDE_FLOAT32_C(  -569.84),
        SIMDE_FLOAT32_C(  -963.88), SIMDE_FLOAT32_C(  -771.30), SIMDE_FLOAT32_C(   684.54), SIMDE_FLOAT32_C(   491.30),
        SIMDE_FLOAT32_C(   957.91), SIMDE_FLOAT32_C(   910.66), SIMDE_FLOAT32_C(   177.86), SIMDE_FLOAT32_C(   240.66),
        SIMDE_FLOAT32_C(   634.76), SIMDE_FLOAT32_C(   721.49), SIMDE_FLOAT32_C(   472.26), SIMDE_FLOAT32_C(  -612.44) } },
    { { SIMDE_FLOAT32_C(  -333.13), SIMDE_FLOAT32_C(   615.57), SIMDE_FLOAT32_C(   234.76), SIMDE_FLOAT32_C(   428.23),
        SIMDE_FLOAT32_C(   960.34), SIMDE_FLOAT32_C(  -595.97), SIMDE_FLOAT32_C(   887.14), SIMDE_FLOAT32_C(   193.19),
        SIMDE_FLOAT32_C(   789.63), SIMDE_FLOAT32_C(   572.97), SIMDE_FLOAT32_C(  -419.98), SIMDE_FLOAT32_C(  -531.26),
        SIMDE_FLOAT32_C(  -703.71), SIMDE_FLOAT32_C(  -846.60), SIMDE_FLOAT32_C(   996.51), SIMDE_FLOAT32_C(   452.72) },
      { SIMDE_FLOAT32_C(  -333.13), SIMDE_FLOAT32_C(   615.57), SIMDE_FLOAT32_C(   234.76), SIMDE_FLOAT32_C(   428.23),
        SIMDE_FLOAT32_C(   960.34), SIMDE_FLOAT32_C(  -595.97), SIMDE_FLOAT32_C(   887.14), SIMDE_FLOAT32_C(   193.19),
        SIMDE_FLOAT32_C(   789.63), SIMDE_FLOAT32_C(   572.97), SIMDE_FLOAT32_C(  -419.98), SIMDE_FLOAT32_C(  -531.26),
        SIMDE_FLOAT32_C(  -703.71), SIMDE_FLOAT32_C(  -846.60), SIMDE_FLOAT32_C(   996.51), SIMDE_FLOAT32_C(   452.72) } },
    { { SIMDE_FLOAT32_C(   560.27), SIMDE_FLOAT32_C(   364.93), SIMDE_FLOAT32_C(   882.89), SIMDE_FLOAT32_C(   596.38),
        SIMDE_FLOAT32_C(   593.63), SIMDE_FLOAT32_C(   567.43), SIMDE_FLOAT32_C(    87.69), SIMDE_FLOAT32_C(   551.54),
        SIMDE_FLOAT32_C(   478.09), SIMDE_FLOAT32_C(  -734.45), SIMDE_FLOAT32_C(  -207.80), SIMDE_FLOAT32_C(   112.86),
        SIMDE_FLOAT32_C(   987.04), SIMDE_FLOAT32_C(  -735.54), SIMDE_FLOAT32_C(   500.42), SIMDE_FLOAT32_C(  -346.09) },
      { SIMDE_FLOAT32_C(   560.27), SIMDE_FLOAT32_C(   364.93), SIMDE_FLOAT32_C(   882.89), SIMDE_FLOAT32_C(   596.38),
        SIMDE_FLOAT32_C(   593.63), SIMDE_FLOAT32_C(   567.43), SIMDE_FLOAT32_C(    87.69), SIMDE_FLOAT32_C(   551.54),
        SIMDE_FLOAT32_C(   478.09), SIMDE_FLOAT32_C(  -734.45), SIMDE_FLOAT32_C(  -207.80), SIMDE_FLOAT32_C(   112.86),
        SIMDE_FLOAT32_C(   987.04), SIMDE_FLOAT32_C(  -735.54), SIMDE_FLOAT32_C(   500.42), SIMDE_FLOAT32_C(  -346.09) } },
    { { SIMDE_FLOAT32_C(   880.04), SIMDE_FLOAT32_C(  -264.82), SIMDE_FLOAT32_C(  -917.86), SIMDE_FLOAT32_C(   840.38),
        SIMDE_FLOAT32_C(   139.21), SIMDE_FLOAT32_C(   969.28), SIMDE_FLOAT32_C(    33.57), SIMDE_FLOAT32_C(   -71.16),
        SIMDE_FLOAT32_C(   542.24), SIMDE_FLOAT32_C(   613.59), SIMDE_FLOAT32_C(   397.58), SIMDE_FLOAT32_C(   838.53),
        SIMDE_FLOAT32_C(   766.99), SIMDE_FLOAT32_C(   394.09), SIMDE_FLOAT32_C(   291.25), SIMDE_FLOAT32_C(   327.26) },
      { SIMDE_FLOAT32_C(   880.04), SIMDE_FLOAT32_C(  -264.82), SIMDE_FLOAT32_C(  -917.86), SIMDE_FLOAT32_C(   840.38),
        SIMDE_FLOAT32_C(   139.21), SIMDE_FLOAT32_C(   969.28), SIMDE_FLOAT32_C(    33.57), SIMDE_FLOAT32_C(   -71.16),
        SIMDE_FLOAT32_C(   542.24), SIMDE_FLOAT32_C(   613.59), SIMDE_FLOAT32_C(   397.58), SIMDE_FLOAT32_C(   838.53),
        SIMDE_FLOAT32_C(   766.99), SIMDE_FLOAT32_C(   394.09), SIMDE_FLOAT32_C(   291.25), SIMDE_FLOAT32_C(   327.26) } }
  };

  for (size_t i = 0 ; i < (sizeof(test_vec) / sizeof(test_vec[0])) ; i++) {
    simde__m512 r = simde_mm512_set_ps(
        test_vec[i].a[15], test_vec[i].a[14], test_vec[i].a[13], test_vec[i].a[12],
        test_vec[i].a[11], test_vec[i].a[10], test_vec[i].a[ 9], test_vec[i].a[ 8],
        test_vec[i].a[ 7], test_vec[i].a[ 6], test_vec[i].a[ 5], test_vec[i].a[ 4],
        test_vec[i].a[ 3], test_vec[i].a[ 2], test_vec[i].a[ 1], test_vec[i].a[ 0]);
    simde_test_x86_assert_equal_f32x16(r, simde_mm512_loadu_ps(test_vec[i].r), 1);
  }

  return 0;
#else
  fputc('\n', stdout);
  for (int i = 0 ; i < 8 ; i++) {
    simde__m512 a = simde_test_x86_random_f32x16(SIMDE_FLOAT32_C(-1000.0), SIMDE_FLOAT32_C(1000.0));
    simde__m512 r = a;

    simde_test_x86_write_f32x16(2, a, SIMDE_TEST_VEC_POS_FIRST);
    simde_test_x86_write_f32x16(2, r, SIMDE_TEST_VEC_POS_LAST);
  }
  return 1;
#endif
}

SIMDE_TEST_FUNC_LIST_BEGIN
  SIMDE_TEST_FUNC_LIST_ENTRY(mm512_set_ps)
SIMDE_TEST_FUNC_LIST_END

#include <test/x86/avx512/test-avx512-footer.h>
